!function(t,e){function i(e,i){var s=e.nodeName.toLowerCase();if("area"===s){var n,a=e.parentNode,r=a.name;return e.href&&r&&"map"===a.nodeName.toLowerCase()?(n=t("img[usemap=#"+r+"]")[0],!!n&&o(n)):!1}return(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"==s?e.href||i:i)&&o(e)}function o(e){return!t(e).parents().andSelf().filter(function(){return"hidden"===t.curCSS(this,"visibility")||t.expr.filters.hidden(this)}).length}t.om=t.om||{},t.om.version||(t.extend(t.om,{version:"2.0",keyCode:{TAB:9,ENTER:13,ESCAPE:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},lang:{_get:function(e,i,o){return e[o]?e[o]:t.om.lang[i][o]}}}),t.fn.extend({propAttr:t.fn.prop||t.fn.attr,_oldFocus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var o=this;setTimeout(function(){t(o).focus(),i&&i.call(o)},e)}):this._oldFocus.apply(this,arguments)},scrollParent:function(){var e;return e=t.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.curCSS(this,"position",1))&&/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var o,s,n=t(this[0]);n.length&&n[0]!==document;){if(o=n.css("position"),("absolute"===o||"relative"===o||"fixed"===o)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0},disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".om-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".om-disableSelection")}}),t.each(["Width","Height"],function(i,o){function s(e,i,o,s){return t.each(n,function(){i-=parseFloat(t.curCSS(e,"padding"+this,!0))||0,o&&(i-=parseFloat(t.curCSS(e,"border"+this+"Width",!0))||0),s&&(i-=parseFloat(t.curCSS(e,"margin"+this,!0))||0)}),i}var n="Width"===o?["Left","Right"]:["Top","Bottom"],a=o.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+o]=function(i){return i===e?r["inner"+o].call(this):this.each(function(){t(this).css(a,s(this,i)+"px")})},t.fn["outer"+o]=function(e,i){return"number"!=typeof e?r["outer"+o].call(this,e):this.each(function(){t(this).css(a,s(this,e,!0,i)+"px")})}}),t.extend(t.expr[":"],{data:function(e,i,o){return!!t.data(e,o[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var o=t.attr(e,"tabindex"),s=isNaN(o);return(s||o>=0)&&i(e,!s)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t.extend(t.om,{plugin:{add:function(e,i,o){var s=t.om[e].prototype;for(var n in o)s.plugins[n]=s.plugins[n]||[],s.plugins[n].push([i,o[n]])},call:function(t,e,i){var o=t.plugins[e];if(o&&t.element[0].parentNode)for(var s=0;s<o.length;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}}}))}(jQuery),function(t,e){if(t.cleanData){var i=t.cleanData;t.cleanData=function(e){for(var o,s=0;null!=(o=e[s]);s++)t(o).triggerHandler("om-remove");i(e)}}t.omWidget=function(e,i,o){var s,n=e.split(".")[0];e=e.split(".")[1],s=n+"-"+e,o||(o=i,i=t.OMWidget),t.expr[":"][s]=function(i){return!!t.data(i,e)},t[n]=t[n]||{},t[n][e]=function(t,e){arguments.length&&this._createWidget(t,e)};var a=new i;a.options=t.extend(!0,{},a.options),t[n][e].prototype=t.extend(!0,a,{namespace:n,widgetName:e,widgetEventPrefix:t[n][e].prototype.widgetEventPrefix||e,widgetBaseClass:s},o),t.omWidget.bridge(e,t[n][e])},t.omWidget.bridge=function(i,o){t.fn[i]=function(s){var n="string"==typeof s,a=Array.prototype.slice.call(arguments,1),r=this;return s=!n&&a.length?t.extend.apply(null,[!0,s].concat(a)):s,n&&"_"===s.charAt(0)?r:(this.each(n?function(){var o=t.data(this,i);if("options"==s)return r=o&&o.options,!1;var n=o&&t.isFunction(o[s])?o[s].apply(o,a):o;return n!==o&&n!==e?(r=n,!1):void 0}:function(){var e=t.data(this,i);e?(e._setOptions(s||{}),t.extend(e.options,s),t(e.beforeInitListeners).each(function(){this.call(e)}),e._init(),t(e.initListeners).each(function(){this.call(e)})):t.data(this,i,new o(s,this))}),r)}},t.omWidget.addCreateListener=function(e,i){var o=e.split(".");t[o[0]][o[1]].prototype.createListeners.push(i)},t.omWidget.addInitListener=function(e,i){var o=e.split(".");t[o[0]][o[1]].prototype.initListeners.push(i)},t.omWidget.addBeforeInitListener=function(e,i){var o=e.split(".");t[o[0]][o[1]].prototype.beforeInitListeners.push(i)},t.OMWidget=function(t,e){this.createListeners=[],this.initListeners=[],this.beforeInitListeners=[],arguments.length&&this._createWidget(t,e)},t.OMWidget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(e,i){t.data(i,this.widgetName,this),this.element=t(i),this.options=t.extend(!0,{},this.options,this._getCreateOptions(),e);var o=this;this.element.bind("om-remove._"+this.widgetName,function(){o.destroy()}),this._create(),t(this.createListeners).each(function(){this.call(o)}),this._trigger("create"),t(this.beforeInitListeners).each(function(){this.call(o)}),this._init(),t(this.initListeners).each(function(){this.call(o)})},_getCreateOptions:function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName)},widget:function(){return this.element},option:function(i,o){var s=i;if(0===arguments.length)return t.extend({},this.options);if("string"==typeof i){if(o===e)return this.options[i];s={},s[i]=o}return this._setOptions(s),this},_setOptions:function(e){var i=this;return t.each(e,function(t,e){i._setOption(t,e)}),this},_setOption:function(t,e){return this.options[t]=e,this},_trigger:function(e,i){var o=this.options[e];if(i=t.Event(i),i.type=e,i.originalEvent)for(var s,n=t.event.props.length;n;)s=t.event.props[--n],i[s]=i.originalEvent[s];for(var a=[],r=arguments.length,n=2;r>n;n++)a[n-2]=arguments[n];return r>1&&(a[r-2]=arguments[1]),!(t.isFunction(o)&&o.apply(this.element,a)===!1||i.isDefaultPrevented())}}}(jQuery),function(t,e){t.om=t.om||{};var i=/left|center|right/,o=/top|center|bottom/,s="center",n=t.fn.position,a=t.fn.offset;t.fn.position=function(e){if(!e||!e.of)return n.apply(this,arguments);e=t.extend({},e);var a,r,l,d=t(e.of),h=d[0],c=(e.collision||"flip").split(" "),u=e.offset?e.offset.split(" "):[0,0];return 9===h.nodeType?(a=d.width(),r=d.height(),l={top:0,left:0}):h.setTimeout?(a=d.width(),r=d.height(),l={top:d.scrollTop(),left:d.scrollLeft()}):h.preventDefault?(e.at="left top",a=r=0,l={top:e.of.pageY,left:e.of.pageX}):(a=d.outerWidth(),r=d.outerHeight(),l=d.offset()),t.each(["my","at"],function(){var t=(e[this]||"").split(" ");1===t.length&&(t=i.test(t[0])?t.concat([s]):o.test(t[0])?[s].concat(t):[s,s]),t[0]=i.test(t[0])?t[0]:s,t[1]=o.test(t[1])?t[1]:s,e[this]=t}),1===c.length&&(c[1]=c[0]),u[0]=parseInt(u[0],10)||0,1===u.length&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,"right"===e.at[0]?l.left+=a:e.at[0]===s&&(l.left+=a/2),"bottom"===e.at[1]?l.top+=r:e.at[1]===s&&(l.top+=r/2),l.left+=u[0],l.top+=u[1],this.each(function(){var i,o=t(this),n=o.outerWidth(),d=o.outerHeight(),h=parseInt(t.curCSS(this,"marginLeft",!0))||0,m=parseInt(t.curCSS(this,"marginTop",!0))||0,p=n+h+(parseInt(t.curCSS(this,"marginRight",!0))||0),f=d+m+(parseInt(t.curCSS(this,"marginBottom",!0))||0),g=t.extend({},l);"right"===e.my[0]?g.left-=n:e.my[0]===s&&(g.left-=n/2),"bottom"===e.my[1]?g.top-=d:e.my[1]===s&&(g.top-=d/2),g.left=Math.round(g.left),g.top=Math.round(g.top),i={left:g.left-h,top:g.top-m},t.each(["left","top"],function(o,s){t.om.omPosition[c[o]]&&t.om.omPosition[c[o]][s](g,{targetWidth:a,targetHeight:r,elemWidth:n,elemHeight:d,collisionPosition:i,collisionWidth:p,collisionHeight:f,offset:u,my:e.my,at:e.at})}),t.fn.bgiframe&&o.bgiframe(),o.offset(t.extend(g,{using:e.using}))})},t.om.omPosition={fit:{left:function(e,i){var o=t(window),s=i.collisionPosition.left+i.collisionWidth-o.width()-o.scrollLeft();e.left=s>0?e.left-s:Math.max(e.left-i.collisionPosition.left,e.left)},top:function(e,i){var o=t(window),s=i.collisionPosition.top+i.collisionHeight-o.height()-o.scrollTop();e.top=s>0?e.top-s:Math.max(e.top-i.collisionPosition.top,e.top)}},flip:{left:function(e,i){if(i.at[0]!==s){var o=t(window),n=i.collisionPosition.left+i.collisionWidth-o.width()-o.scrollLeft(),a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,r="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];e.left+=i.collisionPosition.left<0?a+r+l:n>0?a+r+l:0}},top:function(e,i){if(i.at[1]!==s){var o=t(window),n=i.collisionPosition.top+i.collisionHeight-o.height()-o.scrollTop(),a="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,r="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];e.top+=i.collisionPosition.top<0?a+r+l:n>0?a+r+l:0}}}},t.offset.setOffset||(t.offset.setOffset=function(e,i){/static/.test(t.curCSS(e,"position"))&&(e.style.position="relative");var o=t(e),s=o.offset(),n=parseInt(t.curCSS(e,"top",!0),10)||0,a=parseInt(t.curCSS(e,"left",!0),10)||0,r={top:i.top-s.top+n,left:i.left-s.left+a};"using"in i?i.using.call(e,r):o.css(r)},t.fn.offset=function(e){var i=this[0];return i&&i.ownerDocument?e?this.each(function(){t.offset.setOffset(this,e)}):a.call(this):null})}(jQuery),function(t,e){t.omWidget("om.omMouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){if(e.originalEvent=e.originalEvent||{},!e.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,o=1==e.which,s="string"==typeof this.options.cancel?t(e.target).closest(this.options.cancel).length:!1;return o&&!s&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),e.originalEvent.mouseHandled=!0,!0)):!0}},_mouseMove:function(e){return!t.browser.msie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target==this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(t){return this.mouseDelayMet},_mouseStart:function(t){},_mouseDrag:function(t){},_mouseStop:function(t){},_mouseCapture:function(t){return!0}})}(jQuery),function(t,e){t.omWidget("om.omDraggable",t.om.omMouse,{widgetEventPrefix:"drag",options:{axis:!1,containment:!1,cursor:"auto",_scope:"default",handle:!1,helper:"original",revert:!1,scroll:!0},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.element.addClass("om-draggable"),this.options.disabled&&this.element.addClass("om-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("omDraggable")?(this.element.removeData("omDraggable").unbind(".draggable").removeClass("om-draggable om-draggable-dragging om-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).is(".om-resizable-handle")?!1:(this.handle=this._getHandle(e),this.handle?!0:!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._cacheHelperProportions(),t.om.ddmanager&&(t.om.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.containment&&this._setContainment(),this._trigger("onStart",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.om.ddmanager&&!i.dropBehaviour&&t.om.ddmanager.prepareOffsets(this,e),this.helper.addClass("om-draggable-dragging"),this._mouseDrag(e,!0),t.om.ddmanager&&t.om.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var o=this._uiHash();if(this._trigger("onDrag",e,o)===!1)return this._mouseUp({}),!1;this.position=o.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.om.ddmanager&&t.om.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;if(t.om.ddmanager&&!this.options.dropBehaviour&&(i=t.om.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var o=this;t(this.helper).animate(this.originalPosition,500,function(){o._trigger("onStop",e)!==!1&&o._clear()})}else this._trigger("onStop",e)!==!1&&this._clear();return!1},_mouseUp:function(e){return t.om.ddmanager&&t.om.ddmanager.dragStop(this,e),t.om.omMouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".om-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=this.options.handle&&t(this.options.handle,this.element).length?!1:!0;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(i=!0)}),i},_createHelper:function(e){var i=this.options,o=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo(this.element[0].parentNode),o[0]==this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(e.containment),o=i[0];if(!o)return;var s=(i.offset(),"hidden"!=t(o).css("overflow"));this.containment=[(parseInt(t(o).css("borderLeftWidth"),10)||0)+(parseInt(t(o).css("paddingLeft"),10)||0),(parseInt(t(o).css("borderTopWidth"),10)||0)+(parseInt(t(o).css("paddingTop"),10)||0),(s?Math.max(o.scrollWidth,o.offsetWidth):o.offsetWidth)-(parseInt(t(o).css("borderLeftWidth"),10)||0)-(parseInt(t(o).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(o.scrollHeight,o.offsetHeight):o.offsetHeight)-(parseInt(t(o).css("borderTopWidth"),10)||0)-(parseInt(t(o).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var o="absolute"==e?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),n=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*o+this.offset.parent.top*o-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop())*o),left:i.left+this.offset.relative.left*o+this.offset.parent.left*o-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())*o)}},_generatePosition:function(e){var i=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(i[0].tagName),s=e.pageX,n=e.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var r=this.relative_container.offset();a=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]}else a=this.containment;e.pageX-this.offset.click.left<a[0]&&(s=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(n=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(s=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(n=a[3]+this.offset.click.top)}}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("om-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,o){return o=o||this._uiHash(),t.om.plugin.call(this,e,[i,o]),"onDrag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.OMWidget.prototype._trigger.call(this,e,i,o)},plugins:{},_uiHash:function(t){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.om.plugin.add("omDraggable","cursor",{onStart:function(e,i){var o=t("body"),s=t(this).data("omDraggable").options;o.css("cursor")&&(s._cursor=o.css("cursor")),o.css("cursor",s.cursor)},onStop:function(e,i){var o=t(this).data("omDraggable");if(o){var s=o.options;s._cursor&&t("body").css("cursor",s._cursor)}}}),t.om.plugin.add("omDraggable","scroll",{onStart:function(e,i){var o=t(this).data("omDraggable");o.scrollParent[0]!=document&&"HTML"!=o.scrollParent[0].tagName&&(o.overflowOffset=o.scrollParent.offset())},onDrag:function(e,i){var o=t(this).data("omDraggable"),s=o.options,n=!1,a=20,r=20;o.scrollParent[0]!=document&&"HTML"!=o.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(o.overflowOffset.top+o.scrollParent[0].offsetHeight-i.pageY<a?o.scrollParent[0].scrollTop=n=o.scrollParent[0].scrollTop+r:i.pageY-o.overflowOffset.top<a&&(o.scrollParent[0].scrollTop=n=o.scrollParent[0].scrollTop-r)),s.axis&&"y"==s.axis||(o.overflowOffset.left+o.scrollParent[0].offsetWidth-i.pageX<a?o.scrollParent[0].scrollLeft=n=o.scrollParent[0].scrollLeft+r:i.pageX-o.overflowOffset.left<a&&(o.scrollParent[0].scrollLeft=n=o.scrollParent[0].scrollLeft-r))):(s.axis&&"x"==s.axis||(i.pageY-t(document).scrollTop()<a?n=t(document).scrollTop(t(document).scrollTop()-r):t(window).height()-(i.pageY-t(document).scrollTop())<a&&(n=t(document).scrollTop(t(document).scrollTop()+r))),s.axis&&"y"==s.axis||(i.pageX-t(document).scrollLeft()<a?n=t(document).scrollLeft(t(document).scrollLeft()-r):t(window).width()-(i.pageX-t(document).scrollLeft())<a&&(n=t(document).scrollLeft(t(document).scrollLeft()+r)))),n!==!1&&t.om.ddmanager&&!s.dropBehaviour&&t.om.ddmanager.prepareOffsets(o,i)}})}(jQuery),function(t,e){t.omWidget("om.omDroppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,greedy:!1,hoverClass:!1,_scope:"default"},_create:function(){var e=this.options,i=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.om.ddmanager.droppables[e._scope]=t.om.ddmanager.droppables[e._scope]||[],t.om.ddmanager.droppables[e._scope].push(this),this.element.addClass("om-droppable")},destroy:function(){for(var e=t.om.ddmanager.droppables[this.options._scope],i=0;i<e.length;i++)e[i]==this&&e.splice(i,1);return this.element.removeClass("om-droppable om-droppable-disabled").removeData("omDroppable").unbind(".droppable"),this},_setOption:function(e,i){"accept"==e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.OMWidget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.om.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("onDragStart",e,i.currentItem||i.element)},_deactivate:function(e){t.om.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_over:function(e){var i=t.om.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("onDragOver",e,i.currentItem||i.element))},_out:function(e){var i=t.om.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDragOut",e,i.currentItem||i.element))},_drop:function(e,i){var o=i||t.om.ddmanager.current;if(!o||(o.currentItem||o.element)[0]==this.element[0])return!1;var s=!1;return this.element.find(":data(omDroppable)").not(".om-draggable-dragging").each(function(){var e=t.data(this,"omDroppable");return e.options.greedy&&!e.options.disabled&&e.options._scope==o.options._scope&&e.accept.call(e.element[0],o.currentItem||o.element)&&t.om.intersect(o,t.extend(e,{offset:e.element.offset()}))?(s=!0,!1):void 0}),s?!1:this.accept.call(this.element[0],o.currentItem||o.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDrop",e,o.currentItem||o.element),this.element):!1}}),t.om.intersect=function(t,e){if(!e.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,o=i+t.helperProportions.width,s=(t.positionAbs||t.position.absolute).top,n=s+t.helperProportions.height,a=e.offset.left,r=a+e.proportions.width,l=e.offset.top,d=l+e.proportions.height;return a<i+t.helperProportions.width/2&&o-t.helperProportions.width/2<r&&l<s+t.helperProportions.height/2&&n-t.helperProportions.height/2<d},t.om.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var o=t.om.ddmanager.droppables[e.options._scope]||[],s=i?i.type:null,n=(e.currentItem||e.element).find(":data(omDroppable)").andSelf();t:for(var a=0;a<o.length;a++)if(!(o[a].options.disabled||e&&!o[a].accept.call(o[a].element[0],e.currentItem||e.element))){for(var r=0;r<n.length;r++)if(n[r]==o[a].element[0]){o[a].proportions.height=0;continue t}o[a].visible="none"!=o[a].element.css("display"),o[a].visible&&("mousedown"==s&&o[a]._activate.call(o[a],i),o[a].offset=o[a].element.offset(),o[a].proportions={width:o[a].element[0].offsetWidth,height:o[a].element[0].offsetHeight})}},drop:function(e,i){var o=!1;return t.each(t.om.ddmanager.droppables[e.options._scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&t.om.intersect(e,this)&&(o=o||this._drop.call(this,i)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),o},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.om.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.om.ddmanager.prepareOffsets(e,i),t.each(t.om.ddmanager.droppables[e.options._scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var o=t.om.intersect(e,this),s=o||1!=this.isover?o&&0==this.isover?"isover":null:"isout";if(s){var n;if(this.options.greedy){var a=this.element.parents(":data(omDroppable):eq(0)");a.length&&(n=t.data(a[0],"omDroppable"),n.greedyChild="isover"==s?1:0)}n&&"isover"==s&&(n.isover=0,n.isout=1,n._out.call(n,i)),this[s]=1,this["isout"==s?"isover":"isout"]=0,this["isover"==s?"_over":"_out"].call(this,i),n&&"isout"==s&&(n.isout=0,n.isover=1,n._over.call(n,i))}}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.om.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t,e){t.omWidget("om.omResizable",t.om.omMouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,aspectRatio:!1,autoHide:!1,containment:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,i=this.options;if(this.element.addClass("om-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"om-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&t.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(t('<div class="om-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".om-resizable-handle",this.element).length?{n:".om-resizable-n",e:".om-resizable-e",s:".om-resizable-s",w:".om-resizable-w",se:".om-resizable-se",sw:".om-resizable-sw",ne:".om-resizable-ne",nw:".om-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var o=this.handles.split(",");this.handles={};for(var s=0;s<o.length;s++){var n=t.trim(o[s]),a="om-resizable-"+n,r=t('<div class="om-resizable-handle '+a+'"></div>');/sw|se|ne|nw/.test(n)&&r.css({zIndex:++i.zIndex}),"se"==n&&r.addClass("om-icon om-icon-gripsmall-diagonal-se"),this.handles[n]=".om-resizable-"+n,this.element.append(r)}}this._renderAxis=function(e){e=e||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var o=t(this.handles[i],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(i)?o.outerHeight():o.outerWidth();var n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(n,s),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".om-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/om-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(this._handles.hide(),t(this.element).addClass("om-resizable-autohide").hover(function(){i.disabled||(t(this).removeClass("om-resizable-autohide"),e._handles.show())},function(){i.disabled||e.resizing||(t(this).addClass("om-resizable-autohide"),e._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("om-resizable om-resizable-disabled om-resizable-resizing").removeData("resizable").unbind(".resizable").find(".om-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;i.after(this.originalElement.css({
position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var i=!1;for(var o in this.handles)t(this.handles[o])[0]==e.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(e){var o=this.options,s=this.element.position(),n=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(n.is(".ui-draggable")||/absolute/.test(n.css("position")))&&n.css({position:"absolute",top:s.top,left:s.left}),t.browser.opera&&/relative/.test(n.css("position"))&&n.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var a=i(this.helper.css("left")),r=i(this.helper.css("top"));o.containment&&(a+=t(o.containment).scrollLeft()||0,r+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:r},this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalPosition={left:a,top:r},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=t(".om-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==l?this.axis+"-resize":l),n.addClass("om-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i=this.helper,o=(this.options,this.originalMousePosition),s=this.axis,n=e.pageX-o.left||0,a=e.pageY-o.top||0,r=this._change[s];if(!r)return!1;{var l=r.apply(this,[e,n,a]);t.browser.msie&&t.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(l=this._updateRatio(l,e)),l=this._respectSize(l,e),this._propagate("resize",e),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,o=this;if(this._helper){var s=this._proportionallyResizeElements,n=s.length&&/textarea/i.test(s[0].nodeName),a=n&&o._hasScroll(s[0],"left")?0:o.sizeDiff.height,r=n?0:o.sizeDiff.width,l={width:o.helper.width()-r,height:o.helper.height()-a},d=parseInt(o.element.css("left"),10)+(o.position.left-o.originalPosition.left)||null,h=parseInt(o.element.css("top"),10)+(o.position.top-o.originalPosition.top)||null;i.animate||this.element.css(t.extend(l,{top:h,left:d})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("om-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,s,n,a,r=this.options;a={minWidth:o(r.minWidth)?r.minWidth:0,maxWidth:o(r.maxWidth)?r.maxWidth:1/0,minHeight:o(r.minHeight)?r.minHeight:0,maxHeight:o(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),s>a.minHeight&&(a.minHeight=s),i<a.maxWidth&&(a.maxWidth=i),n<a.maxHeight&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(t){this.options;this.offset=this.helper.offset(),o(t.left)&&(this.position.left=t.left),o(t.top)&&(this.position.top=t.top),o(t.height)&&(this.size.height=t.height),o(t.width)&&(this.size.width=t.width)},_updateRatio:function(t,e){var i=(this.options,this.position),s=this.size,n=this.axis;return o(t.height)?t.width=t.height*this.aspectRatio:o(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==n&&(t.left=i.left+(s.width-t.width),t.top=null),"nw"==n&&(t.top=i.top+(s.height-t.height),t.left=i.left+(s.width-t.width)),t},_respectSize:function(t,e){var i=(this.helper,this._vBoundaries),s=(this._aspectRatio||e.shiftKey,this.axis),n=o(t.width)&&i.maxWidth&&i.maxWidth<t.width,a=o(t.height)&&i.maxHeight&&i.maxHeight<t.height,r=o(t.width)&&i.minWidth&&i.minWidth>t.width,l=o(t.height)&&i.minHeight&&i.minHeight>t.height;r&&(t.width=i.minWidth),l&&(t.height=i.minHeight),n&&(t.width=i.maxWidth),a&&(t.height=i.maxHeight);var d=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);r&&c&&(t.left=d-i.minWidth),n&&c&&(t.left=d-i.maxWidth),l&&u&&(t.top=h-i.minHeight),a&&u&&(t.top=h-i.maxHeight);var m=!t.width&&!t.height;return m&&!t.left&&t.top?t.top=null:m&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var o=this._proportionallyResizeElements[i];if(!this.borderDif){var s=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")];this.borderDif=t.map(s,function(t,e){var i=parseInt(t,10)||0,o=parseInt(n[e],10)||0;return i+o})}t.browser.msie&&(t(e).is(":hidden")||t(e).parents(":hidden").length)||o.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var o=t.browser.msie&&t.browser.version<7,s=o?1:0,n=o?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-s+"px",top:this.elementOffset.top-s+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e,i){return{width:this.originalSize.width+e}},w:function(t,e,i){var o=(this.options,this.originalSize),s=this.originalPosition;return{left:s.left+e,width:o.width-e}},n:function(t,e,i){var o=(this.options,this.originalSize),s=this.originalPosition;return{top:s.top+i,height:o.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,o){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,o]))},sw:function(e,i,o){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,o]))},ne:function(e,i,o){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,o]))},nw:function(e,i,o){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,o]))}},_propagate:function(e,i){t.om.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var o=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[o]>0?!0:(e[o]=1,s=e[o]>0,e[o]=0,s)},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.extend(t.om.resizable,{version:"1.1"}),t.om.plugin.add("omResizable","alsoResize",{start:function(e,i){var o=t(this).data("omResizable"),s=o.options,n=function(e){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10),position:e.css("position")})})};"object"!=typeof s.alsoResize||s.alsoResize.parentNode?n(s.alsoResize):s.alsoResize.length?(s.alsoResize=s.alsoResize[0],n(s.alsoResize)):t.each(s.alsoResize,function(t){n(t)})},resize:function(e,i){var o=t(this).data("omResizable"),s=o.options,n=o.originalSize,a=o.originalPosition,r={height:o.size.height-n.height||0,width:o.size.width-n.width||0,top:o.position.top-a.top||0,left:o.position.left-a.left||0},l=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("resizable-alsoresize"),a={},l=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(l,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(a[e]=i||null)}),t.browser.opera&&/relative/.test(e.css("position"))&&(o._revertToRelativePosition=!0,e.css({position:"absolute",top:"auto",left:"auto"})),e.css(a)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):t.each(s.alsoResize,function(t,e){l(t,e)})},stop:function(e,i){var o=t(this).data("omResizable"),s=o.options,n=function(e){t(e).each(function(){var e=t(this);e.css({position:e.data("resizable-alsoresize").position})})};o._revertToRelativePosition&&(o._revertToRelativePosition=!1,"object"!=typeof s.alsoResize||s.alsoResize.nodeType?n(s.alsoResize):t.each(s.alsoResize,function(t){n(t)})),t(this).removeData("resizable-alsoresize")}}),t.om.plugin.add("omResizable","containment",{start:function(e,o){var s=t(this).data("omResizable"),n=s.options,a=s.element,r=n.containment,l=r instanceof t?r.get(0):/parent/.test(r)?a.parent().get(0):r;if(l)if(s.containerElement=t(l),/document/.test(r)||r==document)s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var d=t(l),h=[];t(["Top","Right","Left","Bottom"]).each(function(t,e){h[t]=i(d.css("padding"+e))}),s.containerOffset=d.offset(),s.containerPosition=d.position(),s.containerSize={height:d.innerHeight()-h[3],width:d.innerWidth()-h[1]};var c=s.containerOffset,u=s.containerSize.height,m=s.containerSize.width,p=s._hasScroll(l,"left")?l.scrollWidth:m,f=s._hasScroll(l)?l.scrollHeight:u;s.parentData={element:l,left:c.left,top:c.top,width:p,height:f}}},resize:function(e,i){var o=t(this).data("omResizable"),s=o.options,n=(o.containerSize,o.containerOffset),a=(o.size,o.position),r=o._aspectRatio||e.shiftKey,l={top:0,left:0},d=o.containerElement;d[0]!=document&&/static/.test(d.css("position"))&&(l=n),a.left<(o._helper?n.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-n.left:o.position.left-l.left),r&&(o.size.height=o.size.width/s.aspectRatio),o.position.left=s.helper?n.left:0),a.top<(o._helper?n.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-n.top:o.position.top),r&&(o.size.width=o.size.height*s.aspectRatio),o.position.top=o._helper?n.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top;var h=Math.abs((o._helper?o.offset.left-l.left:o.offset.left-l.left)+o.sizeDiff.width),c=Math.abs((o._helper?o.offset.top-l.top:o.offset.top-n.top)+o.sizeDiff.height),u=o.containerElement.get(0)==o.element.parent().get(0),m=/relative|absolute/.test(o.containerElement.css("position"));u&&m&&(h-=o.parentData.left),h+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-h,r&&(o.size.height=o.size.width/o.aspectRatio)),c+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-c,r&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(e,i){var o=t(this).data("omResizable"),s=o.options,n=(o.position,o.containerOffset),a=o.containerPosition,r=o.containerElement,l=t(o.helper),d=l.offset(),h=l.outerWidth()-o.sizeDiff.width,c=l.outerHeight()-o.sizeDiff.height;o._helper&&!s.animate&&/relative/.test(r.css("position"))&&t(this).css({left:d.left-a.left-n.left,width:h,height:c}),o._helper&&!s.animate&&/static/.test(r.css("position"))&&t(this).css({left:d.left-a.left-n.left,width:h,height:c})}});var i=function(t){return parseInt(t,10)||0},o=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t,e){t.omWidget("om.sortable",t.om.omMouse,{widgetEventPrefix:"sort",options:{helper:"original",items:"> *",placeholder:!1},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},_mouseCapture:function(e,i){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);{var o=null,s=this;t(e.target).parents().each(function(){return t.data(this,"sortable-item")==s?(o=t(this),!1):void 0})}return t.data(e.target,"sortable-item")==s&&(o=t(e.target)),o?(this.currentItem=o,!0):!1},_mouseStart:function(e,i,o){return this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.helper.css("zIndex",1e3),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);var i=(this.options,!1);this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<20?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+20:e.pageY-this.overflowOffset.top<20&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-20),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<20?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+20:e.pageX-this.overflowOffset.left<20&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-20),this.positionAbs=this._convertPositionTo("absolute"),this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px";for(var o=this.items.length-1;o>=0;o--){var s=this.items[o],n=s.item[0],a=this._intersectsWithPointer(s);if(a&&n!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"==this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1==a?"down":"up",!this._intersectsWithSides(s))break;this._rearrange(e,s);break}}return this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){return t?(this._clear(t,e),!1):void 0},_intersectsWith:function(t){{var e=this.positionAbs.left,i=e+this.helperProportions.width,o=this.positionAbs.top,s=o+this.helperProportions.height,n=t.left,a=n+t.width,r=t.top,l=r+t.height;this.offset.click.top,this.offset.click.left}return n<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&r<o+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_isOverAxis:function(t,e,i){return t>e&&e+i>t},_intersectsWithPointer:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=e&&i,s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return o?this.floating?n&&"right"==n||"down"==s?2:1:s&&("down"==s?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&i||"left"==s&&!i:o&&("down"==o&&e||"up"==o&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_refreshItems:function(e){this.items=[],this.containers=[this];for(var i=this.items,o=[t(this.options.items,this.element),this],s=o[1],n=o[0],a=0,r=n.length;r>a;a++){var l=t(n[a]);l.data("sortable-item",s),i.push({item:l,instance:s,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var e=this.items.length-1;e>=0;e--){var i=this.items[e];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var o=i.item;t||(i.width=o.outerWidth(),i.height=o.outerHeight());var s=o.offset();i.left=s.left,i.top=s.top}}return this},_createPlaceholder:function(e){var i=e||this,o=i.options;if(!o.placeholder||o.placeholder.constructor==String){var s=o.placeholder;o.placeholder={element:function(){var e=t(document.createElement(i.currentItem[0].nodeName)).addClass(s||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return s||(e.style.visibility="hidden"),e}}}i.placeholder=t(o.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder)},_createHelper:function(e){var i=this.currentItem;return i.parents("body").length||t(this.currentItem[0].parentNode)[0].appendChild(i[0]),this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")},i},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent,i=e.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],e[0])&&(i.left+=this.scrollParent.scrollLeft(),i.top+=this.scrollParent.scrollTop()),(e[0]==document.body||e[0].tagName&&"html"==e[0].tagName.toLowerCase()&&t.browser.msie)&&(i={top:0,left:0}),{top:i.top+(parseInt(e.css("borderTopWidth"),10)||0),left:i.left+(parseInt(e.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_convertPositionTo:function(e,i){i||(i=this.position);var o="absolute"==e?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),n=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*o+this.offset.parent.top*o-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop())*o),left:i.left+this.offset.relative.left*o+this.offset.parent.left*o-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())*o)}},_generatePosition:function(e){var i=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var s=e.pageX,n=e.pageY;return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())}},_rearrange:function(t,e,i,o){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this,n=this.counter;window.setTimeout(function(){n==s.counter&&s.refreshPositions(!o)},0)},_clear:function(t,e){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)("auto"==this._storedCSS[o]||"static"==this._storedCSS[o])&&(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.helper.css("zIndex",1e3),this.cancelHelperRemoval){if(!e){for(var o=0;o<i.length;o++)i[o].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(var o=0;o<i.length;o++)i[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.OMWidget.prototype._trigger.apply(this,arguments)},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.om.sortable,{version:"1.1"})}(jQuery),function(t){var e=["collapse","min","max","close"],i=["om-panel-tool-collapse","om-panel-tool-expand","om-panel-tool-min","om-panel-tool-max","om-panel-tool-close"],o={anim:!0,speed:"fast"};t.omWidget("om.omPanel",{options:{title:"",width:"auto",height:"auto",header:!0,collapsible:!1,closable:!1,closed:!1,collapsed:!1,tools:[],loadingMessage:"default",_closeMode:"hidden",_helpMsg:!1},_create:function(){this.element.addClass("om-panel-body om-widget-content").wrap("<div class='om-widget om-panel'></div>")},_init:function(){var t,e=this.options,i=this.element,o=i.parent();this._renderHeader(),t=i.prev(),e.header===!1&&i.addClass("om-panel-noheader"),this._bindEvent(),this._resize(o);var s=e.header!==!1?t.outerHeight():0;e.collapsed!==!1?("auto"!==e.height&&o.height(s),i.hide(),e.header!==!1&&t.find(">.om-panel-tool >.om-panel-tool-collapse").removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand")):(i.show(),e.header!==!1&&t.find(">.om-panel-tool >.om-panel-tool-expand").removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse")),e.closed!==!1?this._hide(o):this._show(o),this.reload()},_hide:function(t){"hidden"===this.options._closeMode?t.hide():"visibility"===this.options._closeMode&&t.addClass("om-helper-hidden-accessible")},_show:function(t){"hidden"===this.options._closeMode?t.show():"visibility"===this.options._closeMode&&t.removeClass("om-helper-hidden-accessible")},_bindEvent:function(){var e=this,i=this.element,o=this.options,s=i.prev();o.collapsible!==!1&&s.click(function(i){t(i.target).is(".om-panel-icon,.om-panel-title,.om-panel-header")&&(o.collapsed!==!1?e.expand():e.collapse())}).find(".om-panel-tool-collapse , .om-panel-tool-expand").click(function(){o.collapsed!==!1?e.expand():e.collapse()}),o.closable!==!1&&s.find(".om-panel-tool-close").click(function(t){e.close()})},_renderHeader:function(){if(this.header&&this.header.remove(),this.options.header!==!1){var e=this,o=this.options,s=o.tools,n=this.header=t("<div class='om-panel-header'></div>").insertBefore(this.element);if(o._helpMsg&&n.parent().addClass("helpMsg"),o.iconCls&&t("<div class='om-icon om-panel-icon'></div>").addClass(o.iconCls).appendTo(n),t("<div class='om-panel-title'></div>").html(o.title).appendTo(n),$tool=t("<div class='om-panel-tool'></div>"),o.collapsible!==!1&&t("<div class='om-icon om-panel-tool-collapse'></div>").appendTo($tool),t.isArray(s))for(var a=0,r=s.length;r>a;a++){var l,d=s[a];(l=this._getInnerToolCls(d.id))?t("<div class='om-icon'></div>").addClass(l).click(function(t){d.handler.call(this,e,t)}).appendTo($tool):"string"==typeof d.iconCls?t("<div class='om-icon'></div>").addClass(d.iconCls).click(function(t){d.handler.call(this,e,t)}).appendTo($tool):t.isArray(d.iconCls)&&!function(i){t("<div class='om-icon'></div>").addClass(i.iconCls[0]).click(function(t){i.handler.call(this,e,t)}).hover(function(){i.iconCls[1]&&t(this).toggleClass(i.iconCls[1])}).appendTo($tool)}(d)}else try{t(s).appendTo($tool)}catch(h){throw"bad format of jquery selector."}o.closable!==!1&&t("<div class='om-icon om-panel-tool-close'></div>").appendTo($tool),$tool.find(">div.om-icon").hover(function(){var e=this;t.each(i,function(){t(e).hasClass(this)&&t(e).toggleClass(this+"-hover")})}),$tool.appendTo(n)}},_resize:function(t){var e=this.element,i=e.prev(),t=e.parent(),o=this.options;if("fit"==o.width)o.width="100%",t.width("100%"),i.css("width",""),e.css("width","");else if("auto"!==o.width)t.width(o.width),i.outerWidth(t.width()),e.outerWidth(t.width());else{var s=e.attr("style");s&&-1!==s.indexOf("width")?(t.width(e.outerWidth()),i.outerWidth(e.outerWidth())):(t.css("width",""),i.css("width",""),e.css("width",""))}if("fit"==o.height)o.height="100%",t.height("100%"),0==o.header?e.height("100%"):e.outerHeight(t.height()-(this.options.header!==!1?i.outerHeight():0));else if("auto"!==o.height)t.height(o.height),e.outerHeight(t.height()-(this.options.header!==!1?i.outerHeight():0));else{var s=e.attr("style");s&&-1!==s.indexOf("height")?t.height(i.outerHeight()+e.outerHeight()):(t.css("height",""),e.css("height",""))}},_getInnerToolCls:function(i){return-1!=t.inArray(i,e)?"om-panel-tool-"+i:null},_showLoadingMessage:function(){var e=this.options,i=this.element,o=i.next(".om-panel-loadingMessage"),s={width:i.innerWidth(),height:i.innerHeight(),left:i.position().left+parseInt(i.css("border-left-width")),top:i.position().top};0===o.length?"default"===e.loadingMessage?t("<div class='om-panel-loadingMessage'><div class='valignMiddle'><div class='loadingImg'>数据加载中</div></div></div>").css(s).appendTo(i.parent()):t("<div class='om-panel-loadingMessage'></div>").appendTo(i.parent()).html(e.loadingMessage).css(s):o.css(s).show()},_hideLoadingMessage:function(){this.element.parent().find(".om-panel-loadingMessage").hide()},setTitle:function(t){this.element.prev().find(">.om-panel-title").html(t)},setIconClass:function(e){var i=this.element.prev(),o=i.find(">.om-panel-icon");null==e&&0!==o.length?o.remove():(0==o.length&&(o=t("<div class='om-icon om-panel-icon'></div>").insertBefore(i.find(">.om-panel-title"))),this.options.iconCls&&o.removeClass(this.options.iconCls),o.addClass(e),this.options.iconCls=e)},open:function(){var t=this.element,e=this.options;if(e.closed){if(e.onBeforeOpen&&this._trigger("onBeforeOpen")===!1)return;this._show(t.parent()),e.closed=!1,e.onOpen&&this._trigger("onOpen")}},close:function(){var t=this.element,e=this.options;if(!e.closed){if(e.onBeforeClose&&this._trigger("onBeforeClose")===!1)return;this._hide(t.parent()),e.closed=!0,e.onClose&&this._trigger("onClose")}},reload:function(e){var i=this.options,o=this.element,s=this;if(!o.data("loading")){if(o.data("loading",!0),e=e||i.url,!e)return void o.data("loading",!1);i.url=e,this._showLoadingMessage(),t.ajax(e,{cache:!1,success:function(t,e,n){o.html(i.preProcess?i.preProcess.call(o[0],t,e):t),o.data("loading",!1),s._hideLoadingMessage(),i.onSuccess&&s._trigger("onSuccess",null,t,e,n)},error:function(t,e,n){o.data("loading",!1),s._hideLoadingMessage(),i.onError&&s._trigger("onError",null,t,e,n)}})}},resize:function(e){var i,o,s=this.options;t.isPlainObject(e)?(i=e.width||null,o=e.height||null):(i=arguments[0],o=arguments[1]),s.width=i||s.width,s.height=o||s.height,this._resize(this.element.parent())},collapse:function(){var t=this,e=this.element,i=e.prev(),s=e.parent(),n=e.next(".om-panel-loadingMessage"),a=this.options,r=o.anim,l=o.speed;if(void 0!=arguments[0]&&(r=arguments[0]),l=arguments[1]||l,!a.onBeforeCollapse||t._trigger("onBeforeCollapse")!==!1){if(s.stop(!0,!0),0!==i.length){var d=i.find("> .om-panel-tool > div.om-panel-tool-collapse");0!==d.length&&(d.removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand"),d.hasClass("om-panel-tool-collapse-hover")&&d.toggleClass("om-panel-tool-collapse-hover om-panel-tool-expand-hover"))}s.animate({height:"-="+e.outerHeight()},r?l||"normal":0,function(){e.hide(),n.hide(),"auto"===a.height&&s.css("height",""),a.onCollapse&&t._trigger("onCollapse")}),a.collapsed=!0}},expand:function(){var t=this,e=this.element,i=e.prev(),s=e.parent(),n=e.next(".om-panel-loadingMessage"),a=this.options,r=o.anim,l=o.speed;if(void 0!=arguments[0]&&(r=arguments[0]),l=arguments[1]||l,!a.onBeforeExpand||t._trigger("onBeforeExpand")!==!1){if(s.stop(!0,!0),0!==i.length){var d=i.find("> .om-panel-tool > div.om-panel-tool-expand");0!==d.length&&(d.removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse"),d.hasClass("om-panel-tool-expand-hover")&&d.toggleClass("om-panel-tool-expand-hover om-panel-tool-collapse-hover"))}"auto"===a.height&&s.height(i.outerHeight()),e.show(),e.data("loading")&&n.show(),s.animate({height:"+="+e.outerHeight()},r?l||"normal":0,function(){"auto"===a.height&&s.css("height",""),a.onExpand&&t._trigger("onExpand")}),a.collapsed=!1}},destroy:function(){var t=this.element;t.parent().after(t).remove()}})}(jQuery),function(t){t.omWidget("om.omButton",{options:{disabled:null,label:null,icons:{left:null,right:null},width:null,onClick:null},_create:function(){this._initElemType();var e=t("<span>").addClass("om-btn om-state-default").css("border","none"),i=t("<span>").addClass("om-btn-bg om-btn-left"),o=t("<span>").addClass("om-btn-bg om-btn-center"),s=t("<span>").addClass("om-btn-bg om-btn-right");this.element.hasClass("apusic-btn-deepblue")&&e.addClass("apusic-btn-deepblue"),this.element.addClass("om-btn-txt").css({"background-position":"left center","background-repeat":"no-repeat"}).wrap(e).before(i).after(s).wrap(o)},_init:function(){var e=this,i=this.options,o=this.element;"boolean"!=typeof i.disabled&&(i.disabled=o.propAttr("disabled")),("disabled"==o.attr("disabled")||"disabled"==i.disabled)&&(i.disabled=!0),this._initButton(),i.disabled&&(e._addClass("disabled"),o.css("cursor","default"));var s=o.parent().parent();s.bind("mouseenter",function(t){return i.disabled?!1:void e._addClass("hover")}).bind("mouseleave",function(t){return i.disabled?!1:(e._removeClass("hover"),void e._removeClass("active"))}).bind("click",function(t){return i.disabled?(t.preventDefault(),t.stopImmediatePropagation(),!1):void(e.options.onClick&&e._trigger("onClick",t))}).bind("mousedown",function(t){return i.disabled?!1:(e._addClass("active"),void e._removeClass("focus"))}).bind("mouseup",function(t){return i.disabled?!1:(e._removeClass("focus"),void e._removeClass("active"))}).bind("keydown",function(o){if(i.disabled)return!1;if((o.keyCode==t.om.keyCode.SPACE||o.keyCode==t.om.keyCode.ENTER)&&e._addClass("active"),o.keyCode==t.om.keyCode.SPACE){var s=i.onClick;if(s&&e._trigger("onClick",o)===!1)return}}).bind("keyup",function(){e._removeClass("active")}),o.bind("focus.button",function(t){
return i.disabled?!1:void e._addClass("focus")}).bind("blur.button",function(t){return i.disabled?!1:void e._removeClass("focus")}),o.next().bind("click",function(t){o.is("input")&&"submit"==o.attr("type")&&o.submit()})},enable:function(){this._removeClass("disabled"),this.options.disabled=!1,this.element.css("cursor","pointer").removeAttr("disabled")},disable:function(){this._addClass("disabled"),this.options.disabled=!0,this.element.css("cursor","default"),("input"==this.type||"button"==this.type)&&this.element.attr("disabled","disabled")},click:function(){!this.options.disabled&&this.options.onClick&&this._trigger("onClick")},changeLabel:function(t){"a"==this.type?this.element.text(t):"input"==this.type?this.element.val(t):"button"==this.type&&this.element.html(t)},changeIcons:function(t){this.options.disabled||t&&(t.left?this.element.css("backgroundImage","url( "+t.left+" )"):null,t.right?this.element.next().attr("src",t.right):null)},destroy:function(){$el=this.element,$el.closest(".om-btn").after($el).remove()},_addClass:function(t){this.element.parent().parent().addClass("om-state-"+t)},_removeClass:function(t){this.element.parent().parent().removeClass("om-state-"+t)},_initButton:function(){var e=this.options,i=this._getLabel(),o=this.element;o.removeClass("om-btn-icon om-btn-only-icon").next("img").remove(),e.width>10&&o.css("width",parseInt(e.width)-10),"a"==this.type||"button"==this.type?o.html(i):o.val(i),e.icons.left&&(i?o.addClass("om-btn-icon").css("background-image","url("+e.icons.left+")"):o.addClass("om-btn-only-icon").css("background-image","url("+e.icons.left+")")),e.icons.right&&(""!=i?t("<img>").attr("src",e.icons.right).css({"vertical-align":"baseline","padding-left":"3px"}).insertAfter(o):t("<img>").attr("src",e.icons.right).css("vertical-align","baseline").insertAfter(o))},_getLabel:function(){return this.options.label||this.element.html()||this.element.text()||this.element.val()},_initElemType:function(){this.element.is("input")?this.type="input":this.element.is("a")?this.type="a":this.element.is("button")&&(this.type="button")}})}(jQuery),function(t){t.omWidget("om.omGrid",{options:{height:462,width:"100%",colModel:!1,autoFit:!1,showIndex:!0,dataSource:!1,extraData:{},method:"GET",preProcess:!1,limit:15,showPagination:!0,rowClasses:["oddRow","evenRow"],singleSelect:!0,title:"",onRowSelect:function(t,e,i){},onRowDeselect:function(t,e,i){},onRowClick:function(t,e,i){},onRowDblClick:function(t,e,i){},onPageChange:function(t,e,i){},onSuccess:function(t,e,i,o){},onError:function(t,e,i,o){},onRefresh:function(t,e,i){},_onRefreshCallbacks:[],_onResizableStopCallbacks:[],_onResizableCallbacks:[],_onResizeCallbacks:[]},_create:function(){var e=this.options,i=this.element.show().attr({cellPadding:0,cellSpacing:0,border:0}).empty().append("<tbody></tbody>");if(i.wrap('<div class="om-grid om-widget om-widget-content"><div class="bDiv" style="width:auto"></div></div>').closest(".om-grid"),t.isArray(this._getColModel())){this.hDiv=t('<div class="hDiv om-state-default"></div>').append('<div class="hDivBox"><table cellPadding="0" cellSpacing="0"></table></div>'),i.parent().before(this.hDiv),this.pDiv=t('<div class="pDiv om-state-default"></div>'),i.parent().after(this.pDiv);var o=i.closest(".om-grid");this.loadMask=t('<div class="gBlock"><div align="center" class="gBlock-valignMiddle" ><div class="loadingImg" style="display:block"/></div></div>').mousedown(function(t){return!1}).hide(),o.append(this.loadMask),this.titleDiv=t("<div class='titleDiv'></div>"),o.prepend(this.titleDiv),this.tbody=this.element.children().eq(0),this._guid=0,e._onRefreshCallbacks.push(function(){this._refreshHeaderCheckBox()}),this._bindScrollEnvent()}},_init:function(){var e=this,i=this.element,o=this.options,s=i.closest(".om-grid");this._measure(s,o),t.isArray(this._getColModel())&&(this._extraData={},this.tbody.empty(),t("table",this.hDiv).empty(),this.pDiv.empty(),this.titleDiv.empty(),this._buildTableHead(),this._buildPagingToolBar(),this._buildLoadMask(),this._bindSelectAndClickEnvent(),this._makeColsResizable(),this._buildTitle(),this._resetHeight(),this.pageData={nowPage:1,totalPages:1},this._populate(),t(window).bind("resize",function(){e.resize({width:"fit",height:"auto"})}))},resize:function(e){var i=this,o=this.options,s=this.element.closest(".om-grid");e=e||{},o.width=e.width||arguments[0]||o.width,o.height=e.height||arguments[1]||o.height,this._measure(s,o),this._buildLoadMask(),this._resetWidth(),this._resetHeight(),t.each(o._onResizeCallbacks,function(t,e){e.call(i)})},_measure:function(t,e){t.outerWidth("fit"===e.width?t.parent().width():e.width),t.outerHeight("fit"===e.height?t.parent().height():e.height)},_resetHeight:function(){var t=this.element,e=t.closest(".om-grid");e.children(".bDiv").height("auto")},_resetWidth:function(){var e=this._getColModel(),i=-1,o=t("thead",this.hDiv),s=0;t.each(e,function(t,e){var n=e.width||60;"autoExpand"==e.width&&(n=0,i=t),o.find("th[axis='col"+t+"'] >div").width(n),s+=n}),this._fixHeaderWidth(i,s);var n={};t(this._getHeaderCols()).each(function(){n[t(this).attr("abbr")]=t("div",t(this)).width()}),this.tbody.find("td[abbr]").each(function(e,i){var o=t(i).prop("abbr");null!=n[o]&&t(i).find(">div:first").width(n[o])})},_getColModel:function(){return this.options.colModel},_buildTitle:function(){var t=this.titleDiv;this.options.title?t.html("<div class='titleContent'>"+this.options.title+"</div>").show():t.empty().hide()},_fixHeaderWidth:function(e,i){var o=this.element.closest(".om-grid"),s=t("thead",this.hDiv),n=this._getColModel(),a=this.options;if(-1!=e){var r=o.width()-32,l=s.find('th[axis="col'+e+'"] div');l.parent().hide();var d=r-s.width();l.parent().show(),0>=d?l.css("width",60):l.css("width",d)}else if(a.autoFit){var r=o.width()-22,d=r-s.width(),h=1+d/i,c=s.find('th[axis^="col"] >div');t.each(n,function(t){var e=c.eq(t);e.width(parseInt(e.width()*h))})}},_buildTableHead:function(){var e=this.options,i=this.element,o=(i.closest(".om-grid"),this._getColModel()),s=0,n=0,a=0,r=-1;if(thead=t("<thead></thead>"),tr=t("<tr></tr>").appendTo(thead),e.showIndex){var l=t("<th></th>").attr({axis:"indexCol",align:"center"}).addClass("indexCol").append(t('<div class="indexheader" style="text-align:center;width:25px;"></div>'));tr.append(l),n=25}if(!e.singleSelect){var l=t("<th></th>").attr({axis:"checkboxCol",align:"center"}).addClass("checkboxCol").append(t('<div class="checkboxheader" style="text-align:center;width:17px;"><span class="checkbox"/></div>'));tr.append(l),a=17}for(var d=0,h=o.length;h>d;d++){var c=o[d],u=c.width||60,m=c.align||"center";"autoExpand"==u&&(u=0,r=d);var p=t("<div></div>").html(c.header).css({"text-align":m,width:u});c.wrap&&p.addClass("wrap");var f=t("<th></th>").attr("axis","col"+d).addClass("col"+d).append(p);c.name&&f.attr("abbr",c.name),c.align&&f.attr("align",c.align),s+=u,tr.append(f)}i.prepend(thead),t("table",this.hDiv).append(thead),this._fixHeaderWidth(r,s),this.thead=thead,thead=null},_buildPagingToolBar:function(){var e=this.options;if(e.limit<=0)return this.pDiv.css("border-width",0).hide(),void(this.pager=this.pDiv);var i=this,o=this.element,s=this.pDiv;s.show().html('<div class="pDiv2"><div class="pGroup"><div class="pFirst pButton om-icon"><span class="om-icon-seek-start"></span></div><div class="pPrev pButton om-icon"><span class="om-icon-seek-prev"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pControl"></span></div><div class="btnseparator"></div><div class="pGroup"><div class="pNext pButton om-icon"><span class="om-icon-seek-next"></span></div><div class="pLast pButton om-icon"><span class="om-icon-seek-end"></span></div></div><div class="btnseparator"></div><div class="pGroup"><div class="pReload pButton om-icon"><span class="om-icon-refresh"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></span></div></div>');var n=t.om.lang._get(e,"omGrid","pageText").replace(/{totalPage}/,"<span>1</span>").replace(/{index}/,'<input type="text" size="4" value="1" />');t(".pControl",s).html(n),o.parent().after(s),t(".pReload",s).click(function(){i._populate()}),t(".pFirst",s).click(function(){i._changePage("first")}),t(".pPrev",s).click(function(){i._changePage("prev")}),t(".pNext",s).click(function(){i._changePage("next")}),t(".pLast",s).click(function(){i._changePage("last")}),t(".pControl input",s).keydown(function(e){e.keyCode==t.om.keyCode.ENTER&&i._changePage("input")}),t(".pButton",s).hover(function(){t(this).addClass("om-state-hover")},function(){t(this).removeClass("om-state-hover")}),this.pager=s},_buildLoadMask:function(){this.element.closest(".om-grid");this.loadMask.css({width:"100%",height:"100%"})},_changePage:function(e){if(this.loading)return!0;var i=this.element,o=this.pageData,s=o.nowPage,n=o.totalPages,a=s;switch(this._oldPage=s,e){case"first":a=1;break;case"prev":s>1&&(a=s-1);break;case"next":n>s&&(a=s+1);break;case"last":a=n;break;case"input":var r=parseInt(t(".pControl input",i.closest(".om-grid")).val());isNaN(r)&&(r=s),1>r?r=1:r>n&&(r=n),t(".pControl input",this.pDiv).val(r),a=r;break;default:if(/\d/.test(e)){var r=parseInt(e);isNaN(r)&&(r=1),1>r?r=1:r>n&&(r=n),t(".pControl input",i.closest(".om-grid")).val(r),a=r}}return a==s?!1:void(this._trigger("onPageChange",null,e,a)!==!1&&(o.nowPage=a,this._populate()))},_populate:function(){var e=this,i=this.element,o=i.closest(".om-grid"),s=this.options,n=t(".pPageStat",o);if(!s.dataSource)return t(".pPageStat",o).html(s.emptygMsg),!1;if(this.loading)return!0;var a=this.pageData,r=a.nowPage||1,l=t(".gBlock",o);this.loading=!0,n.html(t.om.lang._get(s,"omGrid","loadingMsg")),l.show();var d=s.limit<=0?1e8:s.limit,h=t.extend(!0,{},this._extraData,s.extraData,{start:d*(r-1),limit:d,_time_stamp_:(new Date).getTime()});t.ajax({type:s.method,url:s.dataSource,data:h,dataType:"json",success:function(t,i,o){"function"==typeof s.onSuccess&&e._trigger("onSuccess",null,t,i,o),e._addData(t);for(var n=0,a=s._onRefreshCallbacks.length;a>n;n++)s._onRefreshCallbacks[n].call(e);e._trigger("onRefresh",null,r,t.rows),l.hide(),e.loading=!1},error:function(i,o,a){n.html(t.om.lang._get(s,"omGrid","errorMsg")).css("color","red");try{var r=s.onError;"function"==typeof r&&r(i,o,a)}catch(d){}finally{return l.hide(),e.loading=!1,e.pageData.data={rows:[],total:0},!1}}})},_addData:function(t){var e=this.options,i=this.element,o=(i.closest(".om-grid"),e.preProcess),s=this.pageData;0===t.total&&(t.rows=[]),o&&(t=o(t)),s.data=t,s.totalPages=Math.ceil(t.total/e.limit),this._buildPager(),this._renderDatas()},_buildPager:function(){var e=this.options;if(!(e.limit<=0)){var i=this.pager,o=t(".pControl",i),s=this.pageData,n=s.nowPage,a=s.totalPages,r=s.data,l=e.limit*(n-1)+1,d=l-1+r.rows.length,h="";h=0===r.total?t.om.lang._get(e,"omGrid","emptyMsg"):t.om.lang._get(e,"omGrid","pageStat").replace(/{from}/,l).replace(/{to}/,d).replace(/{total}/,r.total),t("input",o).val(n),t("span",o).html(a),t(".pPageStat",i).html(h)}},_renderDatas:function(){var e,i,o=this,s=this.element,n=this.options,a=this._getHeaderCols(),r=this.pageData.data.rows||[],l=this._getColModel(),d=n.rowClasses,h=t("tbody",s).empty(),c="function"==typeof d,u=this.pageData,m=(u.nowPage-1)*n.limit,p="<td align='$' abbr='$' class='$'><div align='$' class='innerCol $' style='width:$px'>$</div></td>",f=[],g=[];this.pageData.data.rows||(this.pageData.data.rows=[]),o.hDiv.scrollLeft(0),t(a).each(function(e){f[e]=t("div",t(this)).width()}),t.each(r,function(s,n){var r=c?d(s,n):d[s%d.length],h=o._buildRowCellValues(l,n,s);g.push("<tr _grid_row_id="+o._guid++ +" class='om-grid-row "+r+"'>"),t(a).each(function(o){var n,a=t(this).attr("axis"),r=!1;if("indexCol"==a)n=s+m+1;else if("checkboxCol"==a)n='<span class="checkbox"/>';else if("col"==a.substring(0,3)){var d=a.substring(3);n=h[d],l[d].wrap&&(r=!0)}else n="";e=[this.align,this.abbr,a,this.align,r?"wrap":"",f[o],n],i=0,g.push(p.replace(/\$/g,function(){return e[i++]}))}),g.push("</tr>")}),h.html(g.join(" "))},_getHeaderCols:function(){return this.hDiv.find("th[axis]")},_buildRowCellValues:function(t,e,i){for(var o=t.length,s=[],n=0;o>n;n++){var a,r=t[n],l=r.renderer;if(r.name.indexOf(".")>0)for(var d=r.name.split("."),h=1,c=d.length,a=e[d[0]];c>h&&a&&void 0!=(a=a[d[h++]]););void 0==a&&(a=void 0==e[r.name]?"":e[r.name]),"function"==typeof l&&(a=l(a,e,i)),s[n]=a,a=null}return s},_bindScrollEnvent:function(){this.tbody.closest(".bDiv").scroll(function(){self.hDiv.scrollLeft(t(this).scrollLeft())})},_bindSelectAndClickEnvent:function(){var e=this;this.tbody.unbind(),this.options.singleSelect?(this.tbody.delegate("tr.om-grid-row","click",function(i){var o=t(this),s=e._getRowIndex(o);if(o.hasClass("om-state-highlight"));else{var n=e._getRowIndex(e.tbody.find("tr.om-state-highlight:not(:hidden)"));-1!=n&&e._rowDeSelect(n),e._rowSelect(s)}e._trigger("onRowClick",i,s,e._getRowData(s))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(t){var i=e._getRowIndex(this);e._trigger("onRowDblClick",t,i,e._getRowData(i))})):(t("th.checkboxCol span.checkbox",this.thead).click(function(){var i=t(this),o=e._getTrs().size();if(i.hasClass("selected")){i.removeClass("selected");for(var s=0;o>s;s++)e._rowDeSelect(s)}else{i.addClass("selected");for(var s=0;o>s;s++)e._rowSelect(s)}}),this.tbody.delegate("tr.om-grid-row","click",function(i){var o=t(this),s=e._getRowIndex(o);o.hasClass("om-state-highlight")?e._rowDeSelect(s):e._rowSelect(s),e._refreshHeaderCheckBox(),e._trigger("onRowClick",i,s,e._getRowData(s))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(i){var o=t(this),s=e._getRowIndex(o);o.hasClass("om-state-highlight")||(e._rowSelect(s),e._refreshHeaderCheckBox()),e._trigger("onRowDblClick",i,s,e._getRowData(s))}))},_getRowData:function(t){return this.pageData.data.rows[t]},_rowSelect:function(e){var i=this._getTrs().eq(e),o=t("td.checkboxCol span.checkbox",i);i.addClass("om-state-highlight"),o.addClass("selected"),this._trigger("onRowSelect",null,e,this._getRowData(e))},_rowDeSelect:function(e){var i=this._getTrs().eq(e),o=t("td.checkboxCol span.checkbox",i);i.removeClass("om-state-highlight"),o.removeClass("selected"),this._trigger("onRowDeselect",null,e,this._getRowData(e))},_refreshHeaderCheckBox:function(){var e=this.getSelections(),i=this._getTrs(),o=t("th.checkboxCol span.checkbox",this.thead),s=i.length;o.toggleClass("selected",s>0&&s==e.length)},_makeColsResizable:function(){var e=this,i=e.tbody.closest(".bDiv"),o=e.element.closest(".om-grid"),s=this.titleDiv,n=0;t('th[axis^="col"] div',e.thead).omResizable({handles:"e",containment:"document",minWidth:60,resize:function(n,a){for(var r=e.options._onResizableCallbacks,l=0,d=r.length;d>l;l++)r[l].call(e);{var h=t(this),c=h.parent().attr("abbr"),u=t('td[abbr="'+c+'"] > div',e.tbody),m=e.thead.closest(".hDiv"),p=t(".toolbarDiv",o);o.height()-(s.is(":hidden")?0:s.outerHeight(!0))-(p.length>0?p.outerHeight(!0):0)-m.outerHeight(!0)-(e.pDiv.is(":hidden")?0:e.pDiv.outerHeight(!0))}h.width(n.size.width).height(""),u.width(n.size.width).height(""),m.scrollLeft(i.scrollLeft())},start:function(e,i){n=t(this).parent().width()},stop:function(o,s){var a=e.options._onResizableStopCallbacks,r=t(this).parent(),l=e.thead.closest(".hDiv");n=r.width()-n;for(var d=0,h=a.length;h>d;d++)a[d].call(e,r,n);l.scrollLeft(i.scrollLeft())}})},_getRowIndex:function(t){return this._getTrs().index(t)},_getTrs:function(){return this.tbody.find("tr.om-grid-row:not([_delete]=true)")},setData:function(t,e){this.options.dataSource=t,this.options.extraData=e||{},this.pageData={nowPage:1,totalPages:1},this._populate()},getData:function(){return this.pageData.data},refresh:function(){if(this.loading)return!0;this.loading=!0;var e=this.options;t(".pPageStat",this.pager).html(t.om.lang._get(e,"omGrid","loadingMsg")),this.loadMask.show(),this._buildPager(),this._renderDatas(),this._trigger("onRefresh",null,this.pageData.nowPage||1,this.pageData.data.rows);for(var i=0,o=e._onRefreshCallbacks.length;o>i;i++)e._onRefreshCallbacks[i].call(this);this.loadMask.hide(),this.loading=!1},reload:function(t){return this.loading?!0:("undefined"!=typeof t&&(t=parseInt(t)||1,0>t&&(t=1),t>this.pageData.totalPages&&(t=this.pageData.totalPages),this.pageData.nowPage=t),void this._populate())},setSelections:function(e){var i=this;t.isArray(e)||(e=[e]);var o=this.getSelections();t(o).each(function(){i._rowDeSelect(this)}),t(e).each(function(){i._rowSelect(this)}),i._refreshHeaderCheckBox()},setSelectionsWithRecords:function(e){var i=(self.getData().rows,[]);t.each(rowData,function(t,o){1==e(o)&&i.push(t)}),this.setSelections(i)},getSelections:function(t){var e=this,i=e._getTrs(),o=i.filter(".om-state-highlight"),s=[];if(t){var n=e.getData().rows;o.each(function(t,e){s[s.length]=n[i.index(e)]})}else o.each(function(t,e){s[s.length]=i.index(e)});return s},destroy:function(){var t=this.element;t.closest(".om-grid").after(t).remove()}}),t.om.lang.omGrid={loadingMsg:"正在加载数据，请稍候...",emptyMsg:"没有数据",errorMsg:"取数出错",pageText:"第{index}页，共{totalPage}页",pageStat:"共{total}条数据，显示{from}-{to}条"}}(jQuery),function(t){function e(t,e){for(var i=t._getColModel(),o=0,s=i.length;s>o;o++)if(i[o].name==e.name)return o}function i(t,e,i){var o=0;t.push(i.replace(/\$/g,function(){return e[o++]}))}function o(t){t._colModel=[];for(var e,i,o,n=t._getColModel(),a=[],r=[],l=1,d=1,h=n.length,c=0;h>c;c++)a[c]=[];for(var c=0,u=h;u>c;c++){e=n[c];for(var m=0,p=e.length;p>m;m++)i=e[m],l=i.rowspan||1,d=i.colspan||1,o=s(a,c,l,d),i.name&&r.push({header:i,colIndex:o})}for(r.sort(function(t,e){return t.colIndex-e.colIndex}),c=0;r[c]&&t._colModel.push(r[c++].header););}function s(t,e,i,o){for(var s=0;t[e][s]&&++s;);for(var n=e;e+i>n;n++)for(var a=s;s+o>a;a++)t[n][a]=!0;return s}t.omWidget.addBeforeInitListener("om.omGrid",function(){var s=this._getColModel();!t.isArray(s)||s.length<=0||!t.isArray(s[0])||(o(this),this.hDiv.addClass("hDiv-group-header"),t.extend(this,{_getColModel:function(){return this._colModel},_getHeaderCols:function(){var e=[],i=this.options,o=this.hDiv,s=o.find("th[axis^='col']");return t(s).each(function(){e.push(this)}),e.sort(function(t,e){return t.axis.slice(3)-e.axis.slice(3)}),!i.singleSelect&&e.unshift(o.find("th[axis='checkboxCol']")[0]),i.showIndex&&e.unshift(o.find("th[axis='indexCol']")[0]),i.rowDetailsProvider&&e.unshift(o.find("th[axis='expenderCol']")[0]),t(e)},_buildTableHead:function(){for(var o,s,n,a,r=this.options,l=r.colModel,d=0,h=-1,c="<th class='$' $ $ $ $ $><div class='$' style='text-align:$; $'>$</div></th>",u=["<thead>"],m=0,p=l.length;p>m;m++){u.push("<tr>"),0==m&&(r.showIndex&&u.push("<th class='indexCol data-header-"+p+"' align='center' axis='indexCol' rowspan="+p+"><div class='indexheader' style='text-align:center;width:25px;' /></th>"),r.singleSelect||u.push("<th class='checkboxCol data-header-"+p+"' align='center' axis='checkboxCol' rowspan="+p+"><div class='checkboxheader' style='text-align:center;width:17px;'><span class='checkbox'/></div></th>")),n=l[m];for(var f=0,g=n.length;g>f;f++){s=n[f];var v=s.width||60,b=s.align||"center",_=s.name;s.name&&"autoExpand"==v&&(v=0,h=e(this,s));var w=s.wrap?"wrap":"";w+=(s.name?" data-header-":" group-header-")+(s.rowspan?s.rowspan:1),o=[w,s.align?"align="+s.align:"",_?"axis=col"+e(this,s):"",_?"abbr="+_:"",s.rowspan?"rowspan="+s.rowspan:"",s.colspan?"colspan="+s.colspan:"",s.wrap?"wrap":"",b,_?"width:"+v+"px":"",s.header],i(u,o,c),s.name&&(d+=v)}u.push("</tr>")}u.push("</thead>"),t("table",this.hDiv).html(u.join("")),a=t("thead",this.hDiv),this._fixHeaderWidth(h,d),this.thead=a,a=null}}))})}(jQuery),function(t){function e(e){var i,o,s,n,r,l=t(this),d=e.element,c=e._getColModel(),u=e.options;if(a(e)&&(e._allEditMode||l.attr("_insert"))&&!(e._triggered&&e._editView.editing&&g(l)==e._editView.rowId||e._rowAdding)){var m=e._getTrs().index(l),p=e._getRowData(m);u.onBeforeEdit&&u.onBeforeEdit.call(e,m,p)===!1||(h(e,l),i=e._editView.editRow,o=i.find(">.grid-edit-form"),s=d.parent().scrollLeft(),e._getHeaderCols().each(function(a){var h,u,m=t(this).attr("axis"),f=l.find("td:eq("+a+")");if("col"!=m.substring(0,3))return void(t.isEmptyObject(e._editComps)&&i.css("padding-left",parseInt(i.css("padding-left"))+f.outerWidth()));var g=m.substring(3);h=c[g];var v=h.editor;if(e._triggered)u=h.editor.name||h.name;else{if(!v||v&&(v.editable===!1||t.isFunction(v.editable)&&v.editable()===!1)){var _=v&&v.renderer;h.editor=v={},v.type="text",_&&(v.renderer=_,v.type="custom"),v.editable=!1}else v.type=v.type||"text",v.editable=!0,v.rules&&(e._validate=!0);u=h.editor.name||h.name,v.options=v.options||{},e._editComps[u]={}}n=e._editComps[u],r=void 0==(r=b(e,l,h))?"":r,!e._triggered&&v.editable&&v.rules&&(e._errorHolders[u]=t("<div class='errorContainer' style='display:none'></div>").appendTo(d.parent()));var w,y=n.instance,x=v.type;if(!y){if(w=t("<div style='position:absolute'></div>").css({left:f.position().left+s,top:3}).appendTo(o).addClass("grid-edit-wrapper"),y=n.instance=t("<input></input>").attr({name:u,id:u}).appendTo(w),"text"!=x&&"custom"!=x&&y[x](v.options),"omCalendar"==x||"omCombo"==x){var C=y.parent();"omCalendar"==x?(y.val(r).width(f.outerWidth()-24),y.width(f.outerWidth(!0)-(C.outerWidth(!0)-y.width()))):(y.next("input").attr({id:y.prop("id"),name:y.prop("name")}),y.attr({id:"",name:""}),y.next("input").width(f.outerWidth(!0)-(C.outerWidth(!0)-y.next("input").width())))}else"text"==x&&(y.addClass("grid-edit-text"),v.editable||y.attr("readonly","readonly").addClass("readonly-text")),"custom"==x&&(y=n.instance=w.html(v.renderer.call(e,r,p))),y.width(f.outerWidth(!0)-(y.outerWidth(!0)-y.width()));if(n.model=h,n.type=x,n.id=h.name,"custom"!=x){var D="omCombo"==x?y.next():y;D.blur(function(t){var i=e._errorHolders[u];i&&i.hide()})}}switch(x){case"omCalendar":y=y.val(r).omCalendar();break;case"omNumberField":y.val(r).trigger("blur");break;case"omCombo":y.omCombo("value",r);break;case"text":y.val(r);break;case"custom":y.html(v.renderer.call(e,r,p))}}),!e._triggered&&e._validate&&w(e),e._validator&&e._validator.form(),e._triggered=!0)}}function i(t){t._changeData={update:{},insert:{},"delete":{}}}function o(t){return!a(t)||!d(t)}function s(t){var e=t.element,i=e.parent(),o=t._editView,s=o.editBtn,n=o.editRow,a={};return a.top=n.height(),a.left=e.width()<i.width()?e.width()/2-s.width()/2:i.scrollLeft()+i.width()/2-s.width()/2,a}function n(){a(this)&&(i(this),r(this),this._triggered&&(l(this),this._editView.view.hide(),this._editView.editing=!1,this.hDiv.scrollLeft(0),this.element.parent().scrollLeft(0)))}function a(t){return!t._allEditMode||t._globalEditable}function r(t){var e=t.getData().rows;t._rowIdDataMap={},t._getTrs().each(function(i,o){t._rowIdDataMap[g(o)]=e[i]})}function l(e){e._validator&&(e._validator.resetForm(),t.each(e._errorHolders,function(t,e){e.empty().hide()}))}function d(e){var i=e._changeData;return!(t.isEmptyObject(i.update)&&t.isEmptyObject(i.insert)&&t.isEmptyObject(i["delete"]))}function h(e,i){var o=e.element,n=o.next(".grid-edit-view"),a=t(i).position(),r=o.parent().scrollTop(),l=e.options;if(0==n.length){n=t("<div class='grid-edit-view'><div class='body-wrapper'><div class='grid-edit-row'><form class='grid-edit-form'></form></div><div class='gird-edit-btn'><input type='button' class='ok' value='确定'/><input type='button' class='cancel' value='取消'/></div></div></div>").width(o.outerWidth()).insertAfter(o);var d,h=n.find(".gird-edit-btn"),c=h.prev(".grid-edit-row");e._editView={view:n,editRow:c,editBtn:h},d=s(e),h.css({left:d.left,top:d.top});var m=h.find("input.ok").omButton(),f=h.find("input.cancel").omButton();m.click(function(){if(!e._validator||e._validator.form()){var t=o.find("tr[_grid_row_id='"+e._editView.rowId+"']");p(e,t),n.hide(),e._editView.editing=!1,m.blur(),e._rowAdding&&(e._refreshHeaderCheckBox(),e._rowAdding=!1);var i=e._getTrs().index(t);l.onAfterEdit&&l.onAfterEdit.call(e,i,e._getRowData(i))}}),f.click(function(){e.cancelEdit(this)})}e._editView.rowId=g(i),e._editView.editing?n.animate({top:a.top+r},"fast"):(n.css({top:a.top+r}),e._editView.editing=!0,n.show(),e._colWidthResize&&(u(e),e._colWidthResize=!1))}function c(){if(a(this)&&this._triggered)if(this._editView.editing){this.element.parent().scrollLeft(0);var t=this;setTimeout(function(){u(t)},0)}else this._colWidthResize=!0}function u(e,i,o){var n=e.element,a=e._editView,r=a.view,l=n.parent().scrollLeft(),d=a.editBtn,h=!1;r.width(n.outerWidth()),e._getHeaderCols().each(function(s,n){var a=t(n).attr("abbr"),r=t(n),d=i&&i.prop("abbr")===r.prop("abbr");d&&(h=!0),(!i||h)&&t.each(e._editComps,function(t,e){var s=e.instance,n=e.type;if(a==e.id){if(!d&&i)return s.closest("div.grid-edit-wrapper").css("left","+="+o),!1;if(d||s.closest("div.grid-edit-wrapper").width(r.outerWidth()).css("left",r.position().left+l),"omCalendar"==n||"omCombo"==n){var h=s.parent();"omCalendar"==n?(s.width(r.outerWidth()-24),s.width(r.outerWidth(!0)-(h.outerWidth(!0)-s.width()))):s.next("input").width(r.outerWidth(!0)-(h.outerWidth(!0)-s.next("input").width()))}else s.width(r.outerWidth(!0)-(s.outerWidth(!0)-s.width()))}})});var c=s(e);i?d.animate({left:c.left,top:c.top},"fast"):d.css({left:c.left,top:c.top})}function m(t,e){return a(this)&&this._triggered&&this._editView.editing?void u(this,t,e):void(this._colWidthResize=!0)}function p(e,i){var o=t(i),s=e._editComps,n=g(o),a=e._getTrs().index(o),r=e._getRowData(a);t.each(s,function(s,l){var d,h,c,u=l.model.name,m=v(e,o,l);o.attr("_insert")?e._changeData.insert[n][u]=m:(d=_(e,i)[u],c=e._changeData.update[n],String(m)===String(d)?(f(o,l.model,!1),c&&delete c[u],t.isEmptyObject(c)&&delete e._changeData.update[n]):(f(o,l.model,!0),c=e._changeData.update[n]=c||{},c[u]=m)),h=l.model.renderer?l.model.renderer(m,r,a):void 0==m?"":m,o.find("td[abbr='"+u+"'] >div")[0].innerHTML=h})}function f(t,e,i){t.find("td[abbr='"+e.name+"']").toggleClass("grid-cell-dirty",i)}function g(e){return t(e).attr("_grid_row_id")}function v(t,e,i){var o,s=_(t,e),n=i.instance;switch(i.type){case"omCalendar":o=n.val();case"omNumberField":o=n.val();break;case"omCombo":o=n.omCombo("value");break;case"text":o=n.val();break;case"custom":if(i.model.editor.getValue)return i.model.editor.getValue.call(n,s,i.model.name)}return o}function b(t,e,i){var o,s=i.name;if(e.attr("_insert"))o=_(t,e)[s];else{var n=t._changeData.update[g(e)];o=n&&null!=n[s]?n[s]:_(t,e)[s]}return o}function _(e,i){var o=g(i);return t(i).attr("_insert")?e._changeData.insert[o]:e._rowIdDataMap[o]}function w(e){var i=e._editView.editRow.find(">.grid-edit-form"),o={},s=o.rules={},n=o.messages={},a=e._getColModel();t.each(a,function(e,i){var o=i.editor.rules;if(o){var a=s[i.editor.name||i.name]={},r=n[i.editor.name||i.name]={};if(o.length>0&&!t.isArray(o[0])){var l=[];l.push(o),o=l}for(var d=0,h=o.length;h>d;d++){var c=o[d][0];a[c]=void 0==o[d][1]?!0:o[d][1],o[d][2]&&(r[c]=o[d][2])}}}),t.extend(o,{onkeyup:function(t){this.element(t)},errorPlacement:function(t,e){},showErrors:function(i,o){o&&o.length>0?t.each(o,function(i,o){var s=t(o.element),n=s.attr("name"),a=e._errorHolders[n];a&&(s.is(":focus")&&a.show(),a.html(o.message),y(e,s,a))}):t.each(this.currentElements,function(i,o){var s=e._errorHolders[t(o).attr("name")];s&&s.empty().hide()});var s=e._editView.editBtn.find("input.ok"),n=!0;t.each(e._errorHolders,function(t,e){return e.is(":empty")?void 0:n=!1}),s.omButton(n?"enable":"disable"),this.defaultShowErrors()}}),e._validator=i.validate(o),t.each(e._editComps,function(i,o){var s=o.model.editor;if(s.editable&&s.rules){var n=s.name||o.model.name,a=e._errorHolders[n],r="omCombo"==o.type?o.instance.next("input"):o.instance;r.mouseover(function(){if(a&&!a.is(":empty")){var i=t(this);a.show(),y(e,i,a)}}).mouseout(function(){a&&a.hide()})}})}function y(t,e,i){var o=e.offset(),s=t.element.offset(),n=t.element.parent(),a=e.closest(".grid-edit-wrapper"),r=o.top-s.top+a.outerHeight();i.css(o.left-s.left-n.scrollLeft()+a.outerWidth()+i.outerWidth()>n.width()?{left:o.left-s.left-i.outerWidth(),top:r}:{left:o.left-s.left+a.outerWidth(),top:r})}var x=Object.prototype.hasOwnProperty;t.omWidget.addInitListener("om.omGrid",function(){var r=this,h=r.element,u=r.options,p=this._getColModel();r._triggered=!1,r._globalEditable=!1,u.editMode=u.editMode||"all",r._allEditMode="all"==u.editMode;for(var f=0,v=p.length;v>f&&(r._globalEditable=p[f].editor?!0:!1,!r._globalEditable);f++);if(a(r)){r._editComps={},r._errorHolders={},r._colWidthResize,u._onRefreshCallbacks.push(n),u._onResizableStopCallbacks.push(m),u._onResizeCallbacks.push(c),this.tbody.delegate("tr.om-grid-row","dblclick",function(t){e.call(this,r)}),this.tbody.delegate("tr.om-grid-row","click",function(t){r._triggered&&r._editView.editing&&(r._validator?r._validator.valid()&&e.call(this,r):e.call(this,r))});var b=null;h.parent().scroll(function(){r._triggered&&(b&&clearTimeout(b),b=setTimeout(function(){var t=s(r);r._editView.editBtn.animate({left:t.left,top:t.top},r._editView.editing?"fast":0),b=null},300))}),t.extend(this,{cancelEdit:function(e){var i=this._editView,o=this.options;a(this)&&this._triggered&&(!this._triggered||i.editing)&&(i.view.hide(),i.editing=!1,this._rowAdding&&(this.deleteRow(this._getTrs().index(this.tbody.find("tr[_grid_row_id='"+r._editView.rowId+"']"))),this._rowAdding=!1),l(this),e&&t(e).blur(),o.onCancelEdit&&o.onCancelEdit.call(this))},cancelChanges:function(){this.cancelEdit(),o(this)||(i(this),l(this),this.refresh())},editRow:function(t){a(this)&&e.call(this._getTrs().eq(t)[0],this)},deleteRow:function(e){if(!(!a(this)||this._triggered&&this._editView.editing)){var i=this._getTrs(),o=this;t.isArray(e)||(e=[e]),e.sort(function(t,e){return e-t}),t(e).each(function(t,e){var s=i.eq(e),n=s.next(),a=g(s);s.attr("_insert")?(delete o._changeData.insert[a],s.remove(),n.hasClass("rowExpand-rowDetails")&&n.remove()):(o._changeData["delete"][a]=o._rowIdDataMap[a],s.attr("_delete","true").hide(),n.hasClass("rowExpand-rowDetails")&&n.hide())}),this._refreshHeaderCheckBox()}},getChanges:function(e){var i={update:[],insert:[],"delete":[]},o=e?e:"update",s=this._changeData;if("update"===o){var n=s[o];for(var a in n)x.call(n,a)&&i[o].push(t.extend(!0,{},this._rowIdDataMap[a],n[a]));o=e?e:"insert"}if("insert"===o){var r=s[o];for(var a in r)x.call(r,a)&&i[o].push(r[a]);o=e?e:"delete"}if("delete"===o){var l=s[o];for(var a in l)x.call(l,a)&&i[o].push(l[a])}return e?i[e]:i},insertRow:function(e,i,o){var s=this.options,n=this._getColModel(),r=this.element;if(a(this)&&!this._rowAdding){t.isPlainObject(e)&&(i=e,e=0),e===!0&&(i={},e=0,o=!0);var l=this._getTrs(),d={};e="begin"==e||void 0==e?0:"end"==e?l.length:e;for(var h=0,c=n.length;c>h;h++)d[n[h].name]="";this._changeData.insert[this._guid]=t.extend(!0,d,i);var u=this._buildRowCellValues(n,d,e),m=[],p=s.rowClasses;isRowClassesFn="function"==typeof p,rowCls=isRowClassesFn?p(e,d):p[e%p.length],tdTmp="<td align='$' abbr='$' class='grid-cell-dirty $'><div align='$' class='$' style='width:$px'>$</div></td>",m.push("<tr class='om-grid-row "+rowCls+"' _grid_row_id="+this._guid++ +" _insert='true'>"),this._getHeaderCols().each(function(e){var i,o,s,a=t(this).attr("axis"),r=!1;if("indexCol"==a)i="<a class='om-icon'>新行</a>";else if("checkboxCol"==a)i='<span class="checkbox"/>';else if("col"==a.substring(0,3)){var l=a.substring(3);i=u[l],n[l].wrap&&(r=!0)}else i="";o=[this.align,this.abbr,a,this.align,r?"wrap":"",t("div",t(this)).width(),i],s=0,m.push(tdTmp.replace(/\$/g,function(){return o[s++]}))}),m.push("</tr>");var f,g,v=t(m.join(" "));0==e?v.prependTo(r.find(">tbody")):(f=l.eq(e-1),g=f.next(),f=g.hasClass("rowExpand-rowDetails")?g:f,f.after(v)),o||(this.editRow(e),this._rowAdding=!0)}},saveChanges:function(){if(this.cancelEdit(),!o(this)){var e=this._changeData.update,s=this.element.find("tr.om-grid-row"),n=[];for(var a in e)x.call(e,a)&&t.extend(!0,this._rowIdDataMap[a],e[a]);var r=this;s.each(function(e,i){var o=t(i);o.attr("_delete")?o.remove():n.push(_(r,i))}),this.pageData.data.rows=n,i(this),l(this),this.refresh()}},onBeforeEdit:function(t,e){},
onAfterEdit:function(t,e){},onCancelEdit:function(){},getData:function(){var t=this.pageData.data,e=this._getTrs(),i=this;return a(this)&&d(this)&&(t={total:t.total},t.rows=[],e.each(function(e,o){t.rows.push(i._getRowData(e))})),t},_getRowData:function(e){var i,s=this._getTrs().eq(e),n=g(s);if(o(this))return this.pageData.data.rows[e];if(s.attr("_insert"))i=this._changeData.insert[n];else{var a=this._rowIdDataMap[n],r=this._changeData.update;i=a,r[n]&&(i=t.extend(!0,{},a,r[n]))}return i}})}})}(jQuery),function(t){function e(){var e=this.element,i=e.find("tr.rowExpand-rowDetails");if(0!=i.length){var o=this.hDiv.find("table"),s=o.width()-o.find("th.expenderCol").outerWidth()-parseInt(i.find("> td").css("border-right-width"));i.each(function(){t(this).find(".rowExpand-rowDetails-content").outerWidth(s)})}}t.omWidget.addInitListener("om.omGrid",function(){var i=this,o=this.options,s=o.rowDetailsProvider,n=o.colModel,a=this.thead;if(s&&n.length>0){o._onResizableCallbacks.push(e),o._onResizableStopCallbacks.push(e),a.find("th:first").before('<th align="center" axis="expenderCol" class="expenderCol" rowspan='+(t.isArray(n[0])?n.length:1)+'><div style="text-align: center; width: 14px;"></div></th>');var r=-1,l=0;n=this._getColModel(),t(n).each(function(t){"autoExpand"==n[t].width?r=t:l+=n[t].width});var d=a.find('th[axis="expenderCol"]').width();if(-1!=r)a.find('th[axis="col'+r+'"] >div').css("width","-="+d);else if(o.autoFit){var h=d/l;a.find('th[axis^="col"] >div').each(function(e){t(this).css("width","-="+parseInt(n[e].width*h))})}var c=this._getHeaderCols().size();this.tbody.delegate("td.expenderCol >div","click",function(o){var n=t(this),a=n.closest("tr"),r=a.next("tr");if(r.hasClass("rowExpand-rowDetails"))r.toggle();else{var l=i._getTrs().index(a);rowData=i._getRowData(l),rowDetails=s?s(rowData,l):"&#160;",a.after('<tr class="rowExpand-rowDetails"><td colspan="'+(c-1)+'"><div class="rowExpand-rowDetails-content">'+rowDetails+"</div></td></tr>")}return n.toggleClass("rowExpand-expanded").parent().attr("rowspan",n.hasClass("rowExpand-expanded")?2:1),e.call(i),!1})}})}(jQuery),function(t){function e(e,i){var o=e._oldPage,s=e.pageData.nowPage;return"input"===i?o!=t(".pControl input",e.element.closest(".om-grid")).val():"reload"===i?!0:o!=s}var i=[{cls:"pFirst",type:"first"},{cls:"pPrev",type:"prev"},{cls:"pNext",type:"next"},{cls:"pLast",type:"last"},{cls:"pReload",type:"reload"}];t.omWidget.addInitListener("om.omGrid",function(){var o=this,s=this._getColModel(),n=this._getHeaderCols().filter("[axis^='col']"),a=this.pDiv;t(n).each(function(e){var i=s[e].sort;if(i){var a=t(this).click(function(){var t=s[e].name,r=a.hasClass("asc")?"asc":a.hasClass("desc")?"desc":null,l="asc"==r?"desc":"asc";n.removeClass("asc desc"),a.addClass(l);var d=o._extraData;switch(delete d.sortBy,delete d.sortDir,i){case"serverSide":return d.sortBy=t,d.sortDir=l,void o.reload();case"clientSide":i=function(e,i){var o=e[t],s=i[t];return o==s?0:o>s?1:-1}}var h=o.pageData.data;h.rows=null==r?h.rows.sort(i):h.rows.reverse(),o.refresh()});a.children().first().append('<img class="om-grid-sortIcon" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="></img>')}});for(var r=0,l=i.length;l>r;r++)!function(r){a.find("."+i[r].cls).click(function(){var a=e(o,i[r].type);n.each(function(e){var i=t(this);a&&(i.hasClass("asc")||i.hasClass("desc"))&&"serverSide"!==s[e].sort&&i.removeClass("asc desc")})})}(r);t(".pControl input",a).keydown(function(i){var a=e(o,"input");i.keyCode==t.om.keyCode.ENTER&&n.each(function(e){var i=t(this);a&&(i.hasClass("asc")||i.hasClass("desc"))&&"serverSide"!==s[e].sort&&i.removeClass("asc desc")})}),this.clearSort=function(){var t=this._extraData;t.sortBy=void 0,t.sortDir=void 0,this._getHeaderCols().removeClass("asc desc")}})}(jQuery),function(t,e){var i="om-accordion-panel-"+(65536*(1+Math.random())|0).toString(16).substring(1)+"-",o=0;t.omWidget("om.omAccordion",{options:{active:0,autoPlay:!1,collapsible:!1,disabled:!1,height:"auto",header:"> ul:first li",iconCls:null,interval:1e3,switchEffect:!1,switchMode:"click",width:"auto",onActivate:function(t,e){},onBeforeActivate:function(t,e){},onBeforeCollapse:function(t,e){},onCollapse:function(t,e){}},activate:function(t){var e=this.options;clearInterval(e.autoInterId),this._activate(t),this._setAutoInterId(this)},disable:function(){var e,i=this.element,o=this.options;o.autoPlay&&clearInterval(o.autoInterId),o.disabled=!0,0===(e=i.find(">.om-accordion-disable")).length&&t("<div class='om-accordion-disable'></div>").css({position:"absolute",top:0,left:0}).width(i.outerWidth()).height(i.outerHeight()).appendTo(i),e.show()},enable:function(){this.options.disabled=!1,this.element.find(">.om-accordion-disable").hide()},getActivated:function(){for(var e=t.data(this.element,"panels"),i=0,o=e.length;o>i;i++)if(!e[i].omPanel("option","collapsed"))return e[i].prop("id");return null},getLength:function(){return t.data(this.element,"panels").length},reload:function(e){var i=t.data(this.element,"panels");return this.options.disabled!==!1||0===i.length?this:(e=this._correctIndex(e),void i[e].omPanel("reload"))},resize:function(){var e=this.element,i=this.options,o=t.data(this.element,"panels"),s=0;this._initWidthOrHeight("width"),this._initWidthOrHeight("height"),t.each(o,function(t,e){s+=e.prev().outerHeight()}),t.each(o,function(t,o){"auto"===i.height?o.css("height",""):o.outerHeight(e.height()-s)})},setTitle:function(e,i){var o=t.data(this.element,"panels");return this.options.disabled!==!1||0===o.length?this:(e=this._correctIndex(e),void o[e].omPanel("setTitle",i))},url:function(e,i){var o=t.data(this.element,"panels");i&&this.options.disabled===!1&&0!==o.length&&(e=this._correctIndex(e),o[e].omPanel("option","url",i))},_create:function(){var e=this.element,i=this.options;e.addClass("om-widget om-accordion").css("position","relative"),this._renderPanels(),i.active=this._correctIndex(i.active),this.resize(),this._buildEvent(),t(window).bind("resize",function(){var o=t.data(e,"panels"),s=0;t.each(o,function(t,e){s+=e.prev().outerHeight()}),t.each(o,function(t,o){"auto"===i.height&&o.css("height",""),"fit"===i.height&&o.outerHeight(e.height()-s)})}),i.disabled!==!1&&this.disable()},_correctIndex:function(e){var i=this.element,o=t.data(this.element,"panels"),s=i.children().find(">div#"+e),n=o.length,a=e;e=s.length?i.find(">.om-panel").index(s.parent()):e,e=-1==e?a:e;var r=parseInt(e);return r=(isNaN(r)&&"0"||r)-0,0==n||-1===r&&this.options.collapsible!==!1?-1:0>r?0:r>=n?n-1:r},_panelCreateCollapse:function(t,e){var i,o,s=this.element,n=this.options;if(-1===n.active&&n.collapsible===!0)return!0;i=s.find(">div#"+n.active),o=s.children().index(i),o=-1==o?n.active:o;var a=parseInt(o);return a=(isNaN(a)&&"0"||a)-0,a=0>a?0:a>=t?t-1:a,a!==e},_renderPanels:function(){var e,s=this.element,n=this,a=[],r=this.options,l=s.find(r.header),d=[];l.find("a").each(function(a){var l,h=this.getAttribute("href",2),c=h.split("#")[0];c&&(c===location.toString().split("#")[0]||(l=t("base")[0])&&c===l.href)&&(h=this.hash,this.href=h);var u=t(this);d[a]={title:u.text(),iconCls:u.attr("iconCls"),onExpand:function(t){n._trigger("onActivate",t,a)},tools:[{id:"collapse",handler:function(t,e){clearInterval(r.autoInterId),n._activate(a,!0),n._setAutoInterId(n),e.stopPropagation()}}],onCollapse:function(t){n._trigger("onCollapse",t,a)},onSuccess:function(){n.resize()},onError:function(){n.resize()}};var m=t(">"+h,s),p=m.prop("id");m[0]?(p||m.prop("id",p=i+o++),m.appendTo(s)):(d[a].url=u.attr("href"),t("<div></div>").prop("id",p=u.prop("id")||i+o++).appendTo(s)),e=e||p}),e&&s.find("#"+e).prevAll().remove(),l.remove(),t.each(d,function(t,e){e.collapsed=n._panelCreateCollapse(d.length,t)}),t.each(s.children(),function(t,e){if(a.push(n._createPanel(e,d[t])),0===t){var i=a[0].prev();i.css("border-top-width",i.css("border-bottom-width"))}}),t.data(s,"panels",a)},_initWidthOrHeight:function(t){var e=this.element,i=this.options,o=this.element.attr("style"),s=i[t];"fit"==s?e.css(t,"100%"):"auto"!==s?e.css(t,s):o&&-1!=o.indexOf(t)?i[t]=e.css(t):e.css(t,"")},_createPanel:function(e,i){return t(e).omPanel(i)},_buildEvent:function(){var e=this.options,i=this;this.element.children().find(">div.om-panel-header").each(function(o){var s=t(this);s.unbind(),"mouseover"==e.switchMode?s.bind("mouseenter.omaccordions",function(s){clearInterval(e.autoInterId);var n=t.data(i.element,"expandTimer");"undefined"!=typeof n&&clearTimeout(n),n=setTimeout(function(){i._activate(o,!0),i._setAutoInterId(i)},200),t.data(i.element,"expandTimer",n)}):"click"==e.switchMode&&s.bind("click.omaccordions",function(t){clearInterval(e.autoInterId),i._activate(o,!0),i._setAutoInterId(i)}),s.hover(function(){t(this).toggleClass("om-panel-header-hover")})}),e.autoPlay&&(clearInterval(e.autoInterId),i._setAutoInterId(i))},_setAutoInterId:function(t){var e=t.options;e.autoPlay&&(e.autoInterId=setInterval(function(){t._activate("next")},e.interval))},_setOption:function(e,i){t.OMWidget.prototype._setOption.apply(this,arguments);var o=this.options;switch(e){case"active":this.activate(i);break;case"disabled":i===!1?this.enable():this.disable();break;case"width":o.width=i,this._initWidthOrHeight("width");break;case"height":o.height=i,this._initWidthOrHeight("height")}},_activate:function(e,i){var o,s=t.data(this.element,"panels"),n=s.length,a=this.options,r=this,l=!1,d=-1,h=!1;if(a.disabled===!1||0!==n){e="next"===e?(a.active+1)%n:r._correctIndex(e),a.switchEffect&&(h=!0,o="fast");for(var c=0;n>c;c++)t(s[c]).stop(!0,!0);var u=r.getActivated();l=!!u,l?(d=r._correctIndex(u),d==e?i===!0&&a.collapsible!==!1&&r._trigger("onBeforeCollapse",null,d)!==!1?(t(s[d]).omPanel("collapse",h,o),a.active=-1):a.active=d:-1===e?r._trigger("onBeforeCollapse",null,d)!==!1?(t(s[d]).omPanel("collapse",h,o),a.active=-1):a.active=d:r._trigger("onBeforeCollapse",null,d)!==!1&&(canAct=r._trigger("onBeforeActivate",null,e)!==!1)?(t(s[d]).omPanel("collapse",h,o),t(s[e]).omPanel("expand",h,o),a.active=e):a.active=d):"-1"===e?a.active=-1:r._trigger("onBeforeActivate",null,e)!==!1&&(t(s[e]).omPanel("expand",h,o),a.active=e)}}})}(jQuery),function(t){t.omWidget("om.omBorderLayout",{options:{fit:!1,spacing:5,hideCollapsBtn:!1,onBeforeDrag:function(t,e){},onAfterDrag:function(t,e){}},_create:function(){this.options.panels&&(this._minWidth=50,this._minHeight=28,this._buildRegion(),this._resizeRegion(!0),t(window).resize(t.proxy(this,"_resizeRegion")))},_getRegionSize:function(t){var e=this._getRegion(t),i=this._getRegionProxy(t),o={};return o.width=this._regionVisible(e)?e.outerWidth(!0):this._regionVisible(i)?i.outerWidth(!0):0,o.height=this._regionVisible(e)?e.outerHeight(!0):this._regionVisible(i)?i.outerHeight(!0):0,o},_resizeRegion:function(t){var e=this._getRegion("center"),i=this._getRegion("north"),o=this._getRegion("south"),s=this._getRegion("west"),n=this._getRegion("east"),a=this._getRegionProxy("north"),r=this._getRegionProxy("south"),l=this._getRegionProxy("west"),d=this._getRegionProxy("east"),h=this._getRegionSize("north").height;southHeight=this._getRegionSize("south").height,westWidth=this._getRegionSize("west").width,eastWidth=this._getRegionSize("east").width,centerWidth=this._getRegionSize("center").width,layoutWidth=this.element.width(),layoutHeight=this.element.height(),westOpt=this._getPanelOpts("west"),eastOpt=this._getPanelOpts("east"),e.css({top:h,left:westWidth}),e.find(">.om-panel-body").omPanel("resize",{height:layoutHeight-h-southHeight}),t||e.find(">.om-panel-body").omPanel("resize",{width:layoutWidth-westWidth-eastWidth});var c=e.outerHeight(!0);if(i){var u=layoutWidth-(westOpt.expandToTop?westWidth:0)-(eastOpt.expandToTop?eastWidth:0);i.find(">.om-panel-body").omPanel("resize",{width:u}),i.css({left:westOpt.expandToTop?westWidth:0}),a&&a.outerWidth(u).css({left:westOpt.expandToTop?westWidth:0})}if(o){var m=layoutWidth-(westOpt.expandToBottom?westWidth:0)-(eastOpt.expandToBottom?eastWidth:0);o.find(">.om-panel-body").omPanel("resize",{width:m}),o.css({top:layoutHeight-o.outerHeight(!0),left:westOpt.expandToBottom?westWidth:0}),r&&r.outerWidth(m).css({left:westOpt.expandToBottom?westWidth:0})}if(s){var p=westOpt.expandToTop?0:h,f=c+(westOpt.expandToBottom?southHeight:0)+(westOpt.expandToTop?h:0);s.css({top:p}),s.find(">.om-panel-body").omPanel("resize",{height:f}),l&&(l.css({top:p}),l.outerHeight(f))}if(n){var g=eastOpt.expandToTop?0:h,v=c+(eastOpt.expandToBottom?southHeight:0)+(eastOpt.expandToTop?h:0);n.css({top:g}),n.find(">.om-panel-body").omPanel("resize",{height:v}),d&&(d.css({top:g}),d.outerHeight(v))}if(t){var b=this._getPanelOpts("east")&&!this._getPanelOpts("east").width,_=this._getPanelOpts("west")&&!this._getPanelOpts("west").width,w=!this._getPanelOpts("center").width;(b||_||w)&&(!w&&b&&_?eastWidth=westWidth=(layoutWidth-centerWidth)/2:w&&!b&&_?centerWidth=westWidth=(layoutWidth-eastWidth)/2:w&&b&&!_?centerWidth=eastWidth=(layoutWidth-westWidth)/2:w&&b&&_&&(eastWidth=westWidth=centerWidth=layoutWidth/3)),w&&e.find(">.om-panel-body").omPanel("resize",{width:Math.floor(layoutWidth-westWidth-eastWidth)}),b&&n.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-westWidth-centerWidth)-this.options.spacing}),_&&(s.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-eastWidth-centerWidth)-this.options.spacing}),e.css({left:s.width()+this.options.spacing}))}},_regionVisible:function(t){return t&&"none"!=t.css("display")},_createRegionProxy:function(e,i){var o=this,s="",n=null;i?(s='<div class="om-borderlayout-proxy om-borderlayout-trigger-proxy-'+e.region+'" proxy="'+e.region+'"><div class="om-borderlayout-expand-trigger"></div></div>',n=t(s),"west"==e.region||"east"==e.region?n.width(o.options.spacing):("north"==e.region||"south"==e.region)&&n.height(o.options.spacing),function(t){n.find(".om-borderlayout-expand-trigger").click(function(){o.expandRegion(t.region)})}(e)):(s='<div class="om-borderlayout-proxy om-borderlayout-proxy-'+e.region+'" proxy="'+e.region+'"><div class="om-panel-title"></div><div class="om-panel-tool"><div class="om-icon panel-tool-expand"></div></div></div>',n=t(s),function(e){n.find(".panel-tool-expand").hover(function(){t(this).toggleClass("panel-tool-expand-hover")}).click(function(){o.expandRegion(e.region)})}(e)),n&&n.hover(function(){t(this).toggleClass("om-borderlayout-proxy-hover")}).appendTo(this.element)},_buildRegion:function(){var e=this,i=this.element;this.element.addClass("om-borderlayout"),this.options.hideCollapsBtn&&this.element.addClass("om-borderlayout-hide-collaps-btn"),this.options.fit&&i.css({width:"100%",height:"100%"});for(var o=0;o<this.options.panels.length;o++){var s=t.extend({},this.options.panels[o]),n=this.element.find("#"+s.id),a=s.collapsible&&e.options.hideCollapsBtn;if(s.collapsible&&"center"!=s.region&&this._createRegionProxy(s,a),s.collapsible&&(t.extend(s,{collapsible:!1}),e.options.hideCollapsBtn||t.extend(s,{tools:[{iconCls:["panel-tool-collapse","panel-tool-collapse-hover"],handler:function(t){e.collapseRegion(t.element.parent().attr("region"))}}]})),s.closable){var r=s.onClose;t.extend(s,{onClose:function(){r&&r.call(n[0]),e._resizeRegion()}})}n.omPanel(s),("north"==s.region||"south"==s.region)&&n.omPanel("resize",{width:i.width()});var l="0",d=this.options.spacing+"px";if(s.resizable&&"center"!=s.region){var h="";if(handleClass={},"west"==s.region?(h="e",handleClass.width=d,handleClass.right="-"+d):"east"==s.region?(h="w",handleClass.width=d,handleClass.left="-"+d):"south"==s.region?(h="n",handleClass.height=d,handleClass.top="-"+d):"north"==s.region&&(h="s",handleClass.height=d,handleClass.bottom="-"+d),n.parent().omResizable({handles:h,helper:"om-borderlayout-resizable-helper-"+h,stop:function(t,o){i.find(">.om-borderlayout-mask").remove(),t.element.find(">.om-panel-body").omPanel("resize",t.size),e._resizeRegion(),e.options.onAfterDrag&&e._trigger("onAfterDrag",null,t.element)},start:function(o,s){var n=o.element.omResizable("option","helper");t("body").find("."+n).css("border-width",e.options.spacing);var a=o.element.attr("region"),r=i.width()-2*e._minWidth,l=i.height()-2*e._minHeight;"west"==a?(r=i.width()-(e._getRegionSize("east").width+e._minWidth),o.element.omResizable("option","maxWidth",r)):"east"==a?(r=i.width()-(e._getRegionSize("west").width+e._minWidth),o.element.omResizable("option","maxWidth",r)):"north"==a?(l=i.height()-(e._getRegionSize("south").height+e._minHeight+e.options.spacing),o.element.omResizable("option","maxHeight",l)):"south"==a&&(l=i.height()-(e._getRegionSize("north").height+e._minHeight+e.options.spacing),o.element.omResizable("option","maxHeight",l)),t('<div class="om-borderlayout-mask"></div>').css({width:i.width(),height:i.height()}).appendTo(i),e.options.onBeforeDrag&&e._trigger("onBeforeDrag",null,o.element)},minWidth:e._minWidth,minHeight:e._minHeight}),n.parent().find(".om-resizable-handle").css(handleClass),l=("south"==s.region?d:0)+" "+("west"==s.region?d:0)+" "+("north"==s.region?d:0)+" "+("east"==s.region?d:0),a){var c=t("<div class='om-borderlayout-collaps-trigger-"+s.region+"'></div>");!function(t){c.click(function(){e.collapseRegion(t.attr("region"))})}(n.parent()),n.parent().find(".om-resizable-handle").append(c)}}n.parent().addClass("om-borderlayout-region").addClass("om-borderlayout-region-"+s.region).css("margin",l).attr("region",s.region),n.addClass("om-borderlayout-region-body"),n.prev().addClass("om-borderlayout-region-header")}},_getRegion:function(t){var e=this.element.find('>[region="'+t+'"]');return e.size()>0?e:!1},_getRegionProxy:function(t){var e=this.element.find('>[proxy="'+t+'"]');return e.size()>0?e:!1},_getPanelOpts:function(t){for(var e=0;e<this.options.panels.length;e++)if(t==this.options.panels[e].region)return this.options.panels[e];return!1},collapseRegion:function(e){var i=this._getPanelOpts(e);if(i&&i.collapsible){var o=this._getRegion(e);if($body=o.find(">.om-panel-body"),o){var s=t.data($body[0],"omPanel");if(s.options.closed)return;if(i.onBeforeCollapse&&s._trigger("onBeforeCollapse")===!1)return!1;o.hide(),i.onCollapse&&s._trigger("onCollapse"),this._getRegionProxy(e).show(),this._resizeRegion()}}},expandRegion:function(e){var i=this._getPanelOpts(e);if(i&&i.collapsible){var o=this._getRegion(e);if($body=o.find(">.om-panel-body"),o){var s=t.data($body[0],"omPanel");if(s.options.closed)return;if(i.onBeforeExpand&&s._trigger("onBeforeExpand")===!1)return!1;o.show(),i.onExpand&&s._trigger("onExpand"),this._getRegionProxy(e).hide(),this._resizeRegion()}}},closeRegion:function(e){var i=this._getPanelOpts(e);if(i&&i.closable){var o=this._getRegion(e);if($body=o.find(">.om-panel-body"),o){var s=t.data($body[0],"omPanel");if(s.options.closed)return;o.find(">.om-panel-body").omPanel("close"),this._getRegionProxy(e).hide(),this._resizeRegion()}}},openRegion:function(e){var i=this._getPanelOpts(e);if(i&&i.closable){var o=this._getRegion(e);if($body=o.find(">.om-panel-body"),o){var s=t.data($body[0],"omPanel");if(!s.options.closed)return;o.find(">.om-panel-body").omPanel("open"),this._getRegionProxy(e).hide(),this._resizeRegion()}}}})}(jQuery),function(t){t.omWidget("om.omCalendar",{options:{date:new Date,startDay:0,pages:1,minDate:!1,maxDate:!1,popup:!0,showTime:!1,onSelect:function(t,e){},disabledDays:[],disabledFn:function(t){},disabled:!1,readOnly:!1,editable:!0,dateFormat:!1},disable:function(){this.options.popup&&(this.hide(),this.options.disabled=!0,this.element.attr("disabled",!0).unbind(".omCalendar").next().addClass("om-state-disabled").unbind())},enable:function(){this.options.popup&&(this.options.disabled=!1,this.element.attr("disabled",!1).next().removeClass("om-state-disabled"),this._buildStatusEvent())},getDate:function(){return this.options.date},setDate:function(t){this.options.date=t,this._render({date:t})},_create:function(){var e=this.element,i=this.options;this.cid=this._stamp(e),i.popup?(e.wrap("<span></span>").after('<span class="om-calendar-trigger"></span>').parent().addClass("om-calendar om-widget om-state-default").css("position","relative"),this.con=t("<div></div>").appendTo(e.parent()).css({top:"0px",position:"absolute",background:"white",visibility:"hidden","z-index":"2000"}),this._buildBodyEvent(),this._buildStatusEvent()):this.con=this.element,this.con.addClass("om-calendar-list-wrapper om-widget om-clearfix om-widget-content")},_init:function(){var e=this.element,i=this.options;this.con.addClass("multi-"+i.pages),this._buildParam(),i.popup&&e.val()&&(i.date=t.omCalendar.parseDate(e.val(),i.dateFormat||this._defaultFormat)||new Date),this._render(),i.readOnly||!i.editable?e.attr("readonly","readOnly").unbind():e.removeAttr("readonly"),i.disabled?this.disable():this.enable()},_render:function(e){var i,o,s,n=0,a=this.element,r=this.options;for(this.ca=[],this._parseParam(e),this.con.html(""),n=0,s=[this.year,this.month];n<r.pages;n++)0===n?i=!0:(i=!1,s=this._computeNextMonth(s)),o=n==r.pages-1,this.ca.push(new t.om.omCalendar.Page({year:s[0],month:s[1],prevArrow:i,nextArrow:o,showTime:self.showTime},this)),this.ca[n]._render();if(r.pages>1){var l=a.find(".om-cal-box"),d=[];t.each(l,function(e,i){d.push(t(i).css("height"))}),d.sort(),l.css("height",d[d.length-1])}},_stamp:function(t){return(void 0===t.attr("id")||""===t.attr("id"))&&t.attr("id","K_"+(new Date).getTime()),t.attr("id")},_buildStatusEvent:function(){{var e=this;e.con}this.element.unbind(".omCalendar").bind("click.omCalendar",function(t){e.toggle()}).bind("focus.omCalendar",function(){t(this).parent().addClass("om-state-hover om-state-active")}).bind("blur.omCalendar",function(){t(this).parent().removeClass("om-state-hover om-state-active")}).next().unbind().click(function(){e.element.trigger("focus"),e.show()}).mouseover(function(){t(this).parent().addClass("om-state-hover")}).mouseout(function(){!e.isVisible()&&t(this).parent().removeClass("om-state-hover")})},_buildBodyEvent:function(){var e=this;t(document).bind("mousedown.omCalendar",this.globalEvent=function(t){e.hide()}),e.con.mousedown(function(t){t.stopPropagation()})},toggle:function(){this.isVisible()?this.hide():this.show()},isVisible:function(){return"hidden"==this.con.css("visibility")?!1:!0},show:function(){var t=this.element.parent();this.con.css("visibility","");{var e=(t.offset().left,t.offsetHeight||t.outerHeight());t.offset().top+e}this.con.css("left","-1px"),this.con.css("top",t.outerHeight()-1)},hide:function(){this.con.css("visibility","hidden")},destroy:function(){var e=this.element;t("body").unbind(".omCalendar",this.globalEvent),this.options.popup&&(e.parent().after(e).remove(),this.con.remove())},_buildParam:function(){var t=this.options;return t.startDay&&(t.startDay=(7-t.startDay)%7),!t.dateFormat&&(this._defaultFormat=t.showTime?"yy-mm-dd H:i:s":"yy-mm-dd"),this.EV=[],this},_parseParam:function(e){e&&t.extend(this.options,e),this._handleDate()},_templetShow:function(t,e){var i,o,s,n,a,r;if(e instanceof Array){for(i="",s=0;s<e.length;s++)i+=arguments.callee(t,e[s]);t=i}else if(o=t.match(/{\$(.*?)}/g),void 0!==e&&null!==o)for(s=0,n=o.length;n>s;s++)r=o[s].replace(/({\$)|}/g,""),a=void 0!==e[r]?e[r]:"",t=t.replace(o[s],a);return t},_handleDate:function(){var t=this.options.date;this.day=t.getDate(),this.month=t.getMonth(),this.year=t.getFullYear()},_getHeadStr:function(e,i){return e.toString()+t.om.lang.omCalendar.year+(Number(i)+1).toString()+t.om.lang.omCalendar.month},_monthAdd:function(){var t=this;return 11==t.month?(t.year++,t.month=0):t.month++,t.options.date.setFullYear(t.year,t.month,1),this},_monthMinus:function(){var t=this;return 0===t.month?(t.year--,t.month=11):t.month--,t.options.date.setFullYear(t.year,t.month,1),this},_computeNextMonth:function(t){var e=t[0],i=t[1];return 11==i?(e++,i=0):i++,[e,i]},_handleOffset:function(){for(var e=this,i=t.om.lang.omCalendar,o=[i.Su,i.Mo,i.Tu,i.We,i.Th,i.Fr,i.Sa],s="<span>{$day}</span>",n=this.options.startDay,a="",r=[],l=0;7>l;l++)r[l]={day:o[(l-n+7)%7]};return a=e._templetShow(s,r),{day_html:a}}}),t.extend(t.om.omCalendar,{Page:function(e,i){var o=t.om.lang.omCalendar;this.father=i,this.month=Number(e.month),this.year=Number(e.year),this.prevArrow=e.prevArrow,this.nextArrow=e.nextArrow,this.node=null,this.timmer=null,this.id="",this.EV=[],this.html=['<div class="om-cal-box" id="{$id}">','<div class="om-cal-hd om-widget-header">','<a href="javascript:void(0);" class="om-prev {$prev}"><span class="om-icon om-icon-seek-prev">Prev</span></a>','<a href="javascript:void(0);" class="om-title">{$title}</a>','<a href="javascript:void(0);" class="om-next {$next}"><span class="om-icon om-icon-seek-next">Next</span></a>',"</div>",'<div class="om-cal-bd">','<div class="om-whd">',i._handleOffset().day_html,"</div>",'<div class="om-dbd om-clearfix">',"{$ds}","</div>","</div>",'<div class="om-setime om-state-default hidden">',"</div>",'<div class="om-cal-ft {$showtime}">','<div class="om-cal-time om-state-default">',"时间：00:00 &hearts;","</div>","</div>",'<div class="om-selectime om-state-default hidden">',"</div>","</div><!--#om-cal-box-->"].join(""),this.nav_html=["<p>",o.month,'<select value="{$the_month}">','<option class="m1" value="1">01</option>','<option class="m2" value="2">02</option>','<option class="m3" value="3">03</option>','<option class="m4" value="4">04</option>','<option class="m5" value="5">05</option>','<option class="m6" value="6">06</option>','<option class="m7" value="7">07</option>','<option class="m8" value="8">08</option>','<option class="m9" value="9">09</option>','<option class="m10" value="10">10</option>','<option class="m11" value="11">11</option>','<option class="m12" value="12">12</option>',"</select>","</p>","<p>",o.year,'<input type="text" value="{$the_year}" onfocus="this.select()"/>',"</p>","<p>",'<button class="ok btn btn-mini" type="button">',o.ok,'</button>&nbsp;<button class="cancel btn btn-mini" type="button">',o.cancel,"</button>","</p>"].join(""),this.Verify=function(){var t=function(t){return/^\d+$/i.test(t)?(t=Number(t),!(1>t||t>31)):!1},e=function(t){return/^\d+$/i.test(t)?(t=Number(t),!(100>t||t>1e4)):!1},i=function(t){return/^\d+$/i.test(t)?(t=Number(t),!(1>t||t>12)):!1};return{isDay:t,isYear:e,isMonth:i}},this._renderUI=function(){var e,i=this,o={},s=i.father.options;return i.HTML="",o.prev="",o.next="",o.title="",o.ds="",i.prevArrow||(o.prev="hidden"),i.nextArrow||(o.next="hidden"),i.father.showTime||(o.showtime="hidden"),o.id=i.id="om-cal-"+Math.random().toString().replace(/.\./i,""),o.title=i.father._getHeadStr(i.year,i.month),i.createDS(),o.ds=i.ds,i.father.con.append(i.father._templetShow(i.html,o)),i.node=t("#"+i.id),s.showTime&&(e=i.node.find(".om-cal-ft"),e.removeClass("hidden"),i.timmer=new t.om.omCalendar.TimeSelector(e,i.father)),this},this._buildEvent=function(){var e=this,i=t("#"+e.id),o=e.father.options;e.EV[0]=i.find("div.om-dbd").bind("mousedown",function(i){var s=t(i.target);if(!(s.filter(".om-null, .om-state-disabled").length>0)){var n=Number(s.html()),a=new Date(o.date);if(a.setFullYear(e.year,e.month,n),e.father.dt_date=a,o.showTime||e.father._trigger("onSelect",i,a),o.popup&&!o.showTime&&(e.father.hide(),!isNaN(e.father.dt_date))){var r=t.omCalendar.formatDate(e.father.dt_date,o.dateFormat||e.father._defaultFormat);t(e.father.element).val(r).focus().blur()}e.father._render({date:a})}}).find("a").bind("mouseover",function(e){t(this).addClass("om-state-hover om-state-nobd")}).bind("mouseout",function(e){t(this).removeClass("om-state-hover").not(".om-state-highlight, .om-state-active").removeClass("om-state-nobd")}),e.EV[1]=i.find("a.om-prev").bind("click",function(t){return e.father._monthMinus()._render(),!1}),e.EV[2]=i.find("a.om-next").bind("click",function(t){return e.father._monthAdd()._render(),!1}),e.EV[3]=i.find("a.om-title").bind("click",function(o){try{e.timmer.hidePopup()}catch(s){}var n=e.father._templetShow(e.nav_html,{the_month:e.month+1,the_year:e.year});return i.find(".om-setime").html(n).removeClass("hidden").find("option:[value="+(e.month+1)+"]").attr("selected","selected"),this.blur(),i.find("input").bind("keydown",function(o){var s=t(o.target);if(o.keyCode==t.om.keyCode.UP&&(s.val(Number(s.val())+1),s[0].select()),o.keyCode==t.om.keyCode.DOWN&&(s.val(Number(s.val())-1),s[0].select()),o.keyCode==t.om.keyCode.ENTER){var n=i.find(".om-setime select").val(),a=i.find(".om-setime input").val();if(i.find(".om-setime").addClass("hidden"),!e.Verify().isYear(a))return;if(!e.Verify().isMonth(n))return;e.father._render({date:e._computeDate(e,a,n)})}}),!1}).bind("mouseover",function(e){t(this).addClass("om-state-hover")}).bind("mouseout",function(e){t(this).removeClass("om-state-hover")}),e.EV[4]=i.find(".om-setime").bind("click",function(i){i.preventDefault();var o=t(i.target),s=t(this);if(o.hasClass("ok")){var n=s.find("select").val(),a=s.find("input").val();if(s.addClass("hidden"),!e.Verify().isYear(a))return;if(!e.Verify().isMonth(n))return;n=n-s.parent().prevAll(".om-cal-box").length-1,e.father._render({date:e._computeDate(e,a,n)})}else o.hasClass("cancel")&&s.addClass("hidden")})},this._computeDate=function(t,e,i){var o=new Date(t.father.options.date.getTime());return o.setFullYear(e,i),o},this._getNode=function(){var t=this;return t.node},this._getNumOfDays=function(t,e){return 32-new Date(t,e-1,32).getDate()},this.createDS=function(){var e,i=this,o=i.father.options,s="",n=(new Date(i.year+"/"+(i.month+1)+"/01").getDay()+o.startDay+7)%7,a=i._getNumOfDays(i.year,i.month+1)+n,r=[];for(e=0;e<o.disabledDays.length;e++)r[e]=o.disabledDays[e]%7;for(e=0;a>e;e++){var l=new Date(i.year+"/"+Number(i.month+1)+"/"+(e+1-n).toString());s+=n>e?'<a href="javascript:void(0);" class="om-null" >0</a>':t.inArray((e+o.startDay)%7,r)>=0?'<a href="javascript:void(0);" class="om-state-disabled">'+(e-n+1)+"</a>":o.disabledFn(l)===!1?'<a href="javascript:void(0);" class="om-state-disabled">'+(e-n+1)+"</a>":o.minDate instanceof Date&&new Date(i.year+"/"+(i.month+1)+"/"+(e+1-n)).getTime()<o.minDate.getTime()+1?'<a href="javascript:void(0);" class="om-state-disabled">'+(e-n+1)+"</a>":o.maxDate instanceof Date&&new Date(i.year+"/"+(i.month+1)+"/"+(e+1-n)).getTime()>o.maxDate.getTime()?'<a href="javascript:void(0);" class="om-state-disabled">'+(e-n+1)+"</a>":e==n+(new Date).getDate()-1&&(new Date).getFullYear()==i.year&&(new Date).getMonth()==i.month?'<a href="javascript:void(0);" class="om-state-highlight om-state-nobd">'+(e-n+1)+"</a>":e==n+o.date.getDate()-1&&i.month==o.date.getMonth()&&i.year==o.date.getFullYear()?'<a href="javascript:void(0);" class="om-state-active om-state-nobd">'+(e-n+1)+"</a>":'<a href="javascript:void(0);">'+(e-n+1)+"</a>"}if(a%7!==0)for(e=0;7-a%7>e;e++)s+='<a href="javascript:void(0);" class="om-null">0</a>';i.ds=s},this._render=function(){var t=this;t._renderUI(),t._buildEvent()}}}),t.extend(t.om.omCalendar,{TimeSelector:function(e,i){var o=t.om.lang.omCalendar;this.father=i,this.fcon=e.parent(".om-cal-box"),this.popupannel=this.fcon.find(".om-selectime"),"undefined"==typeof i.options.date&&(i.options.date=new Date),this.time=i.options.date,this.status="s",this.ctime=t('<div class="om-cal-time om-state-default">'+o.time+'：<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><!--{{arrow--><div class="cta"><button class="u om-icon om-icon-triangle-1-n" type="button"></button><button class="d om-icon om-icon-triangle-1-s" type="button"></button></div><!--arrow}}--></div>'),this.button=t('<button class="ct-ok om-state-default" type="button">'+o.ok+"</button>"),this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],this.m_a=["00","10","20","30","40","50"],this.s_a=["00","10","20","30","40","50"],this.parseSubHtml=function(t){for(var e="",i=0;i<t.length;i++)e+='<a href="javascript:void(0);" class="om-cal-item">'+t[i]+"</a>";return e+='<a href="javascript:void(0);" class="x">x</a>'},this.showPopup=function(t){var e=this;e.popupannel.html(t),e.popupannel.removeClass("hidden");

var i=e.status,o="om-state-active om-state-nobd";switch(e.ctime.find("span").removeClass(o),i){case"h":e.ctime.find(".h").addClass(o);break;case"m":e.ctime.find(".m").addClass(o);break;case"s":e.ctime.find(".s").addClass(o)}},this.hidePopup=function(){this.popupannel.addClass("hidden")},this._render=function(){var t=this,e=t.get("h"),i=t.get("m"),o=t.get("s");return t.father._time=t.time,t.ctime.find(".h").html(e),t.ctime.find(".m").html(i),t.ctime.find(".s").html(o),t},this.set=function(t,e){var i=this;switch(e=Number(e),t){case"h":i.time.setHours(e);break;case"m":i.time.setMinutes(e);break;case"s":i.time.setSeconds(e)}i._render()},this.get=function(t){var e=this.time;switch(t){case"h":return e.getHours();case"m":return e.getMinutes();case"s":return e.getSeconds()}},this.add=function(){var t=this,e=t.status,i=t.get(e);i++,t.set(e,i)},this.minus=function(){var t=this,e=t.status,i=t.get(e);i--,t.set(e,i)},this._timeInit=function(){var i=this;e.html("").append(i.ctime),e.append(i.button),i._render(),i.popupannel.bind("click",function(e){var o=t(e.target);if(o.hasClass("x"))i.hidePopup();else if(o.hasClass("om-cal-item")){var s=Number(o.html());i.set(i.status,s),i.hidePopup()}}),i.button.bind("click",function(e){var o=i.father.options,s="undefined"==typeof i.father.dt_date?o.date:i.father.dt_date;if(s.setHours(i.get("h")),s.setMinutes(i.get("m")),s.setSeconds(i.get("s")),i.father._trigger("onSelect",e,s),o.popup){var n=t.omCalendar.formatDate(s,o.dateFormat||i.father._defaultFormat);t(i.father.element).val(n),i.father.hide()}}),i.ctime.bind("keyup",function(e){(e.keyCode==t.om.keyCode.UP||e.keyCode==t.om.keyCode.LEFT)&&(e.preventDefault(),i.add()),(e.keyCode==t.om.keyCode.DOWN||e.keyCode==t.om.keyCode.RIGHT)&&(e.preventDefault(),i.minus())}),i.ctime.find(".u").bind("click",function(){i.hidePopup(),i.add()}),i.ctime.find(".d").bind("click",function(){i.hidePopup(),i.minus()}),i.ctime.find(".h").bind("click",function(){var t=i.parseSubHtml(i.h_a);i.status="h",i.showPopup(t)}),i.ctime.find(".m").bind("click",function(){var t=i.parseSubHtml(i.m_a);i.status="m",i.showPopup(t)}),i.ctime.find(".s").bind("click",function(){var t=i.parseSubHtml(i.s_a);i.status="s",i.showPopup(t)})},this._timeInit()}}),t.omCalendar=t.omCalendar||{},t.extend(t.omCalendar,{leftPad:function(t,e,i){var o=new String(t);for(i||(i=" ");o.length<e;)o=i+o;return o.toString()}}),t.extend(t.omCalendar,{getShortDayName:function(e){return t.omCalendar.dayMaps[e][0]},getDayName:function(e){return t.omCalendar.dayMaps[e][1]},getShortMonthName:function(e){return t.omCalendar.monthMaps[e][0]},getMonthName:function(e){return t.omCalendar.monthMaps[e][1]},dayMaps:[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],monthMaps:[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],formatCodes:{d:{g:"this.getDate()",s:"this.setDate({param})",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},dd:{g:"$.omCalendar.leftPad(this.getDate(), 2, '0')",s:"this.setDate(parseInt('{param}', 10))",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},m:{g:"(this.getMonth() + 1)",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},mm:{g:"$.omCalendar.leftPad(this.getMonth() + 1, 2, '0')",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},y:{g:"('' + this.getFullYear()).substring(2, 4)",s:"this.setFullYear(parseInt('20{param}', 10))",r:"(\\d{2})"},yy:{g:"this.getFullYear()",s:"this.setFullYear(parseInt('{param}', 10))",r:"(\\d{4})"},h:{g:"$.omCalendar.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"(0[0-9]|1[0-1])"},H:{g:"$.omCalendar.leftPad(this.getHours(), 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"([0-1][0-9]|2[0-3])"},g:{g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-1])"},G:{g:"this.getHours()",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-9]|2[0-3])"},i:{g:"$.omCalendar.leftPad(this.getMinutes(), 2, '0')",s:"this.setMinutes(parseInt('{param}', 10))",r:"([0-5][0-9])"},s:{g:"$.omCalendar.leftPad(this.getSeconds(), 2, '0')",s:"this.setSeconds(parseInt('{param}', 10))",r:"([0-5][0-9])"},u:{g:"$.omCalendar.leftPad(this.getMilliseconds(), 3, '0')",s:"this.setMilliseconds(parseInt('{param}', 10))",r:"(\\d{1,3})"},D:{g:"$.omCalendar.getShortDayName(this.getDay())",s:"",r:""},DD:{g:"$.omCalendar.getDayName(this.getDay())",s:"",r:""},M:{g:"$.omCalendar.getShortMonthName(this.getMonth())",s:"",r:""},MM:{g:"$.omCalendar.getMonthName(this.getMonth())",s:"",r:""},a:{g:"(this.getHours() < 12 ? 'am' : 'pm')",s:"",r:""},A:{g:"(this.getHours() < 12 ? 'AM' : 'PM')",s:"",r:""}}}),t.extend(t.omCalendar,{formatDate:function(e,i){if(!e||!i)return null;if("[object Date]"!==Object.prototype.toString.call(e))return null;var o,s,n="",a=!1;for(o=0;o<i.length;o++)s=i.charAt(o),fi_next=i.charAt(o+1),"'"!=s?(!a&&t.omCalendar.formatCodes[s+fi_next]?(s=new Function("return "+t.omCalendar.formatCodes[s+fi_next].g).call(e),o++):!a&&t.omCalendar.formatCodes[s]&&(s=new Function("return "+t.omCalendar.formatCodes[s].g).call(e)),n+=s):a=!a;return n},parseDate:function(e,i){if(!e||!i)return null;if("[object String]"!==Object.prototype.toString.call(e))return null;var o,s,n,a=[],r=null;for(o=0;o<i.length;o++){if(s=i.charAt(o),fi_next=i.charAt(o+1),t.omCalendar.formatCodes[s+fi_next])r=t.omCalendar.formatCodes[s+fi_next],o++;else{if(!t.omCalendar.formatCodes[s])continue;r=t.omCalendar.formatCodes[s]}if(n=e.match(new RegExp(r.r)),!n)return null;a.push(r.s.replace("{param}",n[0])),e=e.substring(n.index+n[0].length);var l=i.charAt(o+1);if((""!=l||""!=e)&&l!==e.charAt(0)&&void 0===t.omCalendar.formatCodes[l])return null}var d=new Date;return new Function(a.join(";")).call(d),d}}),t.om.lang.omCalendar={year:"年",month:"月",Su:"日",Mo:"一",Tu:"二",We:"三",Th:"四",Fr:"五",Sa:"六",cancel:"取消",ok:"确定",time:"时间"}}(jQuery),function(t){Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=this.length,i=0;e>i;i++)if(this[i]===t)return i;return-1}),t.omWidget("om.omCombo",{options:{optionField:"text",valueField:"value",width:"auto",emptyText:"None",disabled:!1,readOnly:!1,editable:!0,lazyLoad:!1,listMaxHeight:300,listAutoWidth:!1,autoFilter:!0,filterStrategy:"first",filterDelay:500,forceSelection:!1,multi:!1,multiSeparator:","},_init:function(){var t=this.options,e=this.textInput,i=t.dataSource;if(t.inputField||(t.inputField=t.optionField),"undefined"!=typeof t.value&&(t.lazyLoad=!1),"auto"!=t.width){var o=e.parent().width(t.width);e.width(o.innerWidth()-e.next().outerWidth()-e.outerWidth()+e.width())}t.multi&&(t.editable=this.options.editable=!1),this._refeshEmptyText(t.emptyText),t.disabled?e.attr("disabled",!0):e.removeAttr("disabled"),t.readOnly||!t.editable?e.attr("readonly","readOnly"):e.removeAttr("readonly"),t.lazyLoad?this.dataHasLoaded=!1:(this._toggleLoading("add"),i&&"string"==typeof i?this._ajaxLoad(i):i&&"object"==typeof i?(this._loadData(i),this._toggleLoading("remove")):(this.dataHasLoaded=!0,this._toggleLoading("remove")));var s=t.disabled||t.readOnly;s?this.expandTrigger.addClass("om-state-disabled"):this._bindEvent()},_create:function(){var e=this.element,i=t('<span class="om-combo om-widget om-state-default"></span>').css("position","relative").insertAfter(e).wrapInner(e);this.textInput=t('<input type="text"/>').appendTo(i),this.valueEl=e.hide(),this.expandTrigger=t('<span class="om-combo-trigger"></span>').appendTo(i),this.dropList=t(t('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(i).children()[0]).hide()},setData:function(t){var e=this,i=e.textInput,o=e.valueEl;e.options.value="",o.val(""),i.val(""),e._toggleLoading("add"),"string"==typeof t?e._ajaxLoad(t):(e._loadData(t),e._toggleLoading("remove"))},getData:function(){var t=this.options.dataSource;return"object"==typeof t?t:null},value:function(t){if("undefined"==typeof t){var e=this.valueEl.val();return e?e:""}return this._setValue(t+""),this},disable:function(){var t=this.element;t.attr("disabled",!0).unbind(),this.options.disabled=!0,this.expandTrigger.addClass("om-state-disabled").unbind()},enable:function(){var t=this.element;t.removeAttr("disabled").unbind(),this.options.disabled=!1,this.expandTrigger.removeClass("om-state-disabled").unbind(),this._bindEvent()},destroy:function(){var e=this.element;t(document).unbind("mousedown.omCombo",this.globalEvent),e.parent().after(e).remove(),this.dropList.parent().remove()},_bindEvent:function(){var e=this,i=e.options,o=e.textInput,s=e.valueEl,n=e.dropList,a=e.expandTrigger,r=i.emptyText,l=!1,d=o.parent("span");d.mouseenter(function(){i.disabled||d.addClass("om-state-hover")}).mouseleave(function(){d.removeClass("om-state-hover")}).mousedown(function(t){t.stopPropagation()}),o.focus(function(){l||(l=!0,t(".om-droplist").not(n).hide(),d.addClass("om-state-focus"),e._refeshEmptyText(r),e.dataHasLoaded||a.hasClass("om-loading")||(e._toggleLoading("add"),"object"==typeof i.dataSource?(e._loadData(i.dataSource),e._toggleLoading("remove")):"string"==typeof i.dataSource?e._ajaxLoad(i.dataSource):(e.dataHasLoaded=!0,e._toggleLoading("remove"))),i.disabled||i.readOnly||n.toggle())}).blur(function(n){if(l=!1,d.removeClass("om-state-focus"),o.removeClass("om-combo-focus"),!i.disabled&&!i.readOnly&&!i.multi){if(e.hasManualInput){e.hasManualInput=!1;var a=o.val();if(""!==a){var h=t.data(s,"allInputText"),c=t.data(s,"allValues"),u=h.indexOf(a);if(u>-1)e._setValue(c[u]);else if(i.forceSelection){var m=s.val();u=c.indexOf(m),o.val(u>-1?h[u]:"")}else s.val(o.val())}else s.val("")}e._refeshEmptyText(r)}}).keyup(function(s){var a=s.keyCode,r=t.om.keyCode;switch(a){case r.DOWN:e._selectNext();break;case r.UP:e._selectPrev();break;case r.ENTER:e._backfill(e.dropList.find(".om-state-hover"));break;case r.ESCAPE:n.hide();break;case r.TAB:break;default:e.hasManualInput=!0,!i.disabled&&!i.readOnly&&i.editable&&i.autoFilter&&(window._omcomboFilterTimer&&clearTimeout(window._omcomboFilterTimer),window._omcomboFilterTimer=setTimeout(function(){t(document).attr("activeElement").id==o.attr("id")&&n.show(),e._doFilter(o)},i.filterDelay))}}),n.mousedown(function(t){t.stopPropagation()}),a.click(function(){!a.hasClass("om-loading")&&o.focus()}).mousedown(function(){!a.hasClass("om-loading")&&d.addClass("om-state-active")}).mouseup(function(){!a.hasClass("om-loading")&&d.removeClass("om-state-active")}),t(document).bind("mousedown.omCombo",this.globalEvent=function(){n.hide()})},_initDropList:function(){var e=this,i=e.options,o=e.textInput,s=e.valueEl,n=e.dropList.scrollTop(0).css("height","auto"),a=null,r=n.find(".om-combo-list-row"),l=e._getAllOptionsBeforeFiltered().removeClass("om-helper-hidden om-state-hover");if(!(l.size()<=0)){if(r.removeClass("om-combo-selected"),void 0!==s.val()&&""!==s.val()){var d=s.val(),h=t.data(s,"allValues");if(i.multi){for(var c=d.split(i.multiSeparator),u=0;u<c.length;u++){var m=h.indexOf(c[u]);m>-1&&t(n.find(".om-combo-list-row").get(m)).addClass("om-combo-selected")}valueItem=c[0]}else{var m=h?h.indexOf(d):-1;m>-1&&(a=t(n.find(".om-combo-list-row").get(m)).addClass("om-combo-selected"))}}var p=n.parent(),f=o.parent();p.width(i.listAutoWidth?t.browser.msie&&"7.0"==t.browser.version&&!t.support.style?n.show().outerWidth():n.outerWidth():f.outerWidth()),"auto"!=i.listMaxHeight&&n.height()>i.listMaxHeight&&n.height(i.listMaxHeight).css("overflow-y","auto");{f.offset()}p.css({left:"-1px",top:f.outerHeight()}),a&&n.scrollTop(t(a).offset().top-n.offset().top)}},_toggleLoading:function(t){this.options.disabled||("add"==t?this.expandTrigger.removeClass("om-icon-carat-1-s").addClass("om-loading"):"remove"==t&&this.expandTrigger.removeClass("om-loading").addClass("om-icon-carat-1-s"))},_ajaxLoad:function(e){var i=this,o=this.options;t.ajax({url:e,method:"POST",dataType:"json",success:function(t,e){i.dataHasLoaded=!0;var s=o.onSuccess;return s&&i._trigger("onSuccess",null,t,e)===!1?void(o.dataSource=t):(i._loadData(t),void i._toggleLoading("remove"))},error:function(t,s,n){if(i.dataHasLoaded=!0,!o.onError)throw i._toggleLoading("remove"),new Error('An error occurred while load records from URL "'+e+'",the error message is:'+n.message);i._toggleLoading("remove"),i._trigger("onError",null,t,s,n)}})},_loadData:function(e){var i=this.options,o=this.valueEl;i.dataSource=e,this.dataHasLoaded=!0;var s=i.inputField,n=[];t(e).each("string"==typeof s?function(){n.push(this[s])}:function(t){n.push(s(this,t))}),t.data(o,"allInputText",n);var a=i.valueField,r=[];t(e).each("string"==typeof a?function(){r.push(""+this[a])}:function(t){r.push(""+a(this,t))}),t.data(o,"allValues",r);var l=this.dropList.empty();if(i.listProvider){var d=i.listProvider(l,e);d&&d.each(function(){t(this).addClass("om-combo-list-row")})}else{var h=i.optionField,a=i.valueField,c="",u=this;t(e).each(function(t){var e='<div class="om-combo-list-row">';e+="string"==typeof h?this[i.optionField]:i.optionField(this,t),e+="</div>",c+=e}),c&&(t(c).appendTo(l),l.hide(),u._initDropList(),this._bindEventsToList())}i.value&&this._setValue(""+i.value)},_bindEventsToList:function(){var e=this,i=e._getAllOptionsBeforeFiltered();i.hover(function(){i.removeClass("om-state-hover"),t(this).addClass("om-state-hover")},function(){t(this).removeClass("om-state-hover")}).mousedown(function(){e._backfill(this)})},_setValue:function(e){var i=this.textInput,o=this.valueEl,s=!0,n=o.val(),a=this.options;e==n&&(s=!1),o.val(e);var r=t.data(o,"allValues"),l=[],d=[];a.multi?d=e.split(a.multiSeparator):d.push(e);for(var h=0;h<d.length;h++){var c=r?r.indexOf(d[h]):-1;c>-1?l.push(t.data(o,"allInputText")[c]):a.forceSelection?(o.val(""),e=""):l.push(e)}i.val(a.multi?l.join(a.multiSeparator):l.join("")),a.onValueChange&&s&&this._trigger("onValueChange",null,i,e,n),this._refeshEmptyText(a.emptyText)},_findHighlightItem:function(){var t=this.dropList,e=t.find(".om-state-hover");if(e.length>0)return e;var i=t.find(".om-combo-selected");return i.length>0?i[0]:i},_selectPrev:function(){var e=this._findHighlightItem(),i=this._getAllOptionsAfterFiltered(),o=i.index(e),s=t(i[o]);0===o?o=i.length:-1==o&&(o=i.length);var n=t(i[o-1]);this._highLisghtAndScrollTo(s,n)},_selectNext:function(){var e=this.dropList;if("none"!=e.css("display")){var i=this._getAllOptionsAfterFiltered(),o=i.index(this._findHighlightItem()),s=t(i[o]);o==i.length-1&&(o=-1);var n=t(i[o+1]);this._highLisghtAndScrollTo(s,n)}},_highLisghtAndScrollTo:function(t,e){var i=this.dropList;t.removeClass("om-state-hover"),e.addClass("om-state-hover"),e.position().top<=0?i.scrollTop(i.scrollTop()+e.position().top):e.position().top+e.outerHeight()>i.height()&&i.scrollTop(i.scrollTop()+e.position().top+e.outerHeight()-i.height())},_backfill:function(e){if(0!==e.length){var i=this,o=i.valueEl,s=i.dropList,n=i.options,a=n.multi;if(a?t(e).toggleClass("om-combo-selected").removeClass("om-state-hover"):(this._getAllOptionsBeforeFiltered().removeClass("om-combo-selected"),t(e).addClass("om-combo-selected")),"none"!=s.css("display")){for(var r=[],l=s.find(".om-combo-selected"),d=0;d<l.length;d++){var h=t(l[d]).index();h>-1&&r.push(t.data(o,"allValues")[h])}this._setValue(r.join(a?n.multiSeparator:"")),a||s.hide()}}},_getAllOptionsBeforeFiltered:function(){return this.dropList.find(".om-combo-list-row")},_getAllOptionsAfterFiltered:function(){var t=this.dropList;return t.find(".om-combo-list-row").not(t.find(".om-helper-hidden"))},_doFilter:function(){var e=this,i=e.textInput,o=e.valueEl,s=e.options;records=s.dataSource,filterStrategy=s.filterStrategy,text=i.val(),needShow=!1,items=e._getAllOptionsBeforeFiltered(),allInputText=t.data(o,"allInputText"),t(records).each(function(i){e._filetrPass(filterStrategy,text,records[i],allInputText[i])?(t(items.get(i)).removeClass("om-helper-hidden"),needShow=!0):t(items.get(i)).addClass("om-helper-hidden")});var n=this.dropList.css("height","auto");"auto"!=s.listMaxHeight&&n.height()>s.listMaxHeight&&n.height(s.listMaxHeight).css("overflow-y","auto"),needShow||n.hide()},_filetrPass:function(t,e,i,o){if(""===e)return!0;if("function"==typeof t)return t(e,i);if("first"===t)return 0===o.indexOf(e);if("anywhere"===t)return o.indexOf(e)>-1;if("last"===t){var s=o.lastIndexOf(e);return s>-1&&s+e.length==o.length}return!1},_refeshEmptyText:function(t){var e=this.textInput;t&&(""===e.val()?e.val(t).addClass("om-empty-text"):(e.val()===t&&e.val(""),e.removeClass("om-empty-text")))}})}(jQuery),function(t,e){var i="om-dialog om-widget om-widget-content om-corner-all ",o={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},n=t.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};t.omWidget("om.omDialog",{options:{autoOpen:!0,url:"",buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var e=this;e.element.show().removeAttr("title").addClass("om-dialog-content om-widget-content").wrap("<div></div>"),e.element.parent().bind("om-remove.omDialog",e.__removeBind=function(){e.element.remove()});{var o=e.options,s=o.title||"&#160;",n=t.om.omDialog.getTitleId(e.element),a=(e.uiDialog=e.element.parent()).appendTo(document.body).hide().addClass(i+o.dialogClass).css({zIndex:o.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){o.closeOnEscape&&i.keyCode&&i.keyCode===t.om.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(t){e.moveToTop(!1,t)}),r=(e.uiDialogTitlebar=t("<div></div>")).addClass("om-dialog-titlebar om-widget-header om-corner-all om-helper-clearfix").prependTo(a),l=t('<a href="#"></a>').addClass("om-dialog-titlebar-close om-corner-tr").attr("role","button").hover(function(){l.addClass("om-state-hover")},function(){l.removeClass("om-state-hover")}).focus(function(){l.addClass("om-state-focus")}).blur(function(){l.removeClass("om-state-focus")}).click(function(t){return e.close(t),!1}).appendTo(r);(e.uiDialogTitlebarCloseText=t("<span></span>")).addClass("om-icon-closethick").text(o.closeText).appendTo(l),t("<span></span>").addClass("om-dialog-title").attr("id",n).html(s).prependTo(r)}r.find("*").add(r).disableSelection(),o.draggable&&t.om.omDraggable&&e._makeDraggable(),o.resizable&&t.fn.omResizable&&e._makeResizable(),e._createButtons(o.buttons),e._isOpen=!1,t.fn.bgiframe&&a.bgiframe()},_init:function(){if(this.element.find("iframe").length>0){var e=this.element.find("iframe"),i=e.data("src");e.attr("src",i),e.removeData("src")}""!==this.options.url&&t.get(this.options.url,function(t){this.element.html(t)}),this.options.autoOpen&&this.open()},destroy:function(){var t=this;return t.overlay&&t.overlay.destroy(),t.uiDialog.hide(),t.element.unbind(".dialog").removeData("dialog").removeClass("om-dialog-content om-widget-content").hide().appendTo("body"),t.uiDialog.remove(),t.originalTitle&&t.element.attr("title",t.originalTitle),t},widget:function(){return this.uiDialog},close:function(e){var i,o,s=this,n=this.options,a=n.onBeforeClose,r=n.onClose;if(!a||!1!==s._trigger("onBeforeClose",e))return s.overlay&&s.overlay.destroy(),s.uiDialog.unbind("keypress.om-dialog"),s._isOpen=!1,s.options.hide?s.uiDialog.hide(s.options.hide,function(){r&&s._trigger("onClose",e)}):(s.uiDialog.hide(),r&&s._trigger("onClose",e)),t.om.omDialog.overlay.resize(),s.options.modal&&(i=0,t(".om-dialog").each(function(){this!==s.uiDialog[0]&&(o=t(this).css("z-index"),isNaN(o)||(i=Math.max(i,o)))}),t.om.omDialog.maxZ=i),s},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var o,s=this,n=s.options;return n.modal&&!e||!n.stack&&!n.modal?s._trigger("onFocus",i):(n.zIndex>t.om.omDialog.maxZ&&(t.om.omDialog.maxZ=n.zIndex),s.overlay&&(t.om.omDialog.maxZ+=1,s.overlay.$el.css("z-index",t.om.omDialog.overlay.maxZ=t.om.omDialog.maxZ)),o={scrollTop:s.element.scrollTop(),scrollLeft:s.element.scrollLeft()},t.om.omDialog.maxZ+=1,s.uiDialog.css("z-index",t.om.omDialog.maxZ),s.element.attr(o),s._trigger("onFocus",i),s)},open:function(){if(!this._isOpen){var e=this,i=e.options,o=e.uiDialog;e.overlay=i.modal?new t.om.omDialog.overlay(e):null,e._size(),e._position(i.position),o.show(i.show),e.moveToTop(!0),i.modal&&o.bind("keypress.om-dialog",function(e){if(e.keyCode===t.om.keyCode.TAB){var i=t(":tabbable",this),o=i.filter(":first"),s=i.filter(":last");return e.target!==s[0]||e.shiftKey?e.target===o[0]&&e.shiftKey?(s.focus(1),!1):void 0:(o.focus(1),!1)}}),t(e.element.find(":tabbable").get().concat(o.find(".om-dialog-buttonpane :tabbable").get().concat(o.get()))).eq(0).focus(),e._isOpen=!0;var s=i.onOpen;return s&&e._trigger("onOpen"),e}},_createButtons:function(e){var i=this,o=!1,s=t("<div></div>").addClass("om-dialog-buttonpane om-helper-clearfix"),a=t("<div></div>").addClass("om-dialog-buttonset").appendTo(s);i.uiDialog.find(".om-dialog-buttonpane").remove(),"object"==typeof e&&null!==e&&t.each(e,function(){return!(o=!0)}),o&&(t.each(e,function(e,o){o=t.isFunction(o)?{click:o,text:e}:o;var s=t('<button type="button"></button>').click(function(){o.click.apply(i.element[0],arguments)}).appendTo(a);t.each(o,function(t,e){"click"!==t&&(t in n?s[t](e):s.attr(t,e))}),t.fn.omButton&&s.omButton()}),s.appendTo(i.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,o=i.options,s=t(document),n=0;i.uiDialog.omDraggable({cancel:".om-dialog-content, .om-dialog-titlebar-close",handle:".om-dialog-titlebar",containment:"document",cursor:"move",onStart:function(s,a){n="auto"===o.height?"auto":t(this).height(),t(this).height(t(this).height()).addClass("om-dialog-dragging"),i._trigger("onDragStart",e(s),a)},onDrag:function(t,o){i._trigger("onDrag",e(t),o)},onStop:function(a,r){o.position=[a.position.left-s.scrollLeft(),a.position.top-s.scrollTop()],t(this).removeClass("om-dialog-dragging").height(n),i._trigger("onDragStop",e(a),r),t.om.omDialog.overlay.resize()}})},_makeResizable:function(i){function o(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}i=i===e?this.options.resizable:i;var s=this,n=s.options,a=s.uiDialog.css("position"),r="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";s.uiDialog.omResizable({cancel:".om-dialog-content",containment:"document",alsoResize:s.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:s._minHeight(),handles:r,start:function(e,i){t(this).addClass("om-dialog-resizing"),s._trigger("onResizeStart",e,o(i))},resize:function(t,e){s._trigger("onResize",t,o(e))},stop:function(e,i){t(this).removeClass("om-dialog-resizing"),n.height=t(this).height(),n.width=t(this).width(),s._trigger("onResizeStop",e,o(i)),t.om.omDialog.overlay.resize()}}).css("position",a).find(".om-resizable-se").addClass("om-icon om-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,o=[],s=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(o=e.split?e.split(" "):[e[0],e[1]],1===o.length&&(o[1]=o[0]),t.each(["left","top"],function(t,e){+o[t]===o[t]&&(s[t]=o[t],o[t]=e)}),e={my:o.join(" "),at:o.join(" "),offset:s.join(" ")}),e=t.extend({},t.om.omDialog.prototype.options.position,e)):e=t.om.omDialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(t.extend({of:window},e)),i||this.uiDialog.hide()},_setOptions:function(e){var i=this,n={},a=!1;t.each(e,function(t,e){i._setOption(t,e),t in o&&(a=!0),t in s&&(n[t]=e)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option",n)},_setOption:function(e,o){var s=this,n=s.uiDialog;switch(e){case"buttons":s._createButtons(o);break;case"closeText":s.uiDialogTitlebarCloseText.text(""+o);break;case"dialogClass":n.removeClass(s.options.dialogClass).addClass(i+o);break;case"disabled":o?n.addClass("om-dialog-disabled"):n.removeClass("om-dialog-disabled");break;case"draggable":var a=n.is(":data(draggable)");a&&!o&&n.omDraggable("destroy"),!a&&o&&s._makeDraggable();break;case"position":s._position(o);break;case"resizable":var r=n.is(":data(resizable)");r&&!o&&n.omResizable("destroy"),r&&"string"==typeof o&&n.omResizable("option","handles",o),r||o===!1||s._makeResizable(o);break;case"title":t(".om-dialog-title",s.uiDialogTitlebar).html(""+(o||"&#160;"))}t.OMWidget.prototype._setOption.apply(s,arguments)},_size:function(){var e,i,o=this.options,s=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),o.minWidth>o.width&&(o.width=o.minWidth),e=this.uiDialog.css({height:"auto",width:o.width}).height(),i=Math.max(0,o.minHeight-e),"auto"===o.height)if(t.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var n=this.element.css("height","auto").height();s||this.uiDialog.hide(),this.element.height(Math.max(n,i))}else this.element.height(Math.max(o.height-e,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option","minHeight",this._minHeight())}}),t.extend(t.om.omDialog,{version:"2.1",uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.om.omDialog.overlay.create(e)}}),t.extend(t.om.omDialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){t.om.omDialog.overlay.instances.length&&t(document).bind(t.om.omDialog.overlay.events,function(e){return t(e.target).zIndex()<t.om.omDialog.overlay.maxZ?!1:void 0})},1),t(document).bind("keydown.dialog-overlay",function(i){e.options.closeOnEscape&&i.keyCode&&i.keyCode===t.om.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}),t(window).bind("resize.dialog-overlay",t.om.omDialog.overlay.resize));var i=(this.oldInstances.pop()||t("<div></div>").addClass("om-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return t.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(e){e.parent().unbind(this.__removeBind);var i=t.inArray(e,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.remove();var o=0;t.each(this.instances,function(){o=Math.max(o,this.css("z-index"))}),this.maxZ=o},height:function(){var e,i;return t.browser.msie&&t.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>e?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,i;return t.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>e?t(window).width()+"px":e+"px"):t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.om.omDialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.om.omDialog.overlay.width(),height:t.om.omDialog.overlay.height()})}}),t.extend(t.om.omDialog.overlay.prototype,{destroy:function(){t.om.omDialog.overlay.destroy(this.$el)}})}(jQuery);var swfobject=function(){function t(){if(!$){try{var t=A.getElementsByTagName("body")[0].appendChild(g("span"));t.parentNode.removeChild(t)}catch(e){return}$=!0;for(var i=O.length,o=0;i>o;o++)O[o]()}}function e(t){$?t():O[O.length]=t}function i(t){if(typeof W.addEventListener!=P)W.addEventListener("load",t,!1);else if(typeof A.addEventListener!=P)A.addEventListener("load",t,!1);else if(typeof W.attachEvent!=P)v(W,"onload",t);else if("function"==typeof W.onload){var e=W.onload;W.onload=function(){e(),t()}}else W.onload=t}function o(){M?s():n()}function s(){var t=A.getElementsByTagName("body")[0],e=g(I);e.setAttribute("type",z);var i=t.appendChild(e);if(i){var o=0;!function(){if(typeof i.GetVariable!=P){var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),U.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(10>o)return o++,void setTimeout(arguments.callee,10);t.removeChild(e),i=null,n()}()}else n()}function n(){var t=N.length;if(t>0)for(var e=0;t>e;e++){var i=N[e].id,o=N[e].callbackFn,s={success:!1,id:i};if(U.pv[0]>0){var n=f(i);if(n)if(!b(N[e].swfVersion)||U.wk&&U.wk<312)if(N[e].expressInstall&&r()){var h={};h.data=N[e].expressInstall,h.width=n.getAttribute("width")||"0",h.height=n.getAttribute("height")||"0",n.getAttribute("class")&&(h.styleclass=n.getAttribute("class")),n.getAttribute("align")&&(h.align=n.getAttribute("align"));for(var c={},u=n.getElementsByTagName("param"),m=u.length,p=0;m>p;p++)"movie"!=u[p].getAttribute("name").toLowerCase()&&(c[u[p].getAttribute("name")]=u[p].getAttribute("value"));l(h,c,i,o)}else d(n),o&&o(s);else w(i,!0),o&&(s.success=!0,s.ref=a(i),o(s))}else if(w(i,!0),o){var g=a(i);g&&typeof g.SetVariable!=P&&(s.success=!0,s.ref=g),o(s)}}}function a(t){var e=null,i=f(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=P)e=i;else{var o=i.getElementsByTagName(I)[0];o&&(e=o)}return e}function r(){return!V&&b("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function l(t,e,i,o){V=!0,D=o||null,T={success:!1,id:i};var s=f(i);if(s){"OBJECT"==s.nodeName?(x=h(s),C=null):(x=s,C=i),t.id=H,(typeof t.width==P||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==P||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),A.title=A.title.slice(0,47)+" - Flash Player Installation";var n=U.ie&&U.win?"ActiveX":"PlugIn",a="MMredirectURL="+W.location.toString().replace(/&/g,"%26")+"&MMplayerType="+n+"&MMdoctitle="+A.title;if(typeof e.flashvars!=P?e.flashvars+="&"+a:e.flashvars=a,U.ie&&U.win&&4!=s.readyState){var r=g("div");i+="SWFObjectNew",r.setAttribute("id",i),s.parentNode.insertBefore(r,s),s.style.display="none",function(){4==s.readyState?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}c(t,e,i)}}function d(t){if(U.ie&&U.win&&4!=t.readyState){var e=g("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(h(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(h(t),t)}function h(t){var e=g("div");if(U.win&&U.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(I)[0];if(i){var o=i.childNodes;if(o)for(var s=o.length,n=0;s>n;n++)1==o[n].nodeType&&"PARAM"==o[n].nodeName||8==o[n].nodeType||e.appendChild(o[n].cloneNode(!0))}}return e}function c(t,e,i){var o,s=f(i);if(U.wk&&U.wk<312)return o;if(s)if(typeof t.id==P&&(t.id=i),U.ie&&U.win){var n="";for(var a in t)t[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?e.movie=t[a]:"styleclass"==a.toLowerCase()?n+=' class="'+t[a]+'"':"classid"!=a.toLowerCase()&&(n+=" "+a+'="'+t[a]+'"'));var r="";for(var l in e)e[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+e[l]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+n+">"+r+"</object>",B[B.length]=t.id,o=f(t.id)}else{var d=g(I);d.setAttribute("type",z);for(var h in t)t[h]!=Object.prototype[h]&&("styleclass"==h.toLowerCase()?d.setAttribute("class",t[h]):"classid"!=h.toLowerCase()&&d.setAttribute(h,t[h]));

for(var c in e)e[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&u(d,c,e[c]);s.parentNode.replaceChild(d,s),o=d}return o}function u(t,e,i){var o=g("param");o.setAttribute("name",e),o.setAttribute("value",i),t.appendChild(o)}function m(t){var e=f(t);e&&"OBJECT"==e.nodeName&&(U.ie&&U.win?(e.style.display="none",function(){4==e.readyState?p(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function p(t){var e=f(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}function f(t){var e=null;try{e=A.getElementById(t)}catch(i){}return e}function g(t){return A.createElement(t)}function v(t,e,i){t.attachEvent(e,i),j[j.length]=[t,e,i]}function b(t){var e=U.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]?!0:!1}function _(t,e,i,o){if(!U.ie||!U.mac){var s=A.getElementsByTagName("head")[0];if(s){var n=i&&"string"==typeof i?i:"screen";if(o&&(k=null,S=null),!k||S!=n){var a=g("style");a.setAttribute("type","text/css"),a.setAttribute("media",n),k=s.appendChild(a),U.ie&&U.win&&typeof A.styleSheets!=P&&A.styleSheets.length>0&&(k=A.styleSheets[A.styleSheets.length-1]),S=n}U.ie&&U.win?k&&typeof k.addRule==I&&k.addRule(t,e):k&&typeof A.createTextNode!=P&&k.appendChild(A.createTextNode(t+" {"+e+"}"))}}}function w(t,e){if(q){var i=e?"visible":"hidden";$&&f(t)?f(t).style.visibility=i:_("#"+t,"visibility:"+i)}}function y(t){var e=/[\\\"<>\.;]/,i=null!=e.exec(t);return i&&typeof encodeURIComponent!=P?encodeURIComponent(t):t}{var x,C,D,T,k,S,P="undefined",I="object",F="Shockwave Flash",E="ShockwaveFlash.ShockwaveFlash",z="application/x-shockwave-flash",H="SWFObjectExprInst",L="onreadystatechange",W=window,A=document,R=navigator,M=!1,O=[o],N=[],B=[],j=[],$=!1,V=!1,q=!0,U=function(){var t=typeof A.getElementById!=P&&typeof A.getElementsByTagName!=P&&typeof A.createElement!=P,e=R.userAgent.toLowerCase(),i=R.platform.toLowerCase(),o=/win/.test(i?i:e),s=/mac/.test(i?i:e),n=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a=!1,r=[0,0,0],l=null;if(typeof R.plugins!=P&&typeof R.plugins[F]==I)l=R.plugins[F].description,!l||typeof R.mimeTypes!=P&&R.mimeTypes[z]&&!R.mimeTypes[z].enabledPlugin||(M=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof W.ActiveXObject!=P)try{var d=new ActiveXObject(E);d&&(l=d.GetVariable("$version"),l&&(a=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(h){}return{w3:t,pv:r,wk:n,ie:a,win:o,mac:s}}();!function(){U.w3&&((typeof A.readyState!=P&&"complete"==A.readyState||typeof A.readyState==P&&(A.getElementsByTagName("body")[0]||A.body))&&t(),$||(typeof A.addEventListener!=P&&A.addEventListener("DOMContentLoaded",t,!1),U.ie&&U.win&&(A.attachEvent(L,function(){"complete"==A.readyState&&(A.detachEvent(L,arguments.callee),t())}),W==top&&!function(){if(!$){try{A.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}()),U.wk&&!function(){return $?void 0:/loaded|complete/.test(A.readyState)?void t():void setTimeout(arguments.callee,0)}(),i(t)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var t=j.length,e=0;t>e;e++)j[e][0].detachEvent(j[e][1],j[e][2]);for(var i=B.length,o=0;i>o;o++)m(B[o]);for(var s in U)U[s]=null;U=null;for(var n in swfobject)swfobject[n]=null;swfobject=null})}()}return{registerObject:function(t,e,i,o){if(U.w3&&t&&e){var s={};s.id=t,s.swfVersion=e,s.expressInstall=i,s.callbackFn=o,N[N.length]=s,w(t,!1)}else o&&o({success:!1,id:t})},getObjectById:function(t){return U.w3?a(t):void 0},embedSWF:function(t,i,o,s,n,a,d,h,u,m){var p={success:!1,id:i};U.w3&&!(U.wk&&U.wk<312)&&t&&i&&o&&s&&n?(w(i,!1),e(function(){o+="",s+="";var e={};if(u&&typeof u===I)for(var f in u)e[f]=u[f];e.data=t,e.width=o,e.height=s;var g={};if(h&&typeof h===I)for(var v in h)g[v]=h[v];if(d&&typeof d===I)for(var _ in d)typeof g.flashvars!=P?g.flashvars+="&"+_+"="+d[_]:g.flashvars=_+"="+d[_];if(b(n)){var y=c(e,g,i);e.id==i&&w(i,!0),p.success=!0,p.ref=y}else{if(a&&r())return e.data=a,void l(e,g,i,m);w(i,!0)}m&&m(p)})):m&&m(p)},switchOffAutoHideShow:function(){q=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(t,e,i){return U.w3?c(t,e,i):void 0},showExpressInstall:function(t,e,i,o){U.w3&&r()&&l(t,e,i,o)},removeSWF:function(t){U.w3&&m(t)},createCSS:function(t,e,i,o){U.w3&&_(t,e,i,o)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=A.location.search||A.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return y(e);for(var i=e.split("&"),o=0;o<i.length;o++)if(i[o].substring(0,i[o].indexOf("="))==t)return y(i[o].substring(i[o].indexOf("=")+1))}return""},expressInstallCallback:function(){if(V){var t=f(H);t&&x&&(t.parentNode.replaceChild(x,t),C&&(w(C,!0),U.ie&&U.win&&(x.style.display="block")),D&&D(T)),V=!1}}}}();!function(t){function e(e,i){var o=e+"Queue",s=t("#"+o+" .om-fileupload-queueitem").length;if(null==i||isNaN(i)||0>i||i>=s)return!1;var n=t("#"+o+" .om-fileupload-queueitem:eq("+i+")");return n.attr("id").replace(e,"")}t.omWidget("om.omFileUpload",{options:{swf:"/operamasks-ui/ui/om-fileupload.swf",action:"",actionData:{},height:30,width:120,buttonImg:null,multi:!1,autoUpload:!1,fileDataName:"Filedata",method:"POST",queueSizeLimit:999,removeCompleted:!0,fileExt:"*.*",fileDesc:null,sizeLimit:null,onSelect:function(){},onQueueFull:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},upload:function(t){var i=this.element,o=i.attr("id"),s=null,n=(i.attr("id")+"Queue",i.attr("id")+"Uploader");("undefined"==typeof t||(s=e(o,t))!==!1)&&document.getElementById(n).startFileUpload(s,!1)},cancel:function(t){var i=this.element,o=(i.attr("id"),null),s=(i.attr("id")+"Queue",i.attr("id")+"Uploader");if("undefined"!=typeof t){if(isNaN(t))o=t;else if((o=e(i.attr("id"),t))===!1)return;document.getElementById(s).cancelFileUpload(o,!0,!0,!1)}else document.getElementById(s).clearFileUploadQueue(!1)},_setOption:function(e,i){var o=document.getElementById(this.element.attr("id")+"Uploader");if("actionData"==e){var s="";for(var n in i)s+="&"+n+"="+i[n];for(var a=document.cookie.split(";"),r=0;r<a.length;r++)""!==a[r]&&(s+="&"+a[r]);return i=encodeURI(s.substr(1)),void o.updateSettings(e,i)}var l=["buttonImg","buttonText","fileDesc","fileExt","height","action","sizeLimit","width"];-1!=t.inArray(e,l)&&o.updateSettings(e,i)},_create:function(){var e=this,i=this.element,o=t.extend({},this.options);o.wmode="opaque",o.expressInstall=null,o.displayData="percentage",o.folder="",o.simUploadLimit=1,o.scriptAccess="sameDomain",o.queueID=!1,o.onInit=function(){},o.onSelectOnce=function(){},o.onClearQueue=function(){},o.id=this.element.attr("id"),t(i).data("settings",o);var s=location.pathname;s=s.split("/"),s.pop(),s=s.join("/")+"/";var n={};n.omFileUploadID=o.id,n.pagepath=s,o.buttonImg&&(n.buttonImg=escape(o.buttonImg)),n.buttonText=encodeURI(t.om.lang._get(o,"omFileUpload","buttonText")),o.rollover&&(n.rollover=!0),n.action=o.action,n.folder=escape(o.folder);for(var a="",r=document.cookie.split(";"),l=0;l<r.length;l++)a+="&"+r[l];if(o.actionData)for(var d in o.actionData)a+="&"+d+"="+o.actionData[d];n.actionData=escape(encodeURI(a.substr(1))),n.width=o.width,n.height=o.height,n.wmode=o.wmode,n.method=o.method,n.queueSizeLimit=o.queueSizeLimit,n.simUploadLimit=o.simUploadLimit,o.hideButton&&(n.hideButton=!0),o.fileDesc&&(n.fileDesc=o.fileDesc),o.fileExt&&(n.fileExt=o.fileExt),o.multi&&(n.multi=!0),o.autoUpload&&(n.autoUpload=!0),o.sizeLimit&&(n.sizeLimit=o.sizeLimit),o.checkScript&&(n.checkScript=o.checkScript),o.fileDataName&&(n.fileDataName=o.fileDataName),o.queueID&&(n.queueID=o.queueID),o.onInit()!==!1&&(i.css("display","none"),i.after('<div id="'+i.attr("id")+'Uploader"></div>'),swfobject.embedSWF(o.swf,o.id+"Uploader",o.width,o.height,"9.0.24",o.expressInstall,n,{quality:"high",wmode:o.wmode,allowScriptAccess:o.scriptAccess},{},function(t){"function"==typeof o.onSWFReady&&t.success&&o.onSWFReady()}),0==o.queueID?t("#"+i.attr("id")+"Uploader").after('<div id="'+i.attr("id")+'Queue" class="om-fileupload-queue"></div>'):t("#"+o.queueID).addClass("om-fileupload-queue")),"function"==typeof o.onOpen&&i.bind("omFileUploadOpen",o.onOpen),i.bind("omFileUploadSelect",{action:o.onSelect,queueID:o.queueID},function(i,o,s){if(e._trigger("onSelect",i,o,s)!==!1){var n=.01*Math.round(s.size/1024*100),a="KB";n>1e3&&(n=.01*Math.round(.001*n*100),a="MB");var r=n.toString().split(".");n=r.length>1?r[0]+"."+r[1].substr(0,2):r[0],fileName=s.name.length>20?s.name.substr(0,20)+"...":s.name,queue="#"+t(this).attr("id")+"Queue",i.data.queueID&&(queue="#"+i.data.queueID),t(queue).append('<div id="'+t(this).attr("id")+o+'" class="om-fileupload-queueitem">                            <div class="cancel" onclick="$(\'#'+t(this).attr("id")+"').omFileUpload('cancel','"+o+'\')">                            </div>                            <span class="fileName">'+fileName+" ("+n+a+')</span><span class="percentage"></span>                            <div class="om-fileupload-progress">                                <div id="'+t(this).attr("id")+o+'ProgressBar" class="om-fileupload-progressbar"><!--Progress Bar--></div>                            </div>                        </div>')}}),i.bind("omFileUploadSelectOnce",{action:o.onSelectOnce},function(i,s){e._trigger("onSelectOnce",i,s),o.autoUpload&&t(this).omFileUpload("upload")}),i.bind("omFileUploadQueueFull",{action:o.onQueueFull},function(i,o){e._trigger("onQueueFull",i,o)!==!1&&alert(t.om.lang.omFileUpload.queueSizeLimitMsg+o+".")}),i.bind("omFileUploadCancel",{action:o.onCancel},function(i,o,s,n,a,r){if(e._trigger("onCancel",i,o,s,n)!==!1&&a){var l=1==r?0:250;t("#"+t(this).attr("id")+o).fadeOut(l,function(){t(this).remove()})}}),i.bind("omFileUploadClearQueue",{action:o.onClearQueue},function(i,s){var n=o.queueID?o.queueID:t(this).attr("id")+"Queue";s&&t("#"+n).find(".om-fileupload-queueitem").remove(),e._trigger("onClearQueue",i,s)!==!1&&t("#"+n).find(".om-fileupload-queueitem").each(function(){var e=t(".om-fileupload-queueitem").index(this);t(this).delay(100*e).fadeOut(250,function(){t(this).remove()})})});var h=[];i.bind("omFileUploadError",{action:o.onError},function(i,o,s,n){if(e._trigger("onError",i,o,s,n)!==!1){var a=new Array(o,s,n);h.push(a),t("#"+t(this).attr("id")+o).find(".percentage").text(" - "+n.type+" Error"),t("#"+t(this).attr("id")+o).find(".om-fileupload-progress").hide(),t("#"+t(this).attr("id")+o).addClass("om-fileupload-error")}}),"function"==typeof o.onUpload&&i.bind("omFileUploadUpload",o.onUpload),i.bind("omFileUploadProgress",{action:o.onProgress,toDisplay:o.displayData},function(i,o,s,n){e._trigger("onProgress",i,o,s,n)!==!1&&(t("#"+t(this).attr("id")+o+"ProgressBar").animate({width:n.percentage+"%"},250,function(){100==n.percentage&&t(this).closest(".om-fileupload-progress").fadeOut(250,function(){t(this).remove()})}),"percentage"==i.data.toDisplay&&(displayData=" - "+n.percentage+"%"),"speed"==i.data.toDisplay&&(displayData=" - "+n.speed+"KB/s"),null==i.data.toDisplay&&(displayData=" "),t("#"+t(this).attr("id")+o).find(".percentage").text(displayData))}),i.bind("omFileUploadComplete",{action:o.onComplete},function(i,s,n,a,r){e._trigger("onComplete",i,s,n,unescape(a),r)!==!1&&(t("#"+t(this).attr("id")+s).find(".percentage").text(" - Completed"),o.removeCompleted&&t("#"+t(i.target).attr("id")+s).fadeOut(250,function(){t(this).remove()}),t("#"+t(i.target).attr("id")+s).addClass("completed"))}),"function"==typeof o.onAllComplete&&i.bind("omFileUploadAllComplete",{action:o.onAllComplete},function(t,i){e._trigger("onAllComplete",t,i)!==!1&&(h=[])})}}),t.om.lang.omFileUpload={queueSizeLimitMsg:"文件上传队列已满，数量不能超过",buttonText:"选择文件"}}(jQuery),function(t){t.omWidget("om.omItemSelector",{options:{width:"300px",height:"317px",dataSource:[],lazyLoad:!1,value:[],clientFormatter:!1,autoSort:!1,preProcess:function(t){return t},onError:jQuery.noop,onSuccess:jQuery.noop,onBeforeItemSelect:jQuery.noop,onBeforeItemDeselect:jQuery.noop,onItemSelect:jQuery.noop,onItemDeselect:jQuery.noop},_create:function(){this.element.addClass("om-itemselector om-widget").html('<div class="om-itemselector-leftpanel om-itemselector-panel"></div><div class="om-itemselector-toolbar om-itemselector-panel"></div><div class="om-itemselector-rightpanel om-itemselector-panel"></div>');var e=t(".om-itemselector-panel",this.element),i=t("<h2></h2>").attr({axis:"checkboxCol",align:"center"}).append(t('<div class="header"><span class="checkbox"/><span class="om-itemselector-title"/></div>'));this.leftPanel=e.eq(0).append(i).append('<div class="om-itemselector-items"><dl></dl></div>'),this.toolbar=t("<div></div>").appendTo(e.eq(1)),this.rightPanel=e.eq(2).append(i.clone()).append('<div class="om-itemselector-items"><dl></dl></div>')},_init:function(){var e=this.options,i=e.dataSource,o=parseInt(e.width),s=parseInt(e.height),n=(o-60)/2,a=s-2;if(this.leftPanel.css({width:n+"px",height:a+"px"}).find(".om-itemselector-title").html(t.om.lang._get(e,"omItemSelector","availableTitle")),this.rightPanel.css({width:n+"px",height:a+"px"}).find(".om-itemselector-title").html(t.om.lang._get(e,"omItemSelector","selectedTitle")),this.toolbar.css({position:"absolute",top:"35%",left:"25%"}).parent().css({height:a+"px",position:"relative"}),this.element.css({height:e.height}),this._buildToolbar(),this._resizePanel(),this._bindEvents(),"string"==typeof i){var r=this;e.lazyLoad?(r.remoteUrl=i,r._buildValueList()):t.ajax({url:i,type:"GET",dataType:"json",success:function(t,i){r._trigger("onSuccess",null,t,i)!==!1&&(t=e.preProcess(t),e.dataSource=t,r._buildList())},error:function(t,e,i){r._trigger("onError",null,t,e,i)}})}else this._buildList()},_buildToolbar:function(){for(var e="",i=["add","space","remove"],o=0,s=i.length;s>o;o++){var n=i[o];e+='<div class="om-icon om-itemselector-tbar-'+n+'" title="'+(t.om.lang._get({},"omItemSelector",n+"IconTip")||"")+'"></div>'}this.toolbar.html(e)},_resizePanel:function(){var e=this,i=e.leftPanel,o=e.rightPanel,s=t(".om-itemselector-items",i),n=t(".om-itemselector-items",o),a=i.parent().innerHeight()-s.offset().top+i.offset().top,r=(t("tr",e.element).innerWidth()-e.toolbar.outerWidth())/2,l=i.outerWidth(r).innerWidth();s.outerHeight(a).width(l),n.outerHeight(a).width(l),s.children("dl").outerHeight(a),n.children("dl").outerHeight(a),e.element.data("dltop",t(".om-itemselector-items >dl",i).offset().top)},_buildValueList:function(){var e=this.options;self=this,dataSource=e.dataSource,value=e.value,postValue=value.join(","),fmt=e.clientFormatter,rightHtml="",inArray=function(t,e){for(var i=0,o=e.length;o>i;i++)if(t.value===e[i])return!0;return!1},buildHtml=fmt?function(t,e){return'<dt _index="'+t+'"><span class="checkbox"/>'+fmt(e,t)+"</dt>"}:function(t,e){return'<dt _index="'+t+'"><span class="checkbox"/>'+e.text+"</dt>"},t.ajax({url:dataSource,type:"POST",data:{values:postValue},dataType:"json",success:function(i,o){if(self._trigger("onSuccess",null,i,o)!==!1){i=e.preProcess(i),e.dataSource=i;var s=[];t.isArray(i)&&jQuery.isArray(value)&&t.each(i,function(t,e){inArray(e,value)&&(s.push(i[t]),rightHtml+=buildHtml(t,e))}),t(".om-itemselector-items>dl",self.rightPanel).html(rightHtml),self.element.data("valueData",s);var n=t(".om-itemselector-items"),a=t(">dl>dt",n).outerHeight(),r=n.outerHeight(),l=a-r%a;n.outerHeight(r+l)}},error:function(t,e,i){self._trigger("onError",null,t,e,i)}})},_buildList:function(){var e=this.options;if(dataSource=e.dataSource,value=e.value,fmt=e.clientFormatter,leftHtml="",rightHtml="",valueData=[],storeData=this.element.data("valueData"),inArray=function(t,e){for(var i=0,o=e.length;o>i;i++)if(t.value==e[i])return!0;return!1},buildHtml=fmt?function(t,e){return'<dt _index="'+t+'"><span class="checkbox"/>'+fmt(e,t)+"</dt>"}:function(t,e){return'<dt _index="'+t+'"><span class="checkbox"/>'+e.text+"</dt>"},t.isArray(dataSource)&&jQuery.isArray(value)){if(void 0!=storeData){var i=[],o=[];t.each(storeData,function(){i.push(this.value)});for(var s=0;s<dataSource.length;s++)inArray(dataSource[s],i)||o.push(dataSource[s]);t.merge(o,storeData)}t.each(dataSource,function(t,e){inArray(e,value)?(rightHtml+=buildHtml(t,e),valueData.push(e)):leftHtml+=buildHtml(t,e)})}this.element.data("valueData",valueData),t(".om-itemselector-items>dl",this.leftPanel).html(leftHtml),t(".om-itemselector-items>dl",this.rightPanel).html(rightHtml);var n=t(".om-itemselector-items"),a=t(">dl>dt",n).outerHeight(),r=n.outerHeight(),l=a-r%a;n.outerHeight(r+l)},_bindEvents:function(){var e=this,i=e.toolbar;e.leftPanel.delegate(".om-itemselector-items>dl>dt","click.omItemSelector",function(i){t(this).toggleClass("om-state-highlight"),e._refreshHeaderCheckbox(e.leftPanel)}),e.rightPanel.delegate(".om-itemselector-items>dl>dt","click",function(i){t(this).toggleClass("om-state-highlight"),e._refreshHeaderCheckbox(e.rightPanel)}),this.leftPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){t(".om-itemselector-items>dl>dt",e.element).removeClass("om-state-highlight"),t(this).addClass("om-state-highlight"),e._moveItemsToTarget(".om-state-highlight",!0)}),this.rightPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){t(".om-itemselector-items>dl>dt",e.element).removeClass("om-state-highlight"),t(this).addClass("om-state-highlight"),e._moveItemsToTarget(".om-state-highlight",!1)}),t(".om-itemselector-tbar-add",i).click(function(){e._moveItemsToTarget(".om-state-highlight",!0)}),t(".om-itemselector-tbar-remove",i).click(function(){e._moveItemsToTarget(".om-state-highlight",!1)}),t(".header span.checkbox",e.leftPanel).click(function(){var i=e.leftPanel,o=t(".om-itemselector-items>dl>dt",i);t(this).toggleClass("selected"),t("div.om-itemselector-up:visible",i).length>0&&(o=t(e._getPageItems(i,o))),t(this).hasClass("selected")?o.addClass("om-state-highlight"):o.removeClass("om-state-highlight")}),t(".header span.checkbox",e.rightPanel).click(function(){var i=e.rightPanel,o=t(".om-itemselector-items>dl>dt",i);t(this).toggleClass("selected"),t("div.om-itemselector-up:visible",i).length>0&&(o=t(e._getPageItems(i,o))),t(this).hasClass("selected")?o.addClass("om-state-highlight"):o.removeClass("om-state-highlight")})},_refreshHeaderCheckbox:function(e){var i=t(".om-itemselector-items>dl>dt",e),o=i.filter(".om-state-highlight").length;t(".header span.checkbox",e).toggleClass("selected",o>0&&i.length===o)},select:function(e){t.isArray(indexes)||(indexes=[indexes]);for(var i=0,o=e.length;o>i;i++)t('.om-itemselector-items>dl>dt[_index="'+e[i]+'"]').addClass("om-state-highlight")},_sortItems:function(e){var i,o=t(".om-itemselector-items>dl>dt",e),s=(this.options.clientFormatter,[]),n="";0!=o.length&&(o.each(function(){s.push({_index:t(this).attr("_index"),text:t(this).html()})}),i=s.sort(function(t,e){return t._index-e._index}),t.each(i,function(t,e){n+='<dt _index="'+e._index+'">'+e.text+"</dt>"}),t(".om-itemselector-items>dl",e).html(n))},_moveItemsToTarget:function(e,i){var o=this,s=i?this.leftPanel:this.rightPanel,n=t(".om-itemselector-items>dl>dt"+e,s);if(0!=n.size()){var a=i?this.rightPanel:this.leftPanel,r=this.options,l=[];if(n.each(function(){l.push(r.dataSource[t(this).attr("_index")])}),i){if(o._trigger("onBeforeItemSelect",null,l)===!1)return;n.appendTo(t(".om-itemselector-items>dl",a)).removeClass("om-state-highlight"),o._sortItems(a),o._trigger("onItemSelect",null,l)}else{if(o._trigger("onBeforeItemDeselect",null,l)===!1)return;n.appendTo(t(".om-itemselector-items>dl",a)).removeClass("om-state-highlight"),o._sortItems(a),o._trigger("onItemDeselect",null,l)}o._refreshHeaderCheckbox(s)}},value:function(e){if(0==arguments.length){var i=this.options,o=t(".om-itemselector-items>dl>dt",this.rightPanel),s=[];return o.each(function(){s.push(i.dataSource[t(this).attr("_index")].value)}),s}t.isArray(e)&&(this.options.value=e,this._buildList())},remoteData:function(e){var i=this.options,o=this;t.ajax({url:o.remoteUrl,type:"POST",data:e,dataType:"json",success:function(t,e){o._trigger("onSuccess",null,t,e)!==!1&&(t=i.preProcess(t),i.dataSource=t,o._buildList())},error:function(t,e,i){o._trigger("onError",null,t,e,i)}})}}),t.om.lang.omItemSelector={availableTitle:"可选项",selectedTitle:"已选项",addIconTip:"右移",removeIconTip:"左移"}}(jQuery),function(t){t.omWidget("om.omMenu",{options:{contextMenu:!1,maxWidth:200,minWidth:100,dataSource:"local"},show:function(e){var i,o,s=this,n=s.options,a=s.element,r=t(e).offset();if(n.contextMenu)i=e.pageY,o=e.pageX,e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0;else{var l=parseInt(t(e).css("borderBottomWidth").replace("px",""));i=r.top+t(e).height()+("NaN"!=l?l:0)+1,o=r.left+1}for(var d=a.parent();"static"==d.css("position")&&"BODY"!=d[0].nodeName;)d=d.parent();i-=d.offset().top,o-=d.offset().left,o+a.outerWidth()>document.documentElement.clientWidth&&(o=o-a.outerWidth()-20),t(a).css({top:i+1,left:o,"z-index":1e3}).show(),t(a).children("ul.om-menu").show();var h=.7*t(a).width();t(a).children("ul.om-menu").children().each(function(e,i){t(i).find("span:first").hasClass("om-menu-item-sep")?t(i).find("span:first").width("98%"):t(i).find("span:first").width()>h&&t(i).find("span:first").width(t(i).attr("aria-haspopup")?h-15:h)})},hide:function(){this._hide()},disableItem:function(t){this.element.find("#"+t).addClass("om-state-disabled").unbind(".menuItem")},enableItem:function(t){var e=this,i=e.element,o=i.find("#"+t);o.removeClass("om-state-disabled"),e._bindLiEvent(o)},destroy:function(){for(var e,i=t(document);e=this.globalEvent.pop();)i.unbind(".omMenu",e)},_create:function(){var t=this,e=t.options,i=t.element,o=e.dataSource;if(i.addClass("om-menu-container om-menu-content om-corner-all"),i.css("position","absolute"),o)if("local"!=o)"string"==typeof o?t._ajaxLoad(i,o):"object"==typeof o&&(i.append(t._appendNodes.apply(t,[o])),t._bindEvent());else{var s=i.children("ul").addClass("om-menu");t._parseDomMenu(s),t._bindEvent()}},_init:function(){var e=this.options,i=this.element;i.css({minWidth:e.minWidth-10,maxWidth:e.maxWidth-10}),t.support.boxModel&&t.support.leadingWhitespace&&i.css("width",e.maxWidth-10)},_ajaxLoad:function(e,i){var o=this;t.ajax({url:i,method:"POST",dataType:"json",success:function(t){e.append(o._appendNodes.apply(o,[t])),o._bindEvent()}})},_appendNodes:function(e,i){var o=this,s=[],n=void 0==i?"om-menu":"om-menu-content",a=void 0==i?"block":"none",r=void 0==i?"om-menu-icon":"om-menu-icon om-menu-icon-child";s.push('<ul class="'+n+' om-corner-all" style="display:'+a+';">');var l=[];return t(e).each(function(e,i){null!=i.children?(l.push(i.disabled===!0||"true"==i.disabled?'<li id="'+i.id+'" aria-haspopup="true"  class="om-state-disabled">':'<li id="'+i.id+'"  aria-haspopup="true">'),l.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),i.icon?l.push('<span class="'+r+i.icon+'"></span>'):null,l.push(i.icon?"<span>"+i.label+"</span>":'<span style="margin-left:2em;">'+i.label+"</span>"),l.push('<span class="ui-icon-span" role="popup"></span>'),l.push("</a>"),l.push(o._appendNodes(i.children,e++)),l.push("</li>")):(l.push(i.disabled===!0||"true"==i.disabled?'<li id="'+i.id+'"  class="om-state-disabled">':'<li id="'+i.id+'" >'),l.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),i.icon?l.push('<span class="'+r+i.icon+'"></span>'):null,l.push(i.icon?"<span>"+i.label+"</span>":'<span style="margin-left:2em;">'+i.label+"</span>"),l.push("</a>"),l.push("</li>")),("true"==i.seperator||1==i.seperator)&&l.push('<li class="om-menu-sep-li"  ><span class="om-menu-item-sep">&nbsp;</span></li>');var s=t(o.element).attr("id")+"_"+i.id;t(o.element).data(s,i)}),s.push(l.join("")),s.push("</ul>"),s.join("")},_parseDomMenu:function(e){"true"==e.parent().attr("aria-haspopup")&&e.addClass("om-menu-content om-corner-all"),e.css("display","none");for(var i=e.children(),o=0;o<i.length;o++){var s=t(i[o]),n=s.children("ul");n.length>0&&(s.attr("aria-haspopup","true"),s.find("span[role='popup']").addClass("ui-icon-span"),this._parseDomMenu(n)),s.find("a").addClass("om-corner-all om-menu-indicator"),s.find("img").addClass("om-menu-icon")}},_showChildren:function(e){var i=this;if(e&&e.length>0){var o=e.children("ul").eq(0);o.css({minWidth:this.options.minWidth,top:e.position().top});var s=e.width();2*s+e.offset().left>document.documentElement.clientWidth&&(s=-s),o.css("left",s),o.show(),o.children().each(function(e,s){t(s).find("span:first").hasClass("om-menu-item-sep")?t(s).find("span:first").width("98%"):(o.width()>i.options.maxWidth?(o.width(i.options.maxWidth),width=.6*i.options.maxWidth):(void 0==o.attr("hasShow")&&(o.width(o.find("li:eq(0)>a:eq(0)").width()+15),o.attr("hasShow",!0)),width=.6*o.width()),t(s).find("span:first").width(width))})}},_hideChildren:function(t){t.children("ul").eq(0).hide()},_bindLiEvent:function(e){var i=this,o=i.element,s=i.options;t(e).bind("mouseenter.menuItem",function(){var e=t(this),o=e.parent().width();e.addClass("om-menu-item-hover"),t.browser.msie&&"9.0"==t.browser.version&&e.parent().width(o),e.attr("aria-haspopup")&&setTimeout(function(){i._showChildren(e)},200)}).bind("mouseleave.menuItem",function(){var e=t(this);e.removeClass("om-menu-item-hover"),setTimeout(function(){e.children("ul").hide()},200)}).bind("mousedown.menuItem",function(e){var n=t(o).data(t(o).attr("id")+"_"+this.id);s.onSelect&&i._trigger("onSelect",e,n)})},_bindEvent:function(){for(var e,i=this,o=i.element,s=o.find("ul"),n=o.find("li"),a=t(document),r=0;r<n.length;r++)t(n[r]).hasClass("om-state-disabled")||i._bindLiEvent(n[r]);for(var l=0;l<s.length;l++)t(s[l]).bind("mouseleave.menuContainer",function(){var e=t(this);"true"==e.parent().attr("aria-haspopup")&&e.hide()});this.globalEvent=[],a.bind("mousedown.omMenu",e=function(){i._hide()}),this.globalEvent.push(e),a.bind("keyup.omMenu",e=function(e){var s=e.keyCode,n=t.om.keyCode;switch(s){case n.DOWN:i._selectNext();break;case n.UP:i._selectPrev();break;case n.LEFT:i._hideRight();break;case n.RIGHT:i._showRight();break;case n.ENTER:"block"==o.css("display")&&i._backfill(o),i._hide();break;case n.ESCAPE:i._hide()}}),this.globalEvent.push(e),a.bind("keydown.omMenu",e=function(t){t.keyCode>=37&&t.keyCode<=40&&t.preventDefault()}),this.globalEvent.push(e)},_hide:function(){var e=this,i=e.element;i.find("ul").css("display","none"),i.find("li.om-menu-item-hover").each(function(e,i){t(i).removeClass("om-menu-item-hover")}),i.hide()},_findNext:function(t){for(var e,i=t;0!==(e=t.next("li")).length;){if(!e.hasClass("om-menu-sep-li")&&!e.hasClass("om-state-disabled"))return e;t=e}for(var o=i.parent().find("li:first");0!==o.length&&o!=i;){if(!o.hasClass("om-menu-sep-li")&&!o.hasClass("om-state-disabled"))return o;o=o.next("li")}},_findPrev:function(t){for(var e,i=t;0!==(e=t.prev("li")).length;){if(!e.hasClass("om-menu-sep-li")&&!e.hasClass("om-state-disabled"))return e;t=e}for(var o=i.parent().children(),s=o.eq(o.length-1);0!==s.length&&s!=i;){if(!s.hasClass("om-menu-sep-li")&&!s.hasClass("om-state-disabled"))return s;s=s.prev("li")}},_selectNext:function(){var t,e=this,i=e.element,o=i.find("li.om-menu-item-hover"),s=o.eq(o.length-1);if(0==o.length){for(t=i.find("li").eq(0);t.hasClass("om-state-disabled");)t=t.next("li");t.addClass("om-menu-item-hover")}else{if(t=e._findNext(s),t.length<=0)return;t.addClass("om-menu-item-hover"),s.removeClass("om-menu-item-hover")}this._hideChildren(s),this._showChildren(t)},_selectPrev:function(){var t,e=this,i=e.element,o=i.find("li.om-menu-item-hover"),s=o.eq(o.length-1);if(t=i.find("ul.om-menu > li"),0==o.length){for(var n=t.eq(t.length-1),a=1;n.hasClass("om-state-disabled");)n=t.eq(t.length-a++);(t=n).addClass("om-menu-item-hover")}else{if(t=e._findPrev(s),t.length<=0)return;t.addClass("om-menu-item-hover"),s.removeClass("om-menu-item-hover")}this._hideChildren(s),this._showChildren(t)},_hideRight:function(){var t=this,e=t.element,i=e.find("li.om-menu-item-hover"),o=i.eq(i.length-1);o.removeClass("om-menu-item-hover"),t._hideChildren(o)},_showRight:function(){var t=this,e=t.element,i=null,o=e.find("li.om-menu-item-hover"),s=o.eq(o.length-1);"true"==s.attr("aria-haspopup")&&(i=s.children("ul").find("li").eq(0),i.addClass("om-menu-item-hover")),t._showChildren(i)},_backfill:function(t){var e=t.find("li.om-menu-item-hover");e.eq(e.length-1).mousedown()}})}(jQuery),function(t,e){var i='<div class="om-messageBox om-widget om-widget-content om-corner-all" tabindex="-1"><div class="om-messageBox-titlebar om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageBox-title"></span><a href="#" class="om-messageBox-titlebar-close om-corner-tr"><span class="om-icon om-icon-closethick"></span></a></div><div class="om-messageBox-content om-widget-content"><table><tr vailgn="top"><td class="om-messageBox-imageTd"><div class="om-messageBox-image"/>&nbsp;</td><td class="om-message-content-html"></td></tr></table></div><div class="om-messageBox-buttonpane om-widget-content om-corner-bottom om-helper-clearfix"><div class="om-messageBox-buttonset"></div></div></div>',o=function(){if(t.browser.msie&&t.browser.version<7){var e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return i>e?t(window).height():e}return t(document).height()},s=function(){if(t.browser.msie){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return i>e?t(window).width():e}return t(document).width()},n=function(t,e,i,o){t.hasClass("om-messageBox-waiting")||(i?i(o):jQuery.noop(),t.remove(),e.remove())},a=function(e){var a=e.onClose,r=t(i).appendTo(document.body).css("z-index",1500).position({of:window,collision:"fit"}).omDraggable({containment:"document",cursor:"move",handle:".om-messageBox-titlebar"}).hide().keydown(function(e){e.keyCode&&e.keyCode===t.om.keyCode.ESCAPE&&(n(r,l,null,!1),e.preventDefault())}),l=t('<div class="om-widget-overlay"/>').appendTo(document.body).show().css({height:o(),width:s()}),d=r.find("span.om-messageBox-title").html(e.title).next().hover(function(){t(this).addClass("om-state-hover")},function(){t(this).removeClass("om-state-hover")}).focus(function(){t(this).addClass("om-state-focus")}).blur(function(){t(this).removeClass("om-state-focus")}).click(function(t){return n(r,l,null,!1),!1}).bind("mousedown mouseup",function(){t(this).toggleClass("om-state-mousedown")});r.find("div.om-messageBox-image").addClass("om-messageBox-image-"+e.type);var h=e.content;"prompt"==e.type&&(h=h||"",h+='<br/><input id="om-messageBox-prompt-input" type="text"/>'),r.find("td.om-message-content-html").html(h);var c=r.find("div.om-messageBox-buttonset");switch(e.type){case"confirm":c.html('<button id="confirm">确定</button><button id="cancel">取消</button>'),t.fn.omButton&&(c.find("button#confirm").omButton({width:60,onClick:function(t){n(r,l,a,!0)}}),c.find("button#cancel").omButton({width:60,onClick:function(t){n(r,l,a,!1)}}));break;case"prompt":c.html('<button id="confirm">确定</button><button id="cancel">取消</button>'),t.fn.omButton&&(c.find("button#confirm").omButton({width:60,onClick:function(e){var i=a?a(t("#om-messageBox-prompt-input").val()):jQuery.noop();i!==!1&&(r.remove(),l.remove())}}),c.find("button#cancel").omButton({width:60,onClick:function(t){n(r,l,a,!1)}}));break;case"waiting":r.addClass("om-messageBox-waiting"),l.addClass("om-messageBox-waiting"),d.hide(),c.parent().hide(),r.find(">.om-messageBox-content").addClass("no-button om-corner-bottom");break;default:c.html('<button id="confirm">确定</button>'),
t.fn.omButton&&c.find("button#confirm").omButton({width:60,onClick:function(t){n(r,l,a,!0)}})}var u=t("button",c);u.width("100%"),r.show();var m=u.first()[0];m?m.focus():r.focus()};t.omMessageBox={alert:function(t){t=t||{},t.title=t.title||"提示",t.type=t.type||"alert",a(t)},confirm:function(t){t=t||{},t.title=t.title||"确认",t.type="confirm",a(t)},prompt:function(t){t=t||{},t.title=t.title||"请输入",t.type="prompt",a(t)},waiting:function(e){return"close"===e?void t(".om-messageBox-waiting").remove():(e=e||{},e.title=e.title||"请等待",e.type="waiting",void a(e))}}}(jQuery),function(t,e){t.omMessageTip={show:function(e){function i(e){a=setTimeout(function(){t.omMessageTip._close(n)},e)}e=t.extend({title:"提醒",content:"&#160;",type:"alert"},e);var o='<div class="om-messageTip om-widget om-corner-all" tabindex="-1"><div class="om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageTip-title">'+e.title+'</span><a href="#" class="om-messageTip-titlebar-close om-corner-tr"><span class="om-icon-closethick"></span></a></div><div class="om-messageTip-content om-widget-content om-corner-bottom"><div class="om-messageTip-image om-messageTip-image-'+e.type+'"></div><div class="om-messageTip-content-body">'+e.content+"</div></div></div>",s=t(o).appendTo(document.body).css("z-index",3e3).hide(),n={d:s,l:e.onClose};s.find("a.om-messageTip-titlebar-close").bind("mouseenter mouseleave",function(){t(this).toggleClass("om-state-hover")}).bind("focus blur",function(){t(this).toggleClass("om-state-focus")}).bind("mousedown mouseup",function(){t(this).toggleClass("om-state-mousedown")}).click(function(e){return t.omMessageTip._close(n),!1}),s.slideDown("slow");var a=null;return e.timeout&&i(e.timeout),s.bind("mouseover",function(){clearTimeout(a)}).bind("mouseout",function(){a&&i(e.timeout)}),s},_close:function(t){t.d.slideUp("slow"),t.l&&t.l(),setTimeout(function(){t.d.remove()},1e3)}}}(jQuery),function(t){var e=function(t,e,i){var o=t.indexOf(".");if(isNaN(t)&&"."!=t)for(;isNaN(t);)t=t.substring(0,t.length-1);if(!i.allowNegative&&-1!=t.indexOf("-")){var s=t.split("-");t=s.join("")}return!i.allowDecimals&&-1!=o||"."===t.charAt(t.length-1)?t.substring(0,o):(-1!=o&&(t=t.substring(0,o+i.decimalPrecision+1)),t.length>0?parseFloat(t):"")};t.omWidget("om.omNumberField",{options:{allowDecimals:!0,allowNegative:!0,decimalPrecision:2,disabled:!1,onBlur:function(t){},readOnly:!1},_create:function(){var i=this.options,o=this;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled"),this.element.keypress(function(e){null!=e.which||null==e.charCode&&null==e.keyCode||(e.which=null!=e.charCode?e.charCode:e.keyCode);var i=e.which;if(8!==i&&(46!=i||-1!=e.button)&&0!==i){var o=String.fromCharCode(i);t.data(this,"character",o);var s=t.data(this,"allowed");(-1===s.indexOf(o)||-1!==t(this).val().indexOf("-")&&"-"==o||-1!==t(this).val().indexOf(".")&&"."==o)&&e.preventDefault()}}).focus(function(){t(this).addClass("om-state-focus")}).blur(function(s){t(this).removeClass("om-state-focus");var n=t.data(this,"character");this.value=e(this.value,n,i),o._trigger("onBlur",s,this.value)}).keydown(function(t){o._checkLast(this),229===t.which&&t.preventDefault()}).keyup(function(t){o._checkLast(this)}).bind("cut paste",function(t){return!1})},_init:function(){var e=this.element,i=this.options;"boolean"!=typeof i.disabled&&(i.disabled=e.attr("disabled")),i.readOnly&&e.attr("readonly","readonly");t.data(e[0],"character");this._buildAllowChars(),i.disabled?this.disable():this.enable()},_checkLast:function(e){var i=e.value,o=i.length;(i&&-1===t.data(e,"allowed").indexOf(i.charAt(o-1))||i.indexOf(".")!=i.lastIndexOf(".")||i.indexOf("-")!=i.lastIndexOf("-"))&&(e.value=i=i.substring(0,o-- -1))},_buildAllowChars:function(){var e="0123456789";this.options.allowDecimals&&(e+="."),this.options.allowNegative&&(e+="-"),this.options.readOnly&&(e=""),t.data(this.element[0],"allowed",e)},disable:function(){this.element.attr("disabled",!0).addClass("om-numberfield-disabled")},enable:function(){this.element.attr("disabled",!1).removeClass("om-numberfield-disabled")}})}(jQuery),function(t){t.omWidget("om.omProgressbar",{options:{value:0,text:"{value}%",width:"auto",max:100},min:0,_create:function(){var e=this.element;e.addClass("om-progressbar om-widget om-widget-content om-corner-all"),this.textDiv=t("<div class='om-progressbar-text'></div>").appendTo(e),this.valueDiv=t("<div class='om-progressbar-value om-widget-header om-corner-left'></div>").appendTo(e)},_init:function(){var t=this.element.width();"number"==typeof this.options.width&&(t=this.options.width,this.element.width(t)),this.textDiv.width(Math.floor(t)),this.oldValue=this._value(),this._refreshValue()},value:function(t){return void 0===t?this._value():(this.options.value=t,void this._refreshValue())},_value:function(){var t=this.options.value;return"number"!=typeof t&&(t=0),Math.min(this.options.max,Math.max(this.min,t))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var t=this,e=t.value(),i=t.options.onChange,o=t._percentage(),s=t.options.text,n="";t.valueDiv.toggle(e>t.min).toggleClass("om-corner-right",e===t.options.max).width(o.toFixed(0)+"%"),"function"==typeof s?n=s.call(e,e):"string"==typeof s&&(n=s.replace("{value}",e)),t.textDiv.html(n),t.oldValue!==e&&(i&&t._trigger("onChange",null,e,t.oldValue),t.oldValue=e)}})}(jQuery),function(t){var e="om-suggestion-list-row",i="om-state-hover";t.omWidget("om.omSuggestion",{options:{disabled:!1,readOnly:!1,minChars:1,delay:500,cacheSize:10,method:"GET",listMaxHeight:300,queryName:"key",crossDomain:!1,preProcess:function(t,e){return e},onBeforeSuggest:function(t,e){},onSuggesting:function(t,e){},onSuccess:function(t,e,i){},onError:function(t,e,i,o){},onSelect:function(t,e,i,o){}},_create:function(){this.element.addClass("om-suggestion om-widget om-state-default om-state-nobg"),this.dropList=t('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children().first().hide()},_init:function(){var i=this,o=this.options,s=this.element.attr("autocomplete","off"),n=this.dropList;o.minChars<0&&(o.minChars=0),o.cacheSize<0&&(o.cacheSize=0),o.delay<0&&(o.delay=0),o.disabled?this.disable():this.enable(),o.readOnly?s.attr("readonly","readonly"):s.removeAttr("readonly"),s.focus(function(){t(this).addClass("om-state-focus")}).blur(function(){t(this).removeClass("om-state-focus")}).keydown(function(e){e.keyCode==t.om.keyCode.TAB&&n.hide()}).keyup(function(a){var r=a.keyCode,l=t.om.keyCode;switch(r){case l.DOWN:"none"!==n.css("display")?i._selectNext():n.find("."+e).size()>0&&n.show();break;case l.UP:"none"!==n.css("display")?i._selectPrev():n.find("."+e).size()>0&&n.show();break;case l.ENTER:if("none"===n.css("display"))return;return n.hide(),i._triggerOnSelect(a),!1;case l.ESCAPE:n.hide();break;case l.TAB:break;default:if(o.disabled||o.readOnly)return!1;if(o.delay>0){var d=t.data(s,"delayTimer");d&&clearTimeout(d),d=setTimeout(function(){i._suggest()},o.delay),t.data(s,"delayTimer",d)}else i._suggest()}}).mousedown(function(t){t.stopPropagation()}),n.mousedown(function(t){t.stopPropagation()}),t(document).bind("mousedown.omSuggestion",this.globalEvent=function(){n.hide()})},clearCache:function(){t.removeData(this.element,"cache")},showMessage:function(e){var i=this.element,o=this.dropList.empty().css("height","auto");t("<div>"+e+"<div>").appendTo(o),o.parent().css("left",i.offset().left).css("top",i.offset().top+i.outerHeight());var s=this.options.listWidth;s?"auto"!==s&&o.parent().width(s):o.parent().width(i.outerWidth()),o.show();var n=this.options.listMaxHeight;return"auto"!==n&&o.height()>n&&o.height(n).css("overflow","auto"),this},disable:function(){return this.options.disabled=!0,this.element.attr("disabled","disabled").addClass("om-state-disabled")},enable:function(){return this.options.disabled=!1,this.element.removeAttr("disabled").removeClass("om-state-disabled")},setData:function(t){var e=this.options;t&&(e.dataSource=t),e.cacheSize>0&&this.clearCache()},getData:function(){var e=t.data(this.element,"records");return e||null},getDropList:function(){return this.dropList},destroy:function(){t(document).unbind("mousedown.omSuggestion",this.globalEvent),this.dropList.parent().remove()},_clear:function(){return this.element.val(""),this.dropList.find("."+e).removeClass(i)},_selectNext:function(){var t=this.dropList,e=t.find("."+i).index(),o=this._clear();e+=1,e>=o.size()&&(e=0),this._scrollToAndSelect(o,e,t)},_selectPrev:function(){var t=this.dropList,e=t.find("."+i).index(),o=this._clear();e-=1,0>e&&(e=o.size()-1),this._scrollToAndSelect(o,e,t)},_scrollToAndSelect:function(e,o,s){if(!(e.size()<1)){var n=t(e.get(o)).addClass(i),a=n.position().top;if(0>=a)s.scrollTop(s.scrollTop()+a);else{var r=a+n.outerHeight()-s.height();r>0&&s.scrollTop(s.scrollTop()+r)}this._select(o)}},_select:function(e){var i,o,s=this.element,n=t.data(s,"records");n.valueField?(i=n.data[e],o=i[n.valueField]):(i=n[e],o=i),s.val(o),t.data(s,"lastStr",o)},_suggest:function(){var e=this.element,i=e.val(),o=t.data(e,"lastStr");if(!o||o!==i){t.data(e,"lastStr",i);var s=this.options,n=t.data(e,"cache");if(i.length>0&&i.length>=s.minChars){if(n){var a=n[i];if(a)return t.data(e,"records",a),void this._buildDropList(a,i)}if(s.onBeforeSuggest&&this._trigger("onBeforeSuggest",null,i)===!1)return void this.dropList.empty().hide();var r=this,l={url:s.dataSource,type:s.method,dataType:s.crossDomain?"jsonp":"json",data:{},success:function(o,n){var a=s.onSuccess;if(!a||r._trigger("onSuccess",null,o,n)!==!1){var l=s.preProcess;if(l&&(o=l(i,o)),"undefined"==typeof o&&(o=[]),s.cacheSize>0){var d=t.data(e,"cache")||{___keys:[]},h=d.___keys;if(h.length==s.cacheSize){var c=h[0];d.___keys=h.slice(1),d[c]=void 0}d[i]=o,d.___keys.push(i),t.data(e,"cache",d)}t.data(e,"records",o),r._buildDropList(o,i)}},error:function(t,e,i){var o=s.onError;o&&r._trigger("onError",null,t,e,i)}};l.data[s.queryName]=i,t.ajax(l);var d=s.onSuggesting;d&&r._trigger("onSuggesting",null,i)}else this.dropList.empty().hide()}},_buildDropList:function(o,s){var n=this.element,a=this.dropList.empty().css("height","auto"),r=o.valueField?!1:!0,l=this.options.clientFormatter,d=this;r?t(o).each(l?function(t){d._addRow(l(this,t),a)}:function(t){d._addRow(this,a)}):l&&t(o.data).each(function(t){d._addRow(l(this,t),a)});var h=a.find("."+e);if(h.size()>0){a.parent().css("left",parseInt(n.offset().left)).css("top",n.offset().top+n.outerHeight());var c=this.options.listWidth;c?"auto"!==c&&a.parent().width(c):a.parent().width(n.outerWidth()),h.mouseover(function(){h.removeClass(i),t(this).addClass(i)}).mousedown(function(t){var e=a.find("."+i).index();d._select(e),a.hide(),d._triggerOnSelect(t)}),a.show();var u=this.options.listMaxHeight;"auto"!==u&&a.height()>u&&a.height(u).css("overflow","auto"),a.scrollTop(0)}},_addRow:function(i,o){t('<div class="'+e+'">'+i+"</div>").appendTo(o)},_triggerOnSelect:function(e){var o=this.options.onSelect;if(o){var s=this.dropList.find("."+i).index();if(0>s)return;var n,a,r=t.data(this.element,"records");r.valueField?(n=r.data[s],a=n[r.valueField]):(n=r[s],a=n),this._trigger("onSelect",e,n,a,s)}}})}(jQuery),function(){function t(t,e){return e.content&&$(t).html(e.content),$(t).omPanel(e)}function e(){return $.browser.msie&&7==parseInt($.browser.version)}var i="om-tabs-"+(65536*(1+Math.random())|0).toString(16).substring(1)+"-",o=0,s="om-tabs-activated om-state-active",n="om-tabs-scroll-disabled";$.omWidget("om.omTabs",{options:{width:"auto",height:"auto",border:!0,tabWidth:"auto",tabHeight:27,scrollable:!0,distFactor:1,closable:!1,staticTab:[],position:"top",switchMode:"click",autoPlay:!1,interval:1e3,active:0,lazyLoad:!1,tabMenu:!1,onBeforeActivate:function(t,e){},onActivate:function(t,e){},onBeforeClose:function(t,e){},onClose:function(t,e){},onBeforeCloseAll:function(t){},onCloseAll:function(){},onAdd:function(t,e){},onBeforeAdd:function(t,e){},onLoadComplete:function(t,e){}},add:function(t){this._add(t)},close:function(t){this._close(t)},closeAll:function(){this._closeAll()},activate:function(t){this._activate(t)},getAlter:function(t){return this._getAlter(t)},getActivated:function(){return this._getActivated()},getLength:function(){return this._getLength()},setDataSource:function(t){void 0!==t.index&&(t.url||t.content)&&this._setDataSource(t)},reload:function(t,e,i){this._reload(t,e,i)},doLayout:function(){this._doLayout()},_create:function(){this._makeSketch(),this._collectItems(),this.history=[]},_init:function(){this._render(),this._afterRender(),this._buildEvent()},_makeSketch:function(){this.element.addClass("om-tabs om-widget om-widget-content om-corner-all").append('<div class="om-tabs-panels om-widget-content om-corner-bottom" />').find(">ul").wrap('<div class="om-tabs-headers om-helper-reset om-helper-clearfix om-widget-header om-corner-all" />'),this.$menu=$("<div></div>").appendTo($("body"))},_collectItems:function(){var e=this,s=this.element,n=this.options,a=[],r=[];s.find(">div.om-tabs-headers a").each(function(){var l,d=this.getAttribute("href",2),h=d.split("#")[0];h&&(h===location.toString().split("#")[0]||(l=$("base")[0])&&h===l.href)&&(d=this.hash,this.href=d);var c=$(this),u=c.attr("tabId")||c.attr("id")||i+o++;c.attr("tabId",u);var m={tabId:u,title:c.text(),_closeMode:"visibility",header:!1,height:"fit",closed:!0,onSuccess:function(t,i,o){e._trigger("onLoadComplete",null,m.tabId)},onError:function(t,i,o){e._trigger("onLoadComplete",null,m.tabId)}},p=$(">"+d,s)[0];p||0==d.indexOf("#")||(n.lazyLoad===!1?m.url=d:r.push({tabId:u,url:d,loaded:!1}));var f=new t(p||$("<div></div>")[0],m);a.push(f)}),$ul=s.find(">div.om-tabs-headers ul"),$ul.prepend($('<span class="left-placeholder"></span>')),$ul.append($('<span class="right-placeholder"></span>')),r.length>0&&(this.loadInfo=r),this.items=a},_render:function(){var t=this,e=this.element,i=this.options,o=this.items,s=e.find(">div.om-tabs-headers");if("number"==typeof i.active&&(i.active<0&&(i.active=0),i.active>o.length-1&&(i.active=o.length-1)),i.border!==!1&&e.children(":first").addClass("header-no-border"),"fit"==i.width)e.outerWidth(e.parent().width());else if("auto"!=i.width){e.css("width",i.width);var n=isNaN(i.width)&&-1!=i.width.indexOf("%");e.children(":first").outerWidth(n?"100%":i.width)}if("fit"==i.height?e.outerHeight(e.parent().height()):"auto"!=i.height&&e.css("height",i.height),i.closable&&i.tabMenu&&$.fn.omMenu){var a=e.attr("id"),r=[{id:a+"_001",label:"关闭"},{id:a+"_002",label:"关闭其它"}];0===i.staticTab.length&&r.push({id:a+"_003",label:"关闭所有"}),this.menu=this.$menu.omMenu({contextMenu:!0,dataSource:r,onSelect:function(e,i){e.id==a+"_001"?t.close(t.getAlter($(t.$currentLi).find("a.om-tabs-inner").attr("tabid"))):e.id==a+"_002"?s.find("ul li").each(function(e,i){var o=$(t.$currentLi).find("a.om-tabs-inner").attr("tabid"),s=$(i).find("a.om-tabs-inner").attr("tabid");o!==s&&t.close(t.getAlter(s))}):e.id==a+"_003"&&t.closeAll()}})}this._renderHeader(),this._renderBody()},_renderHeader:function(){var t=this.element,i=this.options,o=this.history;$headers=t.find(">div.om-tabs-headers"),$ul=$headers.find(">ul"),$lis=$ul.find(">li"),$lis.addClass("om-state-default om-corner-top"),$lis.each(function(t){var n=$(this).find("a:first");e()&&n.attr("hideFocus","true"),n.addClass("om-tabs-inner"),t===i.active||i.active===n.attr("tabId")?($(this).addClass(s),i.activeTabId=n.attr("tabId"),i.active=t,$.inArray(i.activeTabId,o)||o.push(i.activeTabId)):$(this).removeClass(s),n.css({width:i.tabWidth,height:i.tabHeight}),$('<span class="lileft"></span>').insertBefore(n),i.closable===!0||$.isArray(i.closable)&&-1!==$.inArray(t,i.closable)?-1===$.inArray(t,i.staticTab)&&(n.next(".om-icon-close").length<=0&&$('<a class="om-icon om-icon-close"></a>').insertAfter(n),$('<span class="liright"></span>').insertAfter(n.next(".om-icon-close"))):(n.next().remove(),$('<span class="liright"></span>').insertAfter(n))});var n=$lis.find("a.om-tabs-inner").height();n||(n=27),$ul.css({height:++n,"line-height":n+"px"}),$headers.height(n),this._checkScroller()&&this._enableScroller()},_renderBody:function(){var t=this.element,e=this.options,i=this.items,o=t.find(">div.om-tabs-panels");if(o.children().detach(),"auto"!==e.height){var s=t.innerHeight(),n=t.find(">div.om-tabs-headers").outerHeight();o.css("height",s-n)}t.toggleClass("om-tabs-noborder",!e.border);for(var a=i.length;a--;)i[a].addClass("om-state-nobd").parent().prependTo(o)},_afterRender:function(){var t=this.element,e=this.options,i=this.items,o=i.length;if(t.children().each(function(){$(this).is(".om-tabs-headers,.om-tabs-panels")||$(this).remove()}),e.lazyLoad){var s=$(i[e.active]),n=s.omPanel("option","tabId"),a=this._getUnloadedUrl(n);s.omPanel("open"),s.omPanel("reload",a),this._removeLoadInfo(n)}else $(i).omPanel("reload");for(;o--;){var s=$(i[o]);s.omPanel(o==e.active?"open":"close")}},_buildEvent:function(){var t=this,e=this.element,i=this.options,o=e.find(">div.om-tabs-headers a.om-icon-close");$(window).bind("resize",function(){var t=e.parent().innerHeight(),i=e.find(">div.om-tabs-headers").outerHeight();e.height(t),e.find(">div.om-tabs-panels").height(t-i)}),o.unbind("click.omtabs").bind("click.omtabs",function(e){var i=$(e.target).prev().attr("tabId");return t._close(i),!1});var s=e.find(">div.om-tabs-headers a.om-tabs-inner");if(-1!=i.switchMode.indexOf("mouseover")?s.bind("mouseover.omtabs",function(){var i=$(this).attr("tabId"),o=$.data(e,"activateTimer");"undefined"!=typeof o&&clearTimeout(o),o=setTimeout(function(){return t._activate(i),!1},100),$.data(e,"activateTimer",o)}):-1!=i.switchMode.indexOf("click")&&s.bind("click.omtabs",function(){t._activate($(this).attr("tabId"))}),s.bind("click.omtabs",function(){return!1}),0!=i.autoPlay?i.autoInterId=setInterval(function(){e.omTabs("activate","next")},i.interval):clearInterval(i.autoInterId),-1==i.switchMode.indexOf("mouseover")){var n=e.find(">div.om-tabs-headers li"),a=function(t,e){e.is(":not(.om-state-disabled)")&&e.addClass("om-state-"+t)},r=function(t,e){e.removeClass("om-state-"+t)};n.bind("mouseover.omtabs",function(){a("hover",$(this))}),n.bind("mouseout.omtabs",function(){r("hover",$(this))}),i.closable&&i.tabMenu&&n.each(function(e,i){$(i).bind("contextmenu",function(e){$.fn.omMenu&&(t.$currentLi=this,$(t.menu).omMenu("show",e))})})}e.find(">div.om-tabs-headers >span").bind("click.omtabs",function(e){if($(this).hasClass("om-tabs-scroll-disabled"))return!1;var i=$(this).parent().find("ul").children("li:last").outerWidth(!0);return $(this).hasClass("om-tabs-scroll-left")&&t._scroll(i,t._scrollCbFn()),$(this).hasClass("om-tabs-scroll-right")&&t._scroll(-i,t._scrollCbFn()),!1})},_purgeEvent:function(){var t=this.element,e=this.options,i=t.find(">div.om-tabs-headers");i.children().unbind(".omtabs"),i.find(">ul >li >a").unbind(".omtabs"),e.autoInterId&&clearInterval(e.autoInterId)},_activate:function(t){var e,i=this.element,o=this.options,n=this.items,a=i.find(">div.om-tabs-headers ul");if(o.activeTabId===t||o.active===t)return!1;t=t||0;var r,l=t;if("next"==t?t=(o.active+1)%n.length:"prev"==t&&(t=(o.active-1)%n.length),"number"==typeof t?l=this._getAlter(t):"string"==typeof t&&(t=this._getAlter(t)),o.onBeforeActivate&&this._trigger("onBeforeActivate",null,t)===!1)return!1;r=a.find("li a[tabId="+l+"]"),r.parent().addClass(s).siblings().removeClass(s),o.activeTabId=l,o.active=t;var d=n.length;for(d=n.length;d--;d>=0){var h=n[d];h.omPanel("option","tabId")==l&&(h.omPanel("open"),(e=this._getUnloadedUrl(l))&&(h.omPanel("reload",e),this._removeLoadInfo(l)))}for(d=n.length;d--;d>=0){var h=n[d];h.omPanel("option","tabId")!=l&&h.omPanel("close")}if(this._checkScroller()){a.stop(!0,!0),i.clearQueue();var c=a.prev(),u=a.next(),m=r.parent().offset().left,p=m+r.parent().outerWidth(!0),f=c.offset().left+c.outerWidth(!0)+4-m,g=u.offset().left-p;f>=0?this._scroll(f,this._scrollCbFn()):0>=g?this._scroll(g,this._scrollCbFn()):this._scrollCbFn()()}var v=this.history,b=$.inArray(l,v);v.push(-1===b?l:v.splice(b,1)[0]),o.onActivate&&this._trigger("onActivate",null,t)},_getUnloadedUrl:function(t){var e=this.loadInfo;for(var i in e)if(e[i].tabId===t&&e[i].loaded===!1)return e[i].url;return null},_removeLoadInfo:function(t){var e,i,o=this.loadInfo;if(o)for(e=o.length;i=o[--e];)if(i.tabId===t){o.splice(e,1);break}},_addLoadInfo:function(t,e){this.loadInfo.push({tabId:t,loaded:!1,url:e})},_getAlter:function(t){var e,i=this.element;return"number"==typeof t?e=i.find(">div.om-tabs-headers li:eq("+t+") a.om-tabs-inner").attr("tabId"):"string"==typeof t&&i.find(">div.om-tabs-headers li a.om-tabs-inner").each(function(i){return $(this).attr("tabId")==t?(e=i,!1):void 0}),void 0===e?null:e},_getActivated:function(){return this.options.activeTabId},_add:function(s){var n=this,a=this.element,r=this.options,l=this.items,d=a.find(">div.om-tabs-headers ul"),h=s.tabId?s.tabId:i+o++;if(s.index=s.index||"last",("last"==s.index||s.index>l.length-1)&&(s.index=l.length),s.title=s.title||"New Title "+h,s.url=$.trim(s.url),s.content=$.trim(s.content),s.url?s.content=void 0:(s.url=void 0,s.content=s.content||"New Content "+h),r.onBeforeAdd&&0==n._trigger("onBeforeAdd",null,s))return!1;var c=$('<li class="om-state-default om-corner-top"> </li>'),u=$('<a class="om-tabs-inner"></a>').html(s.title).attr({href:"#"+h,tabId:h}).css({width:r.tabWidth,height:r.tabHeight}).appendTo(c);$('<span class="lileft"></span>').insertBefore(u),e()&&u.attr("hideFocus","true"),s.closable===!0||void 0==s.closable&&r.closable?(u.after('<a class="om-icon om-icon-close"></a>'),$('<span class="liright"></span>').insertAfter(u.next(".om-icon-close"))):$('<span class="liright"></span>').insertAfter(u);var m={tabId:h,title:u.text(),_closeMode:"visibility",header:!1,height:"fit",closed:!0,onSuccess:function(t,e,i){n._trigger("onLoadComplete",null,h)},onError:function(t,e,i){n._trigger("onLoadComplete",null,h)}};$.extend(m,s),s.url&&(r.lazyLoad||s.lazyLoad)&&(n.loadInfo||(n.loadInfo=[]),n.loadInfo.push({tabId:h,url:s.url,loaded:!1}),m.url=null);var p=new t($("<div>"+(s.content||"")+"</div>")[0],m);s.index==l.length?(l[s.index]=p,c.insertBefore(d.find("span.right-placeholder"))):(l.splice(s.index,0,p),d.find(">li").eq(s.index).before(c)),d.innerWidth()-c.position().left<500&&d.width(d.width()+500),this._checkScroller()&&this._enableScroller();var f=l[s.index].addClass("om-state-nobd").parent();s.index>0?f.insertAfter(a.find(">div.om-tabs-panels").children().eq(s.index-1)):a.find(">div.om-tabs-panels").append(f),this._purgeEvent(),this._buildEvent(),this._trigger("onAdd",null,m),s.activateNew!==!1&&this._activate(s.index)},_close:function(t){var e=this.element,i=this.options,o=this.items,s=e.find(">div.om-tabs-headers"),n=e.find(">div.om-tabs-panels"),a=e.height(),r=t,l=this.history;if(t=void 0===t?i.active:t,"string"==typeof t?t=this._getAlter(t):r=this._getAlter(t),-1!==$.inArray(t,i.staticTab))return!1;if(i.onBeforeClose&&0==this._trigger("onBeforeClose",null,t))return!1;this._removeLoadInfo(this._getAlter(t)),s.find("li").eq(t).remove(),n.children().find(">.om-panel-body").eq(t).empty().remove(),o.splice(t,1),0==n.children().length&&n.css({height:a-s.outerHeight()});for(var d=l.length-1;d>=0;d--)if(r===l[d]){l.splice(d,1);break}return i.onClose&&this._trigger("onClose",null,t),0==o.length?(i.active=-1,void(i.activeTabId=null)):void(t==i.active?(i.active=-1,this._activate(l.length>0?l.pop():0)):(t<i.active&&i.active--,this._checkScroller()&&this._enableScroller()))},_closeAll:function(){var t=this.element,e=this.options,i=this.items,o=t.find(">div.om-tabs-headers"),s=t.find(">div.om-tabs-panels"),n=t.height();if(e.onBeforeCloseAll&&this._trigger("onBeforeCloseAll")===!1)return!1;for(var a=0,r=i.length;r>a;a++)this._removeLoadInfo(i[a].omPanel("option","tabId"));o.find("li").remove(),s.empty(),i.splice(0,i.length),s.css({height:n-o.outerHeight()}),e.active=-1,e.activeTabId=null,this.history=[],e.onCloseAll&&this._trigger("onCloseAll")},_checkScroller:function(){var t=this.element,e=this.options;if(!e.scrollable)return!1;var i=t.find(">div.om-tabs-headers ul"),o=4;return i.children().each(function(){o+=$(this).outerWidth(!0)}),o>i.parent().innerWidth()?(i.hasClass("om-tabs-scrollable")||($("<span></span>").insertBefore(i).addClass("om-tabs-scroll-left"),$("<span></span>").insertAfter(i).addClass("om-tabs-scroll-right"),i.addClass("om-tabs-scrollable")),!0):(i.removeClass("om-tabs-scrollable").siblings().remove(),!1)},_scrollCbFn:function(){var t=this;return function(){t._enableScroller()}},_enableScroller:function(){var t=this.element.find(">div.om-tabs-headers"),e=t.children("ul"),i=e.prev(),o=e.next(),s=e.children(":last"),a=t.offset().left,r=o.offset().left,l=e.offset().left,d=s.offset().left+s.outerWidth(!0);i.toggleClass(n+" om-tabs-scroll-disabled-left",l>=a),o.toggleClass(n+" om-tabs-scroll-disabled-right",r>=d)},_scroll:function(t,e){var i=this;if($self=this.element,$ul=$self.find(">div.om-tabs-headers ul"),$li=$ul.children(":last"),0!=t){var o=t>0?$ul.prev().offset():$ul.next().offset(),s=function(s){if(t>0&&$ul.prev().hasClass(n)||0>t&&$ul.next().hasClass(n))return $ul.stop(!0,!0),void $self.clearQueue();t=t>0?"+="+Math.min(o.left-$ul.offset().left,t):"-="+Math.min($li.offset().left+$li.outerWidth(!0)-o.left,Math.abs(t)),i.isScrolling=!0,$ul.animate({left:t+"px"},"normal","swing",function(){!!e&&e(),i.isScrolling=!1,s()})};$self.queue(s),1!=$self.queue().length||i.isScrolling||$self.dequeue()}},_getLength:function(){return this.items.length},_doLayout:function(){this._checkScroller()&&this._enableScroller()},_setDataSource:function(t){var e=(this.element,this.items),i=this.options,o=this._getAlter(t.index);t.url=$.trim(t.url),t.content=$.trim(t.content),t.url?i.lazyLoad!==!1?(this._addLoadInfo(o,t.url),e[t.index].omPanel("option","url",t.url)):(this._removeLoadInfo(o),e[t.index].omPanel("reload",t.url)):e[t.index].html(t.content)},_reload:function(t,e,i){var o=(this.element,this.items),s=this._getAlter(t);e?(this._removeLoadInfo(s),o[t].omPanel("reload",e)):i?o[t].html(i):(o[t].omPanel("reload",this._getUnloadedUrl(s)),this._removeLoadInfo(s))}})}(jQuery),function(t){t.omWidget("om.omTooltip",{options:{width:"auto",minWidth:null,maxWidth:null,height:"auto",maxHeight:null,minHeight:null,delay:300,anchor:!1,trackMouse:!1,showOn:"mouseover",lazyLoad:!1,url:null,offset:[5,5],anchorOffset:0,region:null,html:null,contentEL:null},_create:function(){this.tipContent=t('<div class="tip-body"></div>'),this.tipAnchor=t('<div class="tip-anchor"></div>'),this.regionMap={right:"left",top:"bottom",left:"right",bottom:"top"},this.tip=t('<div class="tip"></div>').append(this.tipContent)},_init:function(){var e=this,i=e.options;if(this.tipContent.empty(),this.tip.find("div.tip-anchor").remove(),i.anchor&&e.tip.append(e.tipAnchor),e.adjustWidth=6,e.adjustHeight=6,"auto"!=i.width?this.tip.css("width",i.width-e.adjustWidth):this.tip.css("width","auto"),"auto"!=i.height?this.tip.css("height",i.height-e.adjustHeight):this.tip.css("height","auto"),i.minWidth&&this.tip.css("minWidth",i.minWidth-e.adjustWidth),i.maxWidth&&this.tip.css("maxWidth",i.maxWidth-e.adjustWidth),i.maxHeight&&this.tip.css("maxHeight",i.maxHeight-e.adjustHeight),i.minHeight&&this.tip.css("minHeight",i.minHeight-e.adjustHeight),i.url&&!i.lazyLoad)e._ajaxLoad(i.url);else if(i.html)this.tip.find(".tip-body").append(i.html);else{var o=t(i.contentEL).clone();t(i.contentEL).remove(),this.tip.find(".tip-body").append(o.show())}this._bindEvent()},_ajaxLoad:function(e){var i=this;t.ajax({url:e,method:"POST",dataType:"html",success:function(t,e){i.tip.find(".tip-body").append(t)},error:function(e,o,s){i.tip.find(".tip-body").append(t.om.lang.omTooltip.FailedToLoad)}})},_bindEvent:function(){var t=this,e=t.options,i=t.element;"mouseover"==e.showOn?i.bind("mouseover.tooltip",function(i){t.showTime&&clearTimeout(t.showTime),t.showTime=setTimeout(function(){t.show(i)},e.delay)}):"click"==e.showOn&&(t.showTime=i.bind("click.tooltip",function(i){setTimeout(function(){t.show(i)},e.delay)})),e.trackMouse&&i.bind("mousemove.tooltip",function(e){t._adjustPosition(e)}),i.bind("mouseleave.tooltip",function(){t.showTime&&clearTimeout(t.showTime),t.hideTime=setTimeout(function(){t.hide()},e.delay)}),t.tip.bind("mouseover.tooltip",function(){t.hideTime&&clearTimeout(t.hideTime)}).bind("mouseleave.tooltip",function(){setTimeout(function(){t.hide()},e.delay)})},show:function(e){var i=this,o=i.options;t(document.body).find(i.tip).length<=0?(o.url&&o.lazyLoad&&i._ajaxLoad(o.url),i.tip.appendTo(document.body).fadeIn(),i._adjustPosition(e)):(i._adjustPosition(e),i.tip.fadeIn())},_adjustPosition:function(e){var i,o,s=this,n=s.options,a=s.element,r=t(a).offset();if(e&&!n.region)i=e.pageY+n.offset[0],o=e.pageX+n.offset[1],s.tip.find(".tip-anchor").css({top:n.anchorOffset+3,left:"-9px"}).addClass("tip-anchor-left");else{var l=parseInt(t(a).css("borderBottomWidth").replace("px",""));i=r.top+t(a).height()+(isNaN(l)?0:l)+n.offset[0],o=r.left+n.offset[1],"right"==n.region?(o=r.left+n.offset[1]+t(a).width()+s.adjustWidth,i=i-s.element.height()+s.adjustHeight+n.offset[0],s.tip.find(".tip-anchor").css({top:n.anchorOffset+3,left:"-9px"})):"left"==n.region?(o=r.left-s.tip.width()-s.adjustWidth-n.offset[1]-2,i=i-s.element.height()-s.adjustHeight-n.offset[0],s.tip.find(".tip-anchor").css({top:n.anchorOffset+3,left:s.tip.outerWidth()-2})):"top"==n.region?(i=i-(s.element.height()+s.tip.height()+s.adjustHeight+2)-n.offset[0],o+=n.offset[1],s.tip.find(".tip-anchor").css({top:s.tip.outerHeight()-3,left:n.anchorOffset+3})):"bottom"==n.region&&(i+=n.offset[0],o+=n.offset[1],s.tip.find(".tip-anchor").css({top:-9,left:n.anchorOffset+3})),s.tip.find(".tip-anchor").addClass("tip-anchor-"+s.regionMap[n.region])}o+s.tip.width()-t(document).scrollLeft()>document.documentElement.clientWidth&&(o=o-s.tip.width()-20),i+s.tip.height()-t(document).scrollTop()>document.documentElement.clientHeight&&(i=i-(s.element.height()+s.tip.height())-20),s.tip.css({top:i-t(document).scrollTop(),left:o-t(document).scrollLeft()})},hide:function(){this.tip.hide()},destroy:function(){clearTimeout(this.showTime),clearTimeout(this.hideTime),this.element.unbind(".tooltip"),this.tip.remove()}}),t.om.lang.omTooltip={FailedToLoad:"加载提示信息出错！"}}(jQuery),function(t){var e={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};t.omWidget("om.omTree",{_swapClass:function(t,e,i){var o=t.filter("."+e);t.filter("."+i).removeClass(i).addClass(e),o.removeClass(e).addClass(i)},_getParentNode:function(e){if(e){var i=t(e).parent().parent();if(i&&i.hasClass("om-tree-node"))return i}return null},_setParentCheckbox:function(t){var e=this._getParentNode(t);if(e){var i=e.find(">ul >li >div.tree-checkbox"),o=i.length,s=i.filter(".checkbox_full").length,n=i.filter(".checkbox_part").length,a=e.find(">div.tree-checkbox");a.removeClass("checkbox_full checkbox_part checkbox_checked"),s==o?a.addClass("checkbox_full checkbox_checked"):(s>0||n>0)&&a.addClass("checkbox_part checkbox_checked"),this._setParentCheckbox(e)}},_setChildCheckbox:function(t,e){var i=t.find(">ul").find(".tree-checkbox");i.removeClass("checkbox_part checkbox_full checkbox_checked"),e&&i.addClass("checkbox_full checkbox_checked")},_applyEvents:function(e){var i=this,o=i.options,s=o.onClick,n=o.onDblClick,a=o.onRightClick,r=o.onDrag,l=o.onDrop;e.find("span").bind("click",function(e){var o=i.element.data("nodes")[t(this).parent().attr("id")];return s&&i._trigger("onClick",e,o),i.select(o),!1}).bind("dblclick",function(e){var o=t(this).parent(),s=i.element.data("nodes")[o.attr("id")];o.hasClass("hasChildren")&&o.find("span.folder").removeClass("folder").addClass("placeholder"),
o.has("ul").length>0&&t(e.target,this)&&i.toggler(o),o.find("span.placeholder").removeClass("placeholder").addClass("folder"),n&&i._trigger("onDblClick",e,s)}).bind("contextmenu",function(e){var o=i.element.data("nodes")[t(this).parent().attr("id")];a&&i._trigger("onRightClick",e,o)}).bind("mouseover mouseout",function(e){return"mouseover"==e.type?t(this).addClass("hover"):"mouseout"==e.type&&t(this).removeClass("hover"),!1}),i._bindHitEvent(e),e.find("div.tree-checkbox").click(function(e){var o=t(this).parent(),s=i.findByNId(o.attr("id"));i._toggleCheck(o,i.isCheck(s))}),i.options.draggable&&(e.omDraggable({revert:"invalid",onStart:function(t,e){var o=i.findByNId(t.helper.attr("id"));r&&i._trigger("onDrag",e,o)}}),e.omDroppable({greedy:!0,accept:"li.om-tree-node",onDragOver:function(i,o){var s=e.filter(".treenode-droppable");s.length>0?s.removeClass("treenode-droppable"):t(this).addClass("treenode-droppable")},onDragOut:function(e,i){t(this).removeClass("treenode-droppable")},onDrop:function(e,o){var s=null,n=null,a=e,r=this;t(this).removeClass("treenode-droppable"),a.css("left",""),a.css("top","");var d=i.findByNId(r.attr("id")),h=i.findByNId(a.attr("id"));r.has("ul").length>0?s=d:(n=d,h.pid=d.pid);var c=i.findByNId(a.parent().find("li").attr("id"));i.remove(h),i.insert(h,s,n,!0),l&&i._trigger("onDrop",o,c)}})),e.bind("mousedown",function(t){t.stopPropagation()})},_bindHitEvent:function(e){var i=this;e.find("div.hitarea").click(function(){var e=t(this).parent();e.hasClass("hasChildren")&&e.find("span.folder").removeClass("folder").addClass("placeholder"),i.toggler(e),e.find("span.placeholder").removeClass("placeholder").addClass("folder")})},options:{initExpandLevel:0,lineHover:!1,showIcon:!0,showLine:!0,showCheckbox:!1,cascadeCheck:!0,draggable:!1,filter:null,nodeCount:0,simpleDataModel:!1},_create:function(){this.element.data("nodes",[]).data("selected","").data("init_dataSource",[]).addClass("om-tree om-widget")},updateNode:function(t){var e=this,i=e.options,o=t.find("li");e._applyEvents(o),i.control&&e._treeController(e,i.control)},toggler:function(i){var o=this,s=o.options,n=i.attr("id"),a=o.findByNId(n),r=i.hasClass(e.expandable);if(r){var l=s.onBeforeExpand;if(l&&!1===o._trigger("onBeforeExpand",null,a))return o}else{var d=s.onBeforeCollapse;if(d&&!1===o._trigger("onBeforeCollapse",null,a))return o}var h=i.find(i.find(">.hitarea"));o._swapClass(h,e.collapsableHitarea,e.expandableHitarea),o._swapClass(h,e.lastCollapsableHitarea,e.lastExpandableHitarea),o._swapClass(i,e.collapsable,e.expandable),o._swapClass(i,e.lastCollapsable,e.lastExpandable),i.find(">ul").each(function(){if(r){t(this).show();var e=s.onExpand;e&&o._trigger("onExpand",null,a)}else{t(this).hide();var i=s.onCollapse;i&&o._trigger("onCollapse",null,a)}})},_init:function(){var t=this,e=t.options,i=t.element,o=e.dataSource;i.empty(),o&&("string"==typeof o?t._ajaxLoad(i,o):"object"==typeof o&&(e.simpleDataModel&&(o=t._transformToNodes(o)),i.data("init_dataSource",o),t._appendNodes.apply(t,[i,o]),t.updateNode(i),e.onSuccess&&t._trigger("onSuccess",null,o)))},_ajaxLoad:function(e,i){var o=this,s=this.options,n=s.onBeforeLoad,a=s.onSuccess,r=s.onError;n&&o._trigger("onBeforeLoad",null,o.findByNId(e.parent().attr("id"))),t.ajax({url:i,method:"POST",dataType:"json",cache:!1,success:function(t){s.simpleDataModel&&(t=o._transformToNodes(t)),e.data("init_dataSource",t),o._appendNodes.apply(o,[e,t]),o.updateNode(e),a&&o._trigger("onSuccess",null,t)},error:function(t,e,i){r&&o._trigger("onError",null,t,e,i)}})},check:function(e){this._toggleCheck(t("#"+e.nid),!1)},uncheck:function(e){this._toggleCheck(t("#"+e.nid),!0)},_toggleCheck:function(t,e){{var i=t.find(">div.tree-checkbox"),o=this,s=o.options;s.onCheck}o.options.cascadeCheck&&(o._setChildCheckbox(t,!e),o._setParentCheckbox(t)),e?(i.removeClass("checkbox_part checkbox_full checkbox_checked"),s.onUncheck&&this._trigger("onUncheck",null,this.findByNId(t.attr("id")))):(i.removeClass("checkbox_part").addClass("checkbox_full checkbox_checked"),s.onCheck&&this._trigger("onCheck",null,this.findByNId(t.attr("id"))))},checkAll:function(t){t?this.element.find(".tree-checkbox").removeClass("checkbox_part").addClass("checkbox_full"):this.element.find(".tree-checkbox").removeClass("checkbox_part checkbox_full")},isCheck:function(e){return t("#"+e.nid).find(">div.tree-checkbox").hasClass("checkbox_full")},getChecked:function(e){var i=this,o=[];return i.element.find("li>div.tree-checkbox").each(function(e,s){t(this).hasClass("checkbox_checked")&&(node=i.element.data("nodes")[t(this).parent().attr("id")],o.push(node))}),o},select:function(e){var i=this,o=this.options,s=o.onBeforeSelect,n=o.onSelect;if(s&&!1===i._trigger("onBeforeSelect",null,e))return i;var a=t("#"+e.nid);t(" >span",a).addClass("selected");var r=i.element.data("selected"),l=a.attr("id");""!=r&&r!=l&&t("#"+r+" >span").removeClass("selected"),i.element.data("selected",l),n&&i._trigger("onSelect",null,e)},unselect:function(e){var i=t("#"+e.nid);t(" >span",i).removeClass("selected");var o=this.element.data("selected"),s=i.attr("id");o==s&&this.element.data("selected","")},getSelected:function(){var t=this.element.data("selected");return t?this.element.data("nodes")[t]:null},findNodes:function(t,e,i,o){var s,n=[],a=i?i.children:this.element.data("init_dataSource");if(o=0!=o?!0:o,a&&(s=a.length)>0)for(var r=0;s>r;r++)n=this._searchNode.apply(a[r],[t,e,this._searchNode,n,!1,o]);return n.length>0?n:null},findNode:function(t,e,i,o){var s,n,a=i?i.children:this.element.data("init_dataSource");if(o=0!=o?!0:o,a&&(n=a.length)>0)for(var r=0;n>r;r++)if(s=this._searchNode.apply(a[r],[t,e,this._searchNode,[],!0,o]),null!=s)return s;return null},findByNId:function(t){return this.element.data("nodes")[t]||null},findNodesBy:function(t,e,i){var o,s=e?e.children:this.element.data("init_dataSource");i=0!=i?!0:i;var n=[];if(s&&(len=s.length)>0)for(var a=0;a<len;a++)t.call(s[a],s[a])===!0&&n.push(s[a]),i&&s[a].children&&(o=this.findNodesBy(t,s[a],i),o&&(n=n.concat(o)));return n.length>0?n:null},findNodeBy:function(t,e,i){var o,s=e?e.children:this.element.data("init_dataSource");if(i=0!=i?!0:i,s&&(a=s.length)>0)for(var n=0,a=s.length;a>n;n++){if(t.call(s[n],s[n])===!0)return s[n];if(i&&(o=this.findNodeBy(t,s[n],i),null!=o))return o}return null},_searchNode:function(e,i,o,s,n,a){if(!n)return this[e]==i&&s.push(this),this.children&&this.children.length&&a&&t.each(this.children,o,[e,i,o,s,!1,a]),s;if(this[e]==i)return this;if(this.children&&this.children.length&&a)for(var r in this.children){var l=o.apply(this.children[r],[e,i,o,[],!0,a]);if(l)return l}},getParent:function(t){var e=this.element.data("nodes")["pid"+t.nid];return e?this.findByNId(e):null},getChildren:function(t){return t.children},getData:function(){return this.options.dataSource},setData:function(t){this.options.dataSource=t},expand:function(i){if(i.nid){var o=e.expandable,s=t("#"+i.nid),n=t(">div."+e.hitarea,s).filter(function(){return o?t(this).parent("."+o).length:!0}).parent().parentsUntil(this.element).andSelf().filter(function(){return t(this).filter("li").hasClass(o)});this.toggler(n)}},collapse:function(i){i.nid&&this._collapseHandler(e.collapsable,t("#"+i.nid))},expandAll:function(){this._collapseHandler(e.expandable,this.element,!0)},collapseAll:function(){this._collapseHandler(e.collapsable,this.element,!0)},_collapseHandler:function(i,o,s){var n=(s?"":">")+"div."+e.hitarea;this.toggler(t(n,o).filter(function(){return i?t(this).parent("."+i).length:!0}).parent())},refresh:function(e){var i=this,o=i.element,s=i.getData();if(e){var n=t("#"+e.nid).next(),a=o.data("nodes")["pid"+e.nid];i.remove(e),i.insert(e,i.findByNId(a),i.findByNId(n.attr("id")))}else if(o.empty(),"string"==typeof s)i._ajaxLoad(o,s);else if("object"==typeof s){i.setData([]),1==i.options.simpleDataModel&&(s=i._transformToNodes(s));for(var r=0,l=s.length;l>r;r++)i.insert(s[r])}},_transformToNodes:function(t){var e,i;if(!t)return[];var o=[],s=[];for(e=0,i=t.length;i>e;e++)s[t[e].id]=t[e];for(e=0,i=t.length;i>e;e++)if(s[t[e].pid]){var n=t[e].pid;s[n].children||(s[n].children=[]),s[n].children.push(t[e])}else o.push(t[e]);return o},_appendNodes:function(i,o,s,n){var a=this,r=[],l=a.options.showCheckbox,d=a.element.attr("id")?a.element.attr("id"):"treeId"+parseInt(1e3*Math.random());a.element.attr("id",d);for(var h=0,c=o.length;c>h;h++){var u=o[h],m=h==o.length-1,p="om-tree-node "+(l?"treenode-checkable ":"")+(u.hasChildren?"hasChildren ":""),f=d+"_"+ ++a.options.nodeCount;u.nid=f;var g=a.element.data("nodes");g[u.nid]=u,"string"==typeof i?(g["pid"+u.nid]=i,m&&(i=null)):g["pid"+u.nid]=i.parent("li").attr("id");var v=[];u.children&&u.children.length>0&&v.push(a._appendNodes(u.nid,u.children).join(""));var b=0;if(u.children&&(b=u.children.length)>0||u.hasChildren?p=u.expanded?p+"open "+e.collapsable+" "+(m?e.lastCollapsable:""):p+e.expandable+" "+(m?e.lastExpandable:""):p+=m?e.last:"",r.push("<li id='",u.nid,"' class='",p,"'>"),u.hasChildren||b>0){var _="";t.each(p.split(" "),function(){_+=this+"-hitarea "}),r.push("<div class='",e.hitarea+" "+_,"'/>")}l&&r.push("<div class='tree-checkbox'/>");var w=u.classes?u.classes:"";a.options.showIcon&&(w+=u.hasChildren||u.children&&u.children.length>0?" folder ":" file "),r.push("<span class='",w,"'>","<a href='#'>",u.text,"</a></span>"),(u.hasChildren||b>0)&&(r.push("<ul"," style='display:",u.expanded?"block":"none","'>"),r.push(v.join("")),r.push("</ul>")),r.push("</li>")}return s?n?t("#"+s.nid).after(r.join("")):t("#"+s.nid).before(r.join("")):i&&i.append(r.join("")),r},remove:function(i,o){var s,n=this,a=o?o.children:n.element.data("init_dataSource");for(var r in a){if(a[r]==i){var l=[];l=n._findChildrenId(i,l),l.push(i.nid);for(var d=0,h=l.length;h>d;d++)delete n.element.data("nodes")[l[d]],delete n.element.data("nodes")["pid"+l[d]];i.nid==n.element.data("selected")&&this.element.data("selected",null);var c=t("#"+i.nid).prev();return t("#"+i.nid).next().length<1&&c.length>0&&(c.hasClass(e.collapsable)?(c.addClass(e.lastCollapsable),c.find("div.hitarea").first().addClass(e.lastCollapsableHitarea)):c.hasClass(e.expandable)?(c.addClass(e.lastExpandable),c.find("div.hitarea").first().addClass(e.lastExpandableHitarea)):c.addClass(e.last)),t("#"+i.nid).remove(),a.splice(r,1),o&&o.nid&&a.length<1&&n._changeToFolderOrFile(o,!1),!0}if(a[r].children&&(s=n.remove(i,a[r])))return!0}return!1},_findChildrenId:function(t,e){if(t.children)for(var i=0,o=t.children,s=o.length;s>i;i++)e.push(o[i].nid),o[i].children&&this._findChildrenId(o[i],e);return e},insert:function(i,o,s,n){if(i){var a,r,l=this,d=[],h=t.isArray(i);h?d=i:d.push(i),s&&(o=o||l.findByNId(l.element.data("nodes")["pid"+s.nid]));var c,u=o?o.children:l.element.data("init_dataSource");o&&(!o.children||o.children.length<1)&&(o.hasChildren||(l._changeToFolderOrFile(o,!0),l._bindHitEvent(t("#"+o.nid))),u=o.children=[]),a=o?t("#"+o.nid).children("ul").first():l.element,r=a.find("li"),s&&(c=t.inArray(s,u))>=0?(l._appendNodes(a,d,s,n),u.splice(c,0,i)):(l._appendNodes(a,d,s,n),h?t.merge(u,i):u.push(i));var m=a.find("li").filter("."+e.last+",."+e.lastCollapsable+",."+e.lastExpandable).not(a.find("li").filter(":last-child:not(ul)"));m.removeClass(e.last+" "+e.lastCollapsable+" "+e.lastExpandable),m.find(" >div").removeClass(e.lastCollapsableHitarea+" "+e.lastExpandableHitarea);var p=a.find("li").not(r);l._applyEvents(p)}},_changeToFolderOrFile:function(i,o){var s=t("#"+i.nid),n=this;if(o){{t("<ul/>").css("display","block").appendTo(s)}s.addClass("open "+e.collapsable),n._swapClass(s,e.last,e.lastCollapsable),i.children=[]}else s.find("ul").remove(),s.find("div."+e.hitarea).remove(),s.filter("."+e.lastCollapsable+",."+e.lastExpandable).removeClass(e.lastCollapsable+" "+e.lastExpandable).addClass(e.last),s.removeClass("open "+e.collapsable+" "+e.expandable);n.options.showIcon&&n._swapClass(s.children("span"),"file","folder");var a=s.filter(":has(>ul)").prepend('<div class="'+e.hitarea+'"/>').find("div."+e.hitarea);a.each(function(){var e="";t.each(t(this).parent().attr("class").split(" "),function(){e+=this+"-hitarea "}),t(this).addClass(e)})},modify:function(e,i,o){if(e&&i){var s=this,n=t("#"+e.nid).next(),a=null;o=o||this.findByNId(s.element.data("nodes")["pid"+e.nid]),(n.is("ul")||n.is("li"))&&(a=s.findByNId(n.attr("id"))),s.remove(e,o),s.insert(i,o,a)}},disable:function(){},enable:function(){}})}(jQuery),function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var i=t.data(this[0],"validator");return i?i:(i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){i.submitButton=this}),this.submit(function(e){function o(){if(i.settings.submitHandler){if(i.submitButton)var e=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&e.remove(),!1}return!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,o()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):o():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e&=i.element(this)}),e},removeAttrs:function(e){var i={},o=this;return t.each(e.split(/\s/),function(t,e){i[e]=o.attr(e),o.removeAttr(e)}),i},rules:function(e,i){var o=this[0];if(e){var s=t.data(o.form,"validator").settings,n=s.rules,a=t.validator.staticRules(o);switch(e){case"add":t.extend(a,t.validator.normalizeRule(i)),n[o.name]=a,i.messages&&(s.messages[o.name]=t.extend(s.messages[o.name],i.messages));break;case"remove":if(!i)return delete n[o.name],a;var r={};return t.each(i.split(/\s/),function(t,e){r[e]=a[e],delete a[e]}),r}}var l=t.validator.normalizeRules(t.extend({},t.validator.metadataRules(o),t.validator.classRules(o),t.validator.attributeRules(o),t.validator.staticRules(o)),o);if(l.required){var d=l.required;delete l.required,l=t.extend({required:d},l)}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+e.value)},filled:function(e){return!!t.trim(""+e.value)},unchecked:function(t){return!t.checked}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1==arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),i)}),e)},t.extend(t.validator,{defaults:{validateOnEmpty:!1,messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,focusCleanup:!1,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.settings.validateOnEmpty?(!this.checkable(t)||t.name in this.submitted)&&this.element(t):this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t){(t.name in this.submitted||t==this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,o){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(o):t(e).addClass(i).removeClass(o)},unhighlight:function(e,i,o){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(o):t(e).removeClass(i).addClass(o)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),o="on"+e.type.replace(/^validate/,"");i.settings[o]&&i.settings[o].call(i,this[0])}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,o){t.each(o.split(/\s/),function(t,o){i[o]=e})});var o=this.settings.rules;t.each(o,function(e,i){o[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",e).validateDelegate(":radio, :checkbox, select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.clean(e),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e);return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1==t.grep(this.errorList,function(t){return t.element.name==e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){return t(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},check:function(e){e=this.clean(e),this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]);var i=t(e).rules(),o=!1;for(var s in i){var n={method:s,parameters:i[s]};try{var a=t.validator.methods[s].call(this,e.value.replace(/\r/g,""),e,n.parameters);if("dependency-mismatch"==a){o=!0;continue}if(o=!1,"pending"==a)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!a)return this.formatAndAdd(e,n),!1}catch(r){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+e.id+", check the '"+n.method+"' method",r),r}}return o?void 0:(this.objectLength(i)&&this.successList.push(e),!0)},customMetaMessage:function(e,i){if(t.metadata){var o=this.settings.meta?t(e).metadata()[this.settings.meta]:t(e).metadata();return o&&o.messages&&o.messages[i]}},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor==String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customMetaMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e.method),o=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,e.parameters,t):o.test(i)&&(i=jQuery.format(i.replace(o,"{$1}"),e.parameters)),this.errorList.push({message:i,element:t}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){for(var t=0;this.errorList[t];t++){var e=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,e.element,this.settings.errorClass,this.settings.validClass),this.showLabel(e.element,e.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(var t=0,i=this.validElements();i[t];t++)this.settings.unhighlight.call(this,i[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var o=this.errorsFor(e);o.length?(o.removeClass().addClass(this.settings.errorClass),o.attr("generated")&&o.html(i)):(o=t("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(o=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(o).length||(this.settings.errorPlacement?this.settings.errorPlacement(o,t(e)):o.insertAfter(e))),!i&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o)),this.toShow=this.toShow.add(o)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")==i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){var i=this.currentForm;return t(document.getElementsByName(e)).map(function(t,o){return o.form==i&&o.name==e&&o||null})},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t,e){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){return!t.validator.methods.required.call(this,t.trim(e.value),e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0==this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor==String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},o=t(e).attr("class");return o&&t.each(o.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},o=t(e);for(var s in t.validator.methods){var n=o.attr(s);n&&(i[s]=n)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(e){if(!t.metadata)return{};var i=t.data(e.form,"validator").settings.meta;return i?t(e).metadata()[i]:t(e).metadata()},staticRules:function(e){var i={},o=t.data(e.form,"validator");return o.settings.rules&&(i=t.validator.normalizeRule(o.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(o,s){if(s===!1)return void delete e[o];if(s.param||s.depends){var n=!0;switch(typeof s.depends){case"string":n=!!t(s.depends,i.form).length;break;case"function":n=s.depends.call(i,i)}n?e[o]=void 0!==s.param?s.param:!0:delete e[o]}}),t.each(e,function(o,s){e[o]=t.isFunction(s)?s(i):s}),t.each(["minlength","maxlength","min","max"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){e[this]&&(e[this]=[Number(e[this][0]),Number(e[this][1])])}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e.messages&&delete e.messages,e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,o){t.validator.methods[e]=i,t.validator.messages[e]=void 0!=o?o:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,o){if(!this.depend(o,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":var s=t(i).val();return s&&s.length>0;case"input":if(this.checkable(i))return this.getLength(e,i)>0;default:return t.trim(e).length>0}},remote:function(e,i,o){if(this.optional(i))return"dependency-mismatch";var s=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,o="string"==typeof o&&{url:o}||o,this.pending[i.name])return"pending";if(s.old===e)return s.valid;s.old=e;var n=this;this.startRequest(i);var a={};return a[i.name]=e,t.ajax(t.extend(!0,{url:o,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(o){n.settings.messages[i.name].remote=s.originalMessage;var a=o===!0;if(a){var r=n.formSubmitted;n.prepareElement(i),n.formSubmitted=r,n.successList.push(i),n.showErrors()}else{var l={},d=o||n.defaultMessage(i,"remote");l[i.name]=s.message=t.isFunction(d)?d(e):d,n.showErrors(l)}s.valid=a,n.stopRequest(i,a)}},o)),"pending"},minlength:function(e,i,o){return this.optional(i)||this.getLength(t.trim(e),i)>=o},maxlength:function(e,i,o){return this.optional(i)||this.getLength(t.trim(e),i)<=o},rangelength:function(e,i,o){var s=this.getLength(t.trim(e),i);return this.optional(i)||s>=o[0]&&s<=o[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(Date.parse(t.replace(/-/g,"/"))))},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},accept:function(t,e,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp(".("+i+")$","i"))},equalTo:function(e,i,o){var s=t(o).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()});return e==s.val()}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,o){var s=t.port;"abort"==t.mode&&(e[s]&&e[s].abort(),e[s]=o)});else{var i=t.ajax;t.ajax=function(o){var s=("mode"in o?o:t.ajaxSettings).mode,n=("port"in o?o:t.ajaxSettings).port;return"abort"==s?(e[n]&&e[n].abort(),e[n]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(t){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||t.each({
focus:"focusin",blur:"focusout"},function(e,i){function o(e){return e=t.event.fix(e),e.type=i,t.event.handle.call(this,e)}t.event.special[i]={setup:function(){this.addEventListener(e,o,!0)},teardown:function(){this.removeEventListener(e,o,!0)},handler:function(e){return arguments[0]=t.event.fix(e),arguments[0].type=i,t.event.handle.apply(this,arguments)}}}),t.extend(t.fn,{validateDelegate:function(e,i,o){return this.bind(i,function(i){var s=t(i.target);return s.is(e)?o.apply(s,arguments):void 0})}})}(jQuery),function(t){t.omWidget("om.omComboTree",{options:{optionField:"text",valueField:"id",parentField:"pid",simpleDataModel:!1,showCheckbox:!1,expandAll:!1,collapseAll:!0,width:"auto",disabled:!1,readOnly:!1,editable:!1,lazyLoad:!1,listMaxHeight:300,listAutoWidth:!1,onlyChild:!1,multi:!1,multiSeparator:",",emptyText:"None"},_init:function(){var t=this.options,e=this.textInput,i=t.dataSource;if("undefined"!=typeof t.value&&(t.lazyLoad=!1),"auto"!=t.width){var o=e.parent().width(t.width);e.width(o.innerWidth()-e.next().outerWidth()-e.outerWidth()+e.width())}t.multi&&(t.editable=this.options.editable=!1),this._refeshEmptyText(t.emptyText),t.disabled?e.attr("disabled",!0):e.removeAttr("disabled"),t.readOnly||!t.editable?e.attr("readonly","readOnly"):e.removeAttr("readonly"),t.lazyLoad?this.dataHasLoaded=!1:(this._toggleLoading("add"),i&&"string"==typeof i?this._ajaxLoad(i):i&&"object"==typeof i?(this._loadData(i),this._toggleLoading("remove")):(this.dataHasLoaded=!0,this._toggleLoading("remove")));var s=t.disabled||t.readOnly;s?this.expandTrigger.addClass("om-state-disabled"):this._bindEvent()},_create:function(){var e=this.element,i=t('<span class="om-combo om-combotree om-widget om-state-default"></span>').css({position:"relative"}).insertAfter(e).wrapInner(e);this.textInput=t('<input type="text"/>').appendTo(i),this.valueEl=e.hide(),this.expandTrigger=t('<span class="om-combo-trigger"></span>').appendTo(i),this.dropList=t(t('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(i).children()[0]).hide(),this.dropListTree=t('<ul class="om-droplist-tree"></ul>').appendTo(this.dropList)},_toggleLoading:function(t){this.options.disabled||("add"==t?this.expandTrigger.removeClass("om-icon-carat-1-s").addClass("om-loading"):"remove"==t&&this.expandTrigger.removeClass("om-loading").addClass("om-icon-carat-1-s"))},_loadData:function(e){{var i=this.options,o=this,s=this.dropList,n=this.dropListTree;this.element}if(i.dataSource=e,this.dataHasLoaded=!0,treeOptions={dataSource:i.dataSource,simpleDataModel:i.simpleDataModel,showCheckbox:i.multi,onExpand:function(){s.parent().width("auto")},onBeforeSelect:function(t){return i.onlyChild&&t.children?!1:void 0},onCheck:function(t){var e=n.omTree("getChecked",!0);o._setValue(e)},onSelect:function(t){o._setValue(t),s.hide()}},i.multi&&t.extend(treeOptions,{onCheck:function(e){t(this).omTree("isCheck",e)?o._setValue(e):o._setValue(e,!0)}}),n.omTree(treeOptions),i.expandAll&&n.omTree("expandAll"),i.collapseAll&&n.omTree("collapseAll"),i.value){var a=n.omTree("findNode","id",i.value);a&&(n.omTree("expand",a),n.omTree("select",a),this._setValue(a))}this._showDropList(),s.hide()},_setValue:function(e){var i=this.options,o=!0,s=this.textInput,n=this.valueEl,a=[],r=[],l=n.val();if(t.isArray(e))for(var d=0;d<e.length;d++)a.push(e[d].id),r.push(e[d].text);else a.push(e.id),r.push(e.text);a=a.join(i.multiSeparator?i.multiSeparator:""),r=r.join(i.multiSeparator?i.multiSeparator:""),a==l&&(o=!1),n.val(a),s.val(r),i.onValueChange&&o&&this._trigger("onValueChange",null,s,a,l),this._refeshEmptyText(i.emptyText)},_ajaxLoad:function(e){var i=this,o=this.options;t.ajax({url:e,method:"POST",dataType:"json",success:function(t,e){i.dataHasLoaded=!0;var s=o.onSuccess;return s&&i._trigger("onSuccess",null,t,e)===!1?void(o.dataSource=t):(i._loadData(t),void i._toggleLoading("remove"))},error:function(t,s,n){if(i.dataHasLoaded=!0,!o.onError)throw i._toggleLoading("remove"),new Error('An error occurred while load records from URL "'+e+'",the error message is:'+n.message);i._toggleLoading("remove"),i._trigger("onError",null,t,s,n)}})},_bindEvent:function(){var e=this,i=this.options,o=this.textInput,s=(this.valueEl,o.parent("span")),n=this.dropList,a=this.expandTrigger,r=i.emptyText,l=!1;s.mouseenter(function(){i.disabled||s.addClass("om-state-hover")}).mouseleave(function(){s.removeClass("om-state-hover")}),o.focus(function(){l||(l=!0,t(".om-droplist").not(n).hide(),s.addClass("om-state-focus"),e._refeshEmptyText(r),e.dataHasLoaded||a.hasClass("om-loading")||(e._toggleLoading("add"),"object"==typeof i.dataSource?(e._loadData(i.dataSource),e._toggleLoading("remove")):"string"==typeof i.dataSource?e._ajaxLoad(i.dataSource):(e.dataHasLoaded=!0,e._toggleLoading("remove"))),i.disabled||i.readOnly||n.toggle())}).blur(function(t){l=!1,s.removeClass("om-state-focus"),o.removeClass("om-combo-focus"),i.disabled||i.readOnly||i.multi||e._refeshEmptyText(r)}).keyup(function(e){var i=e.keyCode,o=t.om.keyCode;switch(i){case o.DOWN:break;case o.UP:break;case o.ENTER:break;case o.ESCAPE:n.hide();break;case o.TAB:}}),s.mousedown(function(t){t.stopPropagation()}),n.mousedown(function(t){t.stopPropagation()}),a.click(function(){!a.hasClass("om-loading")&&o.focus()}).mousedown(function(){!a.hasClass("om-loading")&&s.addClass("om-state-active")}).mouseup(function(){!a.hasClass("om-loading")&&s.removeClass("om-state-active")}),t(document).bind("mousedown.omCombo",this.globalEvent=function(){n.hide()})},_showDropList:function(){var e=this.element,i=this.options,o=this.dropList.scrollTop(0).css({height:"auto"}),s=o.parent(),n=e.parent(),a=n.outerWidth(),r=o.outerWidth();t.browser.msie&&"7.0"==t.browser.version&&!t.support.style&&(r=o.show().outerWidth()),(i.listAutoWidth||a>r)&&s.width(a),o.css("height","auto"),"auto"!=i.listMaxHeight&&o.height(i.listMaxHeight).css("overflow-y","auto");n.offset();s.css({left:"-1px",top:n.outerHeight()}),o.is(":hidden")?o.show():o.hide()},_refeshEmptyText:function(t){var e=this.textInput;t&&(""===e.val()?e.val(t).addClass("om-empty-text"):(e.val()===t&&e.val(""),e.removeClass("om-empty-text")))}})}(jQuery),define("vendor/omui/om-window",function(t,e,i){t("jquery");!function(t){{var e="om-dialog om-widget om-widget-content om-corner-all ",i={height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0}}t.omWidget("om.omWindow",{options:{autoOpen:!0,closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,minimizable:!0,minimumText:"minimum",maximizable:!0,maximumText:"maximum",hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var i=this;i.element.show().removeAttr("title").addClass("om-dialog-content om-widget-content").wrap("<div></div>"),i.element.parent().bind("om-remove.omDialog",i.__removeBind=function(){i.element.remove()});{var o=i.options,s=o.title||"&#160;",n=t.om.omDialog.getTitleId(i.element),a=(i.uiDialog=i.element.parent()).appendTo(document.body).hide().addClass(e+o.dialogClass).css({zIndex:o.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(e){o.closeOnEscape&&e.keyCode&&e.keyCode===t.om.keyCode.ESCAPE&&(i.close(e),e.preventDefault())}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(t){i.moveToTop(!1,t)}),r=(i.uiDialogTitlebar=t("<div></div>")).addClass("om-dialog-titlebar om-widget-header om-corner-all om-helper-clearfix").prependTo(a),l=t('<a href="#"></a>').addClass("om-dialog-titlebar-close om-corner-tr").attr("role","button").hover(function(){l.addClass("om-state-hover")},function(){l.removeClass("om-state-hover")}).focus(function(){l.addClass("om-state-focus")}).blur(function(){l.removeClass("om-state-focus")}).click(function(t){return i.close(t),!1}).appendTo(r);(i.uiDialogTitlebarCloseText=t("<span></span>")).addClass("om-icon-closethick").text(o.closeText).appendTo(l),t("<span></span>").addClass("om-dialog-title").attr("id",n).html(s).prependTo(r)}r.find("*").add(r).disableSelection(),o.draggable&&t.om.omDraggable&&i._makeDraggable(),o.resizable&&t.fn.omResizable&&i._makeResizable(),o.maximizable&&i._makeMaximizable(),o.minimizable&&i._makeMinimizable(),r.children(".om-dialog-titlebar-minimum").hide(),i._isOpen=!1,t.fn.bgiframe&&a.bgiframe()},_init:function(){if(this.element.find("iframe").length>0){var t=this.element.find("iframe"),e=t.data("src");t.attr("src",e),t.removeData("src")}this.options.autoOpen&&this.open()},destroy:function(){var t=this;return t.overlay&&t.overlay.destroy(),t.uiDialog.hide(),t.element.unbind(".dialog").removeData("dialog").removeClass("om-dialog-content om-widget-content").hide().appendTo("body"),t.uiDialog.remove(),t.originalTitle&&t.element.attr("title",t.originalTitle),t},widget:function(){return this.uiDialog},close:function(e){var i,o,s=this,n=this.options,a=n.onBeforeClose,r=n.onClose;if(!a||!1!==s._trigger("onBeforeClose",e))return s.overlay&&s.overlay.destroy(),s.uiDialog.unbind("keypress.om-dialog"),s._isOpen=!1,s.options.hide?s.uiDialog.hide(s.options.hide,function(){r&&s._trigger("onClose",e)}):(s.uiDialog.hide(),r&&s._trigger("onClose",e)),t.om.omDialog.overlay.resize(),s.options.modal&&(i=0,t(".om-dialog").each(function(){this!==s.uiDialog[0]&&(o=t(this).css("z-index"),isNaN(o)||(i=Math.max(i,o)))}),t.om.omDialog.maxZ=i),s},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var o,s=this,n=s.options;return n.modal&&!e||!n.stack&&!n.modal?s._trigger("onFocus",i):(n.zIndex>t.om.omDialog.maxZ&&(t.om.omDialog.maxZ=n.zIndex),s.overlay&&(t.om.omDialog.maxZ+=1,s.overlay.$el.css("z-index",t.om.omDialog.overlay.maxZ=t.om.omDialog.maxZ)),o={scrollTop:s.element.scrollTop(),scrollLeft:s.element.scrollLeft()},t.om.omDialog.maxZ+=1,s.uiDialog.css("z-index",t.om.omDialog.maxZ),s.element.attr(o),s._trigger("onFocus",i),s)},open:function(){if(!this._isOpen){var e=this,i=e.options,o=e.uiDialogTitlebar,s=e.uiDialog;e.overlay=i.modal?new t.om.omDialog.overlay(e):null,e._size();var n={my:"center",at:"center"};e._position(n),o.children(".om-dialog-titlebar-minimum").hide(),o.children(".om-dialog-titlebar-maximum").show(),s.show(i.show),e.moveToTop(!0),i.modal&&s.bind("keypress.om-dialog",function(e){if(e.keyCode===t.om.keyCode.TAB){var i=t(":tabbable",this),o=i.filter(":first"),s=i.filter(":last");return e.target!==s[0]||e.shiftKey?e.target===o[0]&&e.shiftKey?(s.focus(1),!1):void 0:(o.focus(1),!1)}}),t(e.element.find(":tabbable").get().concat(s.find(".om-dialog-buttonpane :tabbable").get().concat(s.get()))).eq(0).focus(),e._isOpen=!0;var a=i.onOpen;return a&&e._trigger("onOpen"),e}},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,o=i.options,s=t(document),n=0;i.uiDialog.omDraggable({cancel:".om-dialog-content, .om-dialog-titlebar-close",handle:".om-dialog-titlebar",containment:"document",cursor:"move",onStart:function(s,a){n="auto"===o.height?"auto":t(this).height(),t(this).height(t(this).height()).addClass("om-dialog-dragging"),i._trigger("onDragStart",e(s),a)},onDrag:function(t,o){i._trigger("onDrag",e(t),o)},onStop:function(a,r){o.position=[a.position.left-s.scrollLeft(),a.position.top-s.scrollTop()],t(this).removeClass("om-dialog-dragging").height(n),i._trigger("onDragStop",e(a),r),t.om.omDialog.overlay.resize()}})},_makeResizable:function(e){function i(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}e=void 0===e?this.options.resizable:e;var o=this,s=o.options,n=o.uiDialog.css("position"),a="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";o.uiDialog.omResizable({cancel:".om-dialog-content",containment:"document",alsoResize:o.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:o._minHeight(),handles:a,start:function(e,s){t(this).addClass("om-dialog-resizing"),o._trigger("onResizeStart",e,i(s))},resize:function(t,e){o._trigger("onResize",t,i(e))},stop:function(e,n){t(this).removeClass("om-dialog-resizing"),s.height=t(this).height(),s.width=t(this).width(),o._trigger("onResizeStop",e,i(n)),t.om.omDialog.overlay.resize()}}).css("position",n).find(".om-resizable-se").addClass("om-icon om-icon-grip-diagonal-se")},_makeMaximizable:function(){{var e=this,i=e.options,o=e.uiDialog,s=e.uiDialogTitlebar,n=t('<a href="#"></a>').addClass("om-dialog-titlebar-maximum om-corner-tr").attr("role","button").hover(function(){n.addClass("om-state-hover")},function(){n.removeClass("om-state-hover")}).focus(function(){n.addClass("om-state-focus")}).blur(function(){n.removeClass("om-state-focus")}).appendTo(s);(e.uiDialogTitlebarMaximumText=t("<span></span>")).addClass("om-icon-closethick").text(i.maximumText).appendTo(n)}n.unbind().bind("click",function(){var e={my:"top",at:"left",collision:"fit"},n=t(document).width()-5,a=t(document).height()-5;t.extend(i.position,e),o.css({width:n,height:a,top:0,left:0}),o.children(".om-dialog-content").css({width:n,height:a-s.outerHeight()}),s.children(".om-dialog-titlebar-maximum").hide(),s.children(".om-dialog-titlebar-minimum").show()})},_makeMinimizable:function(){var e=this,i=e.options,o=(e.uiDialog,this.element.parent().children(".om-dialog-titlebar"));uiDialogTitlebarMinimum=t('<a href="#"></a>').addClass("om-dialog-titlebar-minimum om-corner-tr").attr("role","button").hover(function(){uiDialogTitlebarMinimum.addClass("om-state-hover")},function(){uiDialogTitlebarMinimum.removeClass("om-state-hover")}).focus(function(){uiDialogTitlebarMinimum.addClass("om-state-focus")}).blur(function(){uiDialogTitlebarMinimum.removeClass("om-state-focus")}).appendTo(o),uiDialogTitlebarMinimumText=(e.uiDialogTitlebarMinimumText=t("<span></span>")).addClass("om-icon-closethick").text(i.minimumText).appendTo(uiDialogTitlebarMinimum),uiDialogTitlebarMinimum.unbind().bind("click",function(){var t={my:"center",at:"center"};e._size(),e._position(t),o.children(".om-dialog-titlebar-minimum").hide(),o.children(".om-dialog-titlebar-maximum").show()})},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,o=[],s=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(o=e.split?e.split(" "):[e[0],e[1]],1===o.length&&(o[1]=o[0]),t.each(["left","top"],function(t,e){+o[t]===o[t]&&(s[t]=o[t],o[t]=e)}),e={my:o.join(" "),at:o.join(" "),offset:s.join(" ")}),e=t.extend({},t.om.omDialog.prototype.options.position,e)):e=t.om.omDialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(t.extend({of:window},e)),i||this.uiDialog.hide()},_setOptions:function(e){var s=this,n={},a=!1;t.each(e,function(t,e){s._setOption(t,e),t in i&&(a=!0),t in o&&(n[t]=e)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option",n)},_setOption:function(i,o){var s=this,n=s.uiDialog;switch(i){case"closeText":s.uiDialogTitlebarCloseText.text(""+o);break;case"dialogClass":n.removeClass(s.options.dialogClass).addClass(e+o);break;case"disabled":o?n.addClass("om-dialog-disabled"):n.removeClass("om-dialog-disabled");break;case"draggable":var a=n.is(":data(draggable)");a&&!o&&n.omDraggable("destroy"),!a&&o&&s._makeDraggable();break;case"position":s._position(o);break;case"resizable":var r=n.is(":data(resizable)");r&&!o&&n.omResizable("destroy"),r&&"string"==typeof o&&n.omResizable("option","handles",o),r||o===!1||s._makeResizable(o);break;case"title":t(".om-dialog-title",s.uiDialogTitlebar).html(""+(o||"&#160;"))}t.OMWidget.prototype._setOption.apply(s,arguments)},_size:function(){var e,i,o=this.options,s=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),o.minWidth>o.width&&(o.width=o.minWidth),e=this.uiDialog.css({height:"auto",width:o.width}).height(),i=Math.max(0,o.minHeight-e),"auto"===o.height)if(t.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var n=this.element.css("height","auto").height();s||this.uiDialog.hide(),this.element.height(Math.max(n,i))}else this.element.height(Math.max(o.height-e,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option","minHeight",this._minHeight())}}),t.extend(t.om.omDialog,{version:"2.1",uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.om.omDialog.overlay.create(e)}}),t.extend(t.om.omDialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){t.om.omDialog.overlay.instances.length&&t(document).bind(t.om.omDialog.overlay.events,function(e){return t(e.target).zIndex()<t.om.omDialog.overlay.maxZ?!1:void 0})},1),t(document).bind("keydown.dialog-overlay",function(i){e.options.closeOnEscape&&i.keyCode&&i.keyCode===t.om.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}),t(window).bind("resize.dialog-overlay",t.om.omDialog.overlay.resize));var i=(this.oldInstances.pop()||t("<div></div>").addClass("om-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return t.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(e){e.parent().unbind(this.__removeBind);var i=t.inArray(e,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.remove();var o=0;t.each(this.instances,function(){o=Math.max(o,this.css("z-index"))}),this.maxZ=o},height:function(){var e,i;return t.browser.msie&&t.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>e?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,i;return t.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>e?t(window).width()+"px":e+"px"):t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.om.omDialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.om.omDialog.overlay.width(),height:t.om.omDialog.overlay.height()})}}),t.extend(t.om.omDialog.overlay.prototype,{destroy:function(){t.om.omDialog.overlay.destroy(this.$el)}})}(jQuery)}),define("vendor/omui/om-combogrid",function(t,e,i){t("jquery");!function(t){t.omWidget("om.omComboGrid",{options:{autoFit:!1,colModel:!1,gridHeight:"fit",gridWidth:"100%",limit:15,pageText:"{index}",showIndex:!0,method:"GET",optionField:"text",valueField:"id",showCheckbox:!1,width:"auto",disabled:!1,readOnly:!1,editable:!1,lazyLoad:!1,listMaxHeight:300,listAutoWidth:!1,emptyText:"None",multi:!1,multiSeparator:","},_init:function(){var t=this.options,e=this.textInput,i=t.dataSource;if("undefined"!=typeof t.value&&(t.lazyLoad=!1),"auto"!=t.width){var o=e.parent().width(t.width);e.width(o.innerWidth()-e.next().outerWidth()-e.outerWidth()+e.width())}t.multi&&(t.editable=this.options.editable=!1),this._refeshEmptyText(t.emptyText),t.disabled?e.attr("disabled",!0):e.removeAttr("disabled"),t.readOnly||!t.editable?e.attr("readonly","readOnly"):e.removeAttr("readonly"),t.lazyLoad?this.dataHasLoaded=!1:(this._toggleLoading("add"),i&&"string"==typeof i?this._loadData(i):(this.dataHasLoaded=!0,this._toggleLoading("remove")));var s=t.disabled||t.readOnly;s?this.expandTrigger.addClass("om-state-disabled"):this._bindEvent()},_create:function(){var e=this.element,i=t('<span class="om-combo om-combogrid om-widget om-state-default"></span>').css({position:"relative"}).insertAfter(e).wrapInner(e);this.textInput=t('<input type="text"/>').appendTo(i),this.valueEl=e.hide(),this.expandTrigger=t('<span class="om-combo-trigger"></span>').appendTo(i),this.dropList=t(t('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children()[0]).hide(),this.toolbar=t('<div class="om-droplist-toolbar"></div>').appendTo(this.dropList),this.dropListGrid=t('<table class="om-droplist-grid"></table>').appendTo(this.dropList)},_toggleLoading:function(t){this.options.disabled||("add"==t?this.expandTrigger.removeClass("om-icon-carat-1-s").addClass("om-loading"):"remove"==t&&this.expandTrigger.removeClass("om-loading").addClass("om-icon-carat-1-s"))},_setValue:function(t){for(var e=this.options,i=e.valueField,o=e.optionField,s=!0,n=this.textInput,a=this.valueEl,r=[],l=[],d=a.val(),h=0;h<t.length;h++)r.push(t[h][i]),l.push(t[h][o]);r=r.join(e.multiSeparator?e.multiSeparator:""),l=l.join(e.multiSeparator?e.multiSeparator:""),r==d&&(s=!1),a.val(r),n.val(l),e.onValueChange&&s&&this._trigger("onValueChange",null,n,r,d),this._refeshEmptyText(e.emptyText)},_droplistToolbar:function(){var e=t('<div class="input-append"></div>').append('<input class="span2" id="om-droplist-toolbar-searchText" type="text"><button type="button" id="om-droplist-toolbar-search" class="btn btn-mini">'+t.om.lang.omComboGrid.search+"</button>").appendTo(this.toolbar),i=this.dropListGrid,o=this.options.dataSource,s=e.children("#om-droplist-toolbar-search");s.bind("click",function(t){var s=e.children("#om-droplist-toolbar-searchText").val();s&&i.omGrid("setData",o,{name:s})})},_loadData:function(t){{var e=this.options,i=this,o=this.dropList,s=this.dropListGrid;this.element}e.dataSource=t,this.dataHasLoaded=!0;var n={autoFit:e.autoFit,dataSource:e.dataSource,method:e.method,extraData:e.extraData,colModel:e.colModel,limit:e.limit,pageText:e.pageText,singleSelect:e.multi?!1:!0,height:"auto",width:e.gridWidth,showIndex:e.showIndex,preProcess:e.preProcess,onRowSelect:function(t,e,n){var a=s.omGrid("getSelections",!0);i._setValue(a),o.hide()},onSuccess:function(t,o,s,n){e.value&&i._fillValue(t),i.dataHasLoaded=!0;var a=e.onSuccess;return a&&i._trigger("onSuccess",null,t,textStatus)===!1?void(e.dataSource=t):void i._toggleLoading("remove")},onError:function(o,s,n){if(i.dataHasLoaded=!0,!e.onError)throw i._toggleLoading("remove"),new Error('An error occurred while load records from URL "'+t+'",the error message is:'+n.message);i._toggleLoading("remove"),i._trigger("onError",null,o,s,n)}};this._droplistToolbar(),s.omGrid(n),e.value&&s.omGrid("setSelections",[]),this._showDropList(),o.hide()},_fillValue:function(t){var e=this.dropListGrid,i=this.options,o=t.page,s=t.indexes;o&&s&&(e.omGrid("reload",o),e.omGrid("setSelections",s)),i.value&&this._setValue(i.value)},_bindEvent:function(){var e=this,i=this.options,o=this.textInput,s=(this.element,o.parent("span")),n=this.dropList,a=this.expandTrigger,r=i.emptyText,l=!1;s.mouseenter(function(){i.disabled||s.addClass("om-state-hover")}).mouseleave(function(){s.removeClass("om-state-hover")}),o.focus(function(){l||(l=!0,t(".om-droplist").not(n).hide(),s.addClass("om-state-focus"),e._refeshEmptyText(r),e.dataHasLoaded||a.hasClass("om-loading")||(e._toggleLoading("add"),"string"==typeof i.dataSource?e._loadData(i.dataSource):(e.dataHasLoaded=!0,e._toggleLoading("remove"))),i.disabled||i.readOnly||n.toggle())}).blur(function(t){l=!1,s.removeClass("om-state-focus"),o.removeClass("om-combo-focus"),i.disabled||i.readOnly||i.multi||e._refeshEmptyText(r)}).keyup(function(e){var i=e.keyCode,o=t.om.keyCode;switch(i){case o.DOWN:break;case o.UP:break;case o.ENTER:break;case o.ESCAPE:n.hide();break;case o.TAB:}}),s.mousedown(function(t){t.stopPropagation()}),n.mousedown(function(t){t.stopPropagation()}),a.click(function(){!a.hasClass("om-loading")&&o.focus()}).mousedown(function(){!a.hasClass("om-loading")&&s.addClass("om-state-active")}).mouseup(function(){!a.hasClass("om-loading")&&s.removeClass("om-state-active")}),t(document).bind("mousedown.omCombo",this.globalEvent=function(){n.hide()})},_showDropList:function(){var e=this.element,i=this.options,o=this.dropList.scrollTop(0).css({height:"auto"}),s=o.parent(),n=e.parent(),a=n.outerWidth(),r=o.outerWidth();t.browser.msie&&"7.0"==t.browser.version&&!t.support.style&&(r=o.show().outerWidth()),i.listAutoWidth||s.width(a),o.css("height","auto").children().css("border",0).find(".hDiv").css("border-top","1px solid #DDD").find(".hDivBox").css("padding-right","5px"),"auto"!=i.listMaxHeight&&o.height(i.listMaxHeight).css("overflow-y","auto");var l=n.offset();s.css({left:l.left-1,top:l.top+n.outerHeight()+2}),o.is(":hidden")?o.show():o.hide()},_refeshEmptyText:function(t){var e=this.textInput;t&&(""===e.val()?e.val(t).addClass("om-empty-text"):(e.val()===t&&e.val(""),e.removeClass("om-empty-text")))}}),t.om.lang.omComboGrid={search:"搜索"}}(jQuery)});